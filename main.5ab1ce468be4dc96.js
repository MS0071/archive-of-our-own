(self.webpackChunkao3_page=self.webpackChunkao3_page||[]).push([[179],{2011:(at,De,k)=>{"use strict";k.d(De,{hO:()=>je,xv:()=>ue,Dh:()=>ae,GT:()=>he,cc:()=>Ae,on:()=>Z,pX:()=>ie});var l=k(5e3),Q=k(127),F=k(5813);at=k.hmd(at);const se=["ngOnDestroy"],ie=(ne,pe,Se,ye={})=>new Proxy(ne,{get:(He,xe)=>Se.runOutsideAngular(()=>{var tt;if(ne[xe])return(null===(tt=null==ye?void 0:ye.spy)||void 0===tt?void 0:tt.get)&&ye.spy.get(xe,ne[xe]),ne[xe];if(se.indexOf(xe)>-1)return()=>{};const Ye=pe.toPromise().then(ft=>{const J=ft&&ft[xe];return"function"==typeof J?J.bind(ft):J&&J.then?J.then(fe=>Se.run(()=>fe)):Se.run(()=>J)});return new Proxy(()=>{},{get:(ft,J)=>Ye[J],apply:(ft,J,fe)=>Ye.then(we=>{var Ce;const Fe=we&&we(...fe);return(null===(Ce=null==ye?void 0:ye.spy)||void 0===Ce?void 0:Ce.apply)&&ye.spy.apply(xe,fe,Fe),Fe})})})}),he=(ne,pe)=>{pe.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(ye=>{Object.defineProperty(ne.prototype,ye,Object.getOwnPropertyDescriptor(Se.prototype||Se,ye))})})};class oe{constructor(pe){return pe}}const ae=new l.OlP("angularfire2.app.options"),ue=new l.OlP("angularfire2.app.name");function Z(ne,pe,Se){const He="object"==typeof Se&&Se||{};He.name=He.name||"string"==typeof Se&&Se||"[DEFAULT]";const tt=Q.Z.apps.filter(Ye=>Ye&&Ye.name===He.name)[0]||pe.runOutsideAngular(()=>Q.Z.initializeApp(ne,He));try{JSON.stringify(ne)!==JSON.stringify(tt.options)&&H("error",`${tt.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new oe(tt)}const H=(ne,...pe)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ne](...pe)},X={provide:oe,useFactory:Z,deps:[ae,l.R0b,[new l.FiY,ue]]};let je=(()=>{class ne{constructor(Se){Q.Z.registerVersion("angularfire",F.q4.full,"core"),Q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),Q.Z.registerVersion("angular",l.q4F.full,Se.toString())}static initializeApp(Se,ye){return{ngModule:ne,providers:[{provide:ae,useValue:Se},{provide:ue,useValue:ye}]}}}return ne.\u0275fac=function(Se){return new(Se||ne)(l.LFG(l.Lbi))},ne.\u0275mod=l.oAB({type:ne}),ne.\u0275inj=l.cJS({providers:[X]}),ne})();function Ae(ne,pe,Se,ye,He){const[,xe,tt]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===ne)||[];if(xe)return function Oe(ne,pe){try{return ne.toString()===pe.toString()}catch(Se){return ne===pe}}(He,tt)||(K("error",`${pe} was already initialized on the ${Se} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:He,was:tt})),xe;{const Ye=ye();return globalThis.\u0275AngularfireInstanceCache.push([ne,Ye,He]),Ye}}const Be=!!at.hot,K=(ne,...pe)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ne](...pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,k)=>{"use strict";k.d(De,{q4:()=>md,iC:()=>ou,HU:()=>Gu,vb:()=>sf,JM:()=>Ed});var l=k(5e3),Q=k(5867),F=k(5861),se=k(9681),ie=k(2090),he=k(4859),oe=k(1877),ae=k(2940);const ue="@firebase/installations",Z="0.5.5",X=`w:${Z}`,je="FIS_v2",pe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Se(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function ye({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function He(C){return{token:C.token,requestStatus:2,expiresIn:we(C.expiresIn),creationTime:Date.now()}}function xe(C,b){return tt.apply(this,arguments)}function tt(){return(tt=(0,F.Z)(function*(C,b){const V=(yield b.json()).error;return pe.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ye({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function ft(C,{refreshToken:b}){const N=Ye(C);return N.append("Authorization",function Ce(C){return`${je} ${C}`}(b)),N}function J(C){return fe.apply(this,arguments)}function fe(){return(fe=(0,F.Z)(function*(C){const b=yield C();return b.status>=500&&b.status<600?C():b})).apply(this,arguments)}function we(C){return Number(C.replace("s","000"))}function Fe(C,b){return de.apply(this,arguments)}function de(){return(de=(0,F.Z)(function*(C,{fid:b}){const N=ye(C),re={method:"POST",headers:Ye(C),body:JSON.stringify({fid:b,authVersion:je,appId:C.appId,sdkVersion:X})},le=yield J(()=>fetch(N,re));if(le.ok){const Ge=yield le.json();return{fid:Ge.fid||b,registrationStatus:2,refreshToken:Ge.refreshToken,authToken:He(Ge.authToken)}}throw yield xe("Create Installation",le)})).apply(this,arguments)}function At(C){return new Promise(b=>{setTimeout(b,C)})}const Er=/^[cdef][\w-]{21}$/;function pt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const N=function rr(C){return function Zt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Er.test(N)?N:""}catch(C){return""}}function zt(C){return`${C.appName}!${C.appId}`}const pr=new Map;function rn(C,b){const N=zt(C);Sn(N,b),function Ei(C,b){const N=function qt(){return!Xt&&"BroadcastChannel"in self&&(Xt=new BroadcastChannel("[Firebase] FID Change"),Xt.onmessage=C=>{Sn(C.data.key,C.data.fid)}),Xt}();N&&N.postMessage({key:C,fid:b}),function co(){0===pr.size&&Xt&&(Xt.close(),Xt=null)}()}(N,b)}function Sn(C,b){const N=pr.get(C);if(N)for(const V of N)V(b)}let Xt=null;const Me="firebase-installations-store";let gr=null;function st(){return gr||(gr=(0,ae.openDb)("firebase-installations-database",1,C=>{0===C.oldVersion&&C.createObjectStore(Me)})),gr}function Ii(C,b){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,F.Z)(function*(C,b){const N=zt(C),z=(yield st()).transaction(Me,"readwrite"),re=z.objectStore(Me),le=yield re.get(N);return yield re.put(b,N),yield z.complete,(!le||le.fid!==b.fid)&&rn(C,b.fid),b})).apply(this,arguments)}function Hn(C){return Us.apply(this,arguments)}function Us(){return(Us=(0,F.Z)(function*(C){const b=zt(C),V=(yield st()).transaction(Me,"readwrite");yield V.objectStore(Me).delete(b),yield V.complete})).apply(this,arguments)}function Ir(C,b){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,F.Z)(function*(C,b){const N=zt(C),z=(yield st()).transaction(Me,"readwrite"),re=z.objectStore(Me),le=yield re.get(N),Ge=b(le);return void 0===Ge?yield re.delete(N):yield re.put(Ge,N),yield z.complete,Ge&&(!le||le.fid!==Ge.fid)&&rn(C,Ge.fid),Ge})).apply(this,arguments)}function gn(C){return si.apply(this,arguments)}function si(){return(si=(0,F.Z)(function*(C){let b;const N=yield Ir(C,V=>{const z=Wo(V),re=Ft(C,z);return b=re.registrationPromise,re.installationEntry});return""===N.fid?{installationEntry:yield b}:{installationEntry:N,registrationPromise:b}})).apply(this,arguments)}function Wo(C){return ln(C||{fid:pt(),registrationStatus:0})}function Ft(C,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(pe.create("app-offline"))};const N={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},V=function ut(C,b){return mt.apply(this,arguments)}(C,N);return{installationEntry:N,registrationPromise:V}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:ho(C)}:{installationEntry:b}}function mt(){return(mt=(0,F.Z)(function*(C,b){try{return Ii(C,yield Fe(C,b))}catch(N){throw Se(N)&&409===N.customData.serverCode?yield Hn(C):yield Ii(C,{fid:b.fid,registrationStatus:0}),N}})).apply(this,arguments)}function ho(C){return ps.apply(this,arguments)}function ps(){return(ps=(0,F.Z)(function*(C){let b=yield lt(C);for(;1===b.registrationStatus;)yield At(100),b=yield lt(C);if(0===b.registrationStatus){const{installationEntry:N,registrationPromise:V}=yield gn(C);return V||N}return b})).apply(this,arguments)}function lt(C){return Ir(C,b=>{if(!b)throw pe.create("installation-not-found");return ln(b)})}function ln(C){return function mr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Ti(C,b){return B.apply(this,arguments)}function B(){return(B=(0,F.Z)(function*({appConfig:C,platformLoggerProvider:b},N){const V=q(C,N),z=ft(C,N),re=b.getImmediate({optional:!0});re&&z.append("x-firebase-client",re.getPlatformInfoString());const Ge={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:X}})},Ke=yield J(()=>fetch(V,Ge));if(Ke.ok)return He(yield Ke.json());throw yield xe("Generate Auth Token",Ke)})).apply(this,arguments)}function q(C,{fid:b}){return`${ye(C)}/${b}/authTokens:generate`}function G(C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,F.Z)(function*(C,b=!1){let N;const V=yield Ir(C.appConfig,re=>{if(!rt(re))throw pe.create("not-registered");const le=re.authToken;if(!b&&Tt(le))return re;if(1===le.requestStatus)return N=ee(C,b),re;{if(!navigator.onLine)throw pe.create("app-offline");const Ge=sn(re);return N=_e(C,Ge),Ge}});return N?yield N:V.authToken})).apply(this,arguments)}function ee(C,b){return $e.apply(this,arguments)}function $e(){return($e=(0,F.Z)(function*(C,b){let N=yield Te(C.appConfig);for(;1===N.authToken.requestStatus;)yield At(100),N=yield Te(C.appConfig);const V=N.authToken;return 0===V.requestStatus?G(C,b):V})).apply(this,arguments)}function Te(C){return Ir(C,b=>{if(!rt(b))throw pe.create("not-registered");return function ir(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function _e(C,b){return qe.apply(this,arguments)}function qe(){return(qe=(0,F.Z)(function*(C,b){try{const N=yield Ti(C,b),V=Object.assign(Object.assign({},b),{authToken:N});return yield Ii(C.appConfig,V),N}catch(N){if(!Se(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const V=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ii(C.appConfig,V)}else yield Hn(C.appConfig);throw N}})).apply(this,arguments)}function rt(C){return void 0!==C&&2===C.registrationStatus}function Tt(C){return 2===C.requestStatus&&!function ht(C){const b=Date.now();return b<C.creationTime||C.creationTime+C.expiresIn<b+36e5}(C)}function sn(C){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:b})}function zo(){return(zo=(0,F.Z)(function*(C){const b=C,{installationEntry:N,registrationPromise:V}=yield gn(b.appConfig);return V?V.catch(console.error):G(b).catch(console.error),N.fid})).apply(this,arguments)}function fo(){return(fo=(0,F.Z)(function*(C,b=!1){const N=C;return yield sr(N.appConfig),(yield G(N,b)).token})).apply(this,arguments)}function sr(C){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(C){const{registrationPromise:b}=yield gn(C);b&&(yield b)})).apply(this,arguments)}function Ra(C){return pe.create("missing-app-config-values",{valueName:C})}const Kr="installations",St=C=>{const b=C.getProvider("app").getImmediate(),N=function $n(C){if(!C||!C.options)throw Ra("App Configuration");if(!C.name)throw Ra("App Name");const b=["projectId","apiKey","appId"];for(const N of b)if(!C.options[N])throw Ra(N);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(b);return{app:b,appConfig:N,platformLoggerProvider:(0,se._getProvider)(b,"platform-logger"),_delete:()=>Promise.resolve()}},$t=C=>{const b=C.getProvider("app").getImmediate(),N=(0,se._getProvider)(b,Kr).getImmediate();return{getId:()=>function xl(C){return zo.apply(this,arguments)}(N),getToken:z=>function Du(C){return fo.apply(this,arguments)}(N,z)}};(function xn(){(0,se._registerComponent)(new he.wA(Kr,St,"PUBLIC")),(0,se._registerComponent)(new he.wA("installations-internal",$t,"PRIVATE"))})(),(0,se.registerVersion)(ue,Z),(0,se.registerVersion)(ue,Z,"esm2017");const Cr="@firebase/remote-config",Rn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cg{constructor(b,N,V,z){this.client=b,this.storage=N,this.storageCache=V,this.logger=z}isCachedDataFresh(b,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-N,z=V<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var N=this;return(0,F.Z)(function*(){const[V,z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(z&&N.isCachedDataFresh(b.cacheMaxAgeMillis,V))return z;b.eTag=z&&z.eTag;const re=yield N.client.fetch(b),le=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&le.push(N.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(le),re})()}}function Wh(C=navigator){return C.languages&&C.languages[0]||C.language}class Si{constructor(b,N,V,z,re,le){this.firebaseInstallations=b,this.sdkVersion=N,this.namespace=V,this.projectId=z,this.apiKey=re,this.appId=le}fetch(b){var N=this;return(0,F.Z)(function*(){const[V,z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ke={sdk_version:N.sdkVersion,app_instance_id:V,app_instance_id_token:z,app_id:N.appId,language_code:Wh()},Pt={method:"POST",headers:Ge,body:JSON.stringify(Ke)},en=fetch(le,Pt),Or=new Promise((Fr,Qs)=>{b.signal.addEventListener(()=>{const Io=new Error("The operation was aborted.");Io.name="AbortError",Qs(Io)})});let Vn;try{yield Promise.race([en,Or]),Vn=yield en}catch(Fr){let Qs="fetch-client-network";throw"AbortError"===Fr.name&&(Qs="fetch-timeout"),Rn.create(Qs,{originalErrorMessage:Fr.message})}let wn=Vn.status;const is=Vn.headers.get("ETag")||void 0;let kr,pa;if(200===Vn.status){let Fr;try{Fr=yield Vn.json()}catch(Qs){throw Rn.create("fetch-client-parse",{originalErrorMessage:Qs.message})}kr=Fr.entries,pa=Fr.state}if("INSTANCE_STATE_UNSPECIFIED"===pa?wn=500:"NO_CHANGE"===pa?wn=304:("NO_TEMPLATE"===pa||"EMPTY_CONFIG"===pa)&&(kr={}),304!==wn&&200!==wn)throw Rn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:is,config:kr}})()}}class Zc{constructor(b,N){this.client=b,this.storage=N}fetch(b){var N=this;return(0,F.Z)(function*(){const V=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(b,V)})()}attemptFetch(b,{throttleEndTimeMillis:N,backoffCount:V}){var z=this;return(0,F.Z)(function*(){yield function Na(C,b){return new Promise((N,V)=>{const z=Math.max(b-Date.now(),0),re=setTimeout(N,z);C.addEventListener(()=>{clearTimeout(re),V(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,N);try{const re=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),re}catch(re){if(!function zh(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const b=Number(C.customData.httpStatus);return 429===b||500===b||503===b||504===b}(re))throw re;const le={throttleEndTimeMillis:Date.now()+(0,ie.$s)(V),backoffCount:V+1};return yield z.storage.setThrottleMetadata(le),z.attemptFetch(b,le)}})()}}class dg{constructor(b,N,V,z,re){this.app=b,this._client=N,this._storageCache=V,this._storage=z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pa(C,b){const N=C.target.error||void 0;return Rn.create(b,{originalErrorMessage:N&&N.message})}const Qo="app_namespace_store";class hg{constructor(b,N,V,z=function $c(){return new Promise((C,b)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=V=>{b(Pa(V,"storage-open"))},N.onsuccess=V=>{C(V.target.result)},N.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Qo,{keyPath:"compositeKey"})}}catch(N){b(Rn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=b,this.appName=N,this.namespace=V,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var N=this;return(0,F.Z)(function*(){const V=yield N.openDbPromise;return new Promise((z,re)=>{const Ge=V.transaction([Qo],"readonly").objectStore(Qo),Ke=N.createCompositeKey(b);try{const Pt=Ge.get(Ke);Pt.onerror=en=>{re(Pa(en,"storage-get"))},Pt.onsuccess=en=>{const Or=en.target.result;z(Or?Or.value:void 0)}}catch(Pt){re(Rn.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(b,N){var V=this;return(0,F.Z)(function*(){const z=yield V.openDbPromise;return new Promise((re,le)=>{const Ke=z.transaction([Qo],"readwrite").objectStore(Qo),Pt=V.createCompositeKey(b);try{const en=Ke.put({compositeKey:Pt,value:N});en.onerror=Or=>{le(Pa(Or,"storage-set"))},en.onsuccess=()=>{re()}}catch(en){le(Rn.create("storage-set",{originalErrorMessage:en&&en.message}))}})})()}delete(b){var N=this;return(0,F.Z)(function*(){const V=yield N.openDbPromise;return new Promise((z,re)=>{const Ge=V.transaction([Qo],"readwrite").objectStore(Qo),Ke=N.createCompositeKey(b);try{const Pt=Ge.delete(Ke);Pt.onerror=en=>{re(Pa(en,"storage-delete"))},Pt.onsuccess=()=>{z()}}catch(Pt){re(Rn.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Gc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,F.Z)(function*(){const N=b.storage.getLastFetchStatus(),V=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),re=yield N;re&&(b.lastFetchStatus=re);const le=yield V;le&&(b.lastSuccessfulFetchTimestampMillis=le);const Ge=yield z;Ge&&(b.activeConfig=Ge)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Wc(){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,F.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}!function fg(){(0,se._registerComponent)(new he.wA("remote-config",function C(b,{instanceIdentifier:N}){const V=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,ie.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:re,apiKey:le,appId:Ge}=V.options;if(!re)throw Rn.create("registration-project-id");if(!le)throw Rn.create("registration-api-key");if(!Ge)throw Rn.create("registration-app-id");const Ke=new hg(Ge,V.name,N=N||"firebase"),Pt=new Gc(Ke),en=new oe.Yd(Cr);en.logLevel=oe.in.ERROR;const Or=new Si(z,se.SDK_VERSION,N,re,le,Ge),Vn=new Zc(Or,Ke),wn=new cg(Vn,Ke,Pt,en),is=new dg(V,wn,Pt,Ke,en);return function cn(C){const b=(0,ie.m9)(C);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(is),is},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Cr,"0.3.4"),(0,se.registerVersion)(Cr,"0.3.4","esm2017")}();const zc="/firebase-messaging-sw.js",_o="/firebase-cloud-messaging-push-scope",Au="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vo="google.c.a.c_id",Fa="google.c.a.c_l",Bs="google.c.a.ts",La="google.c.a.e";var br=(()=>{return(C=br||(br={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",br;var C})();function xi(C){const b=new Uint8Array(C);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ol(C){const N=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(N),z=new Uint8Array(V.length);for(let re=0;re<V.length;++re)z[re]=V.charCodeAt(re);return z}const Qr="fcm_token_details_db",Yc="fcm_token_object_Store";function Su(C){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,F.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Qr))return null;let b=null;return(yield(0,ae.openDb)(Qr,5,function(){var V=(0,F.Z)(function*(z){var re;if(z.oldVersion<2||!z.objectStoreNames.contains(Yc))return;const le=z.transaction.objectStore(Yc),Ge=yield le.index("fcmSenderId").get(C);if(yield le.clear(),Ge)if(2===z.oldVersion){const Ke=Ge;if(!Ke.auth||!Ke.p256dh||!Ke.endpoint)return;b={token:Ke.fcmToken,createTime:null!==(re=Ke.createTime)&&void 0!==re?re:Date.now(),subscriptionOptions:{auth:Ke.auth,p256dh:Ke.p256dh,endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:"string"==typeof Ke.vapidKey?Ke.vapidKey:xi(Ke.vapidKey)}}}else if(3===z.oldVersion){const Ke=Ge;b={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:xi(Ke.auth),p256dh:xi(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:xi(Ke.vapidKey)}}}else if(4===z.oldVersion){const Ke=Ge;b={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:xi(Ke.auth),p256dh:xi(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:xi(Ke.vapidKey)}}}});return function(z){return V.apply(this,arguments)}}())).close(),yield(0,ae.deleteDb)(Qr),yield(0,ae.deleteDb)("fcm_vapid_details_db"),yield(0,ae.deleteDb)("undefined"),kl(b)?b:null}),Qc.apply(this,arguments)}function kl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:b}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const js="firebase-messaging-store";let Xc=null;function on(){return Xc||(Xc=(0,ae.openDb)("firebase-messaging-database",1,C=>{0===C.oldVersion&&C.createObjectStore(js)})),Xc}function Yh(C){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,F.Z)(function*(C){const b=Xi(C),V=yield(yield on()).transaction(js).objectStore(js).get(b);if(V)return V;{const z=yield Su(C.appConfig.senderId);if(z)return yield Wn(C,z),z}})).apply(this,arguments)}function Wn(C,b){return kn.apply(this,arguments)}function kn(){return(kn=(0,F.Z)(function*(C,b){const N=Xi(C),z=(yield on()).transaction(js,"readwrite");return yield z.objectStore(js).put(b,N),yield z.complete,b})).apply(this,arguments)}function ms(C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,F.Z)(function*(C){const b=Xi(C),V=(yield on()).transaction(js,"readwrite");yield V.objectStore(js).delete(b),yield V.complete})).apply(this,arguments)}function Xi({appConfig:C}){return C.appId}const zn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function es(C,b){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,F.Z)(function*(C,b){const N=yield Va(C),V=ta(b),z={method:"POST",headers:N,body:JSON.stringify(V)};let re;try{re=yield(yield fetch(ar(C.appConfig),z)).json()}catch(le){throw zn.create("token-subscribe-failed",{errorInfo:le})}if(re.error)throw zn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw zn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Nr(C,b){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,F.Z)(function*(C,b){const N=yield Va(C),V=ta(b.subscriptionOptions),z={method:"PATCH",headers:N,body:JSON.stringify(V)};let re;try{re=yield(yield fetch(`${ar(C.appConfig)}/${b.token}`,z)).json()}catch(le){throw zn.create("token-update-failed",{errorInfo:le})}if(re.error)throw zn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw zn.create("token-update-no-token");return re.token})).apply(this,arguments)}function ea(C,b){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*(C,b){const V={method:"DELETE",headers:yield Va(C)};try{const re=yield(yield fetch(`${ar(C.appConfig)}/${b}`,V)).json();if(re.error)throw zn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(z){throw zn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function ar({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Va(C){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,F.Z)(function*({appConfig:C,installations:b}){const N=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ta({p256dh:C,auth:b,endpoint:N,vapidKey:V}){const z={web:{endpoint:N,auth:b,p256dh:C}};return V!==Au&&(z.web.applicationPubKey=V),z}const na=6048e5;function Ll(C){return xu.apply(this,arguments)}function xu(){return(xu=(0,F.Z)(function*(C){const b=yield Jr(C.swRegistration,C.vapidKey),N={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:b.endpoint,auth:xi(b.getKey("auth")),p256dh:xi(b.getKey("p256dh"))},V=yield Yh(C.firebaseDependencies);if(V){if(Ru(V.subscriptionOptions,N))return Date.now()>=V.createTime+na?Ul(C,{token:V.token,createTime:Date.now(),subscriptionOptions:N}):V.token;try{yield ea(C.firebaseDependencies,V.token)}catch(z){console.warn(z)}return wo(C.firebaseDependencies,N)}return wo(C.firebaseDependencies,N)})).apply(this,arguments)}function Re(C){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,F.Z)(function*(C){const b=yield Yh(C.firebaseDependencies);b&&(yield ea(C.firebaseDependencies,b.token),yield ms(C.firebaseDependencies));const N=yield C.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Ul(C,b){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(C,b){try{const N=yield Nr(C.firebaseDependencies,b),V=Object.assign(Object.assign({},b),{token:N,createTime:Date.now()});return yield Wn(C.firebaseDependencies,V),N}catch(N){throw yield Re(C),N}})).apply(this,arguments)}function wo(C,b){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,F.Z)(function*(C,b){const V={token:yield es(C,b),createTime:Date.now(),subscriptionOptions:b};return yield Wn(C,V),V.token})).apply(this,arguments)}function Jr(C,b){return ys.apply(this,arguments)}function ys(){return(ys=(0,F.Z)(function*(C,b){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ol(b)})})).apply(this,arguments)}function Ru(C,b){return b.vapidKey===C.vapidKey&&b.endpoint===C.endpoint&&b.auth===C.auth&&b.p256dh===C.p256dh}function Mu(C){const b={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Nu(C,b){if(!b.notification)return;C.notification={};const N=b.notification.title;N&&(C.notification.title=N);const V=b.notification.body;V&&(C.notification.body=V);const z=b.notification.image;z&&(C.notification.image=z)}(b,C),function ra(C,b){!b.data||(C.data=b.data)}(b,C),function ja(C,b){if(!b.fcmOptions)return;C.fcmOptions={};const N=b.fcmOptions.link;N&&(C.fcmOptions.link=N);const V=b.fcmOptions.analytics_label;V&&(C.fcmOptions.analyticsLabel=V)}(b,C),b}function Kn(C){return"object"==typeof C&&!!C&&vo in C}function Ri(C,b){const N=[];for(let V=0;V<C.length;V++)N.push(C.charAt(V)),V<b.length&&N.push(b.charAt(V));return N.join("")}function _s(C){return zn.create("missing-app-config-values",{valueName:C})}Ri("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ri("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mi{constructor(b,N,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Pu(C){if(!C||!C.options)throw _s("App Configuration Object");if(!C.name)throw _s("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:N}=C;for(const V of b)if(!N[V])throw _s(V);return{appName:C.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:N,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ed(C){return ia.apply(this,arguments)}function ia(){return(ia=(0,F.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(zc,{scope:_o}),C.swRegistration.update().catch(()=>{})}catch(b){throw zn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ou(C,b){return Za.apply(this,arguments)}function Za(){return(Za=(0,F.Z)(function*(C,b){if(!b&&!C.swRegistration&&(yield ed(C)),b||!C.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");C.swRegistration=b}})).apply(this,arguments)}function sa(C,b){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,F.Z)(function*(C,b){b?C.vapidKey=b:C.vapidKey||(C.vapidKey=Au)})).apply(this,arguments)}function $a(){return($a=(0,F.Z)(function*(C,b){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield sa(C,null==b?void 0:b.vapidKey),yield Ou(C,null==b?void 0:b.serviceWorkerRegistration),Ll(C)})).apply(this,arguments)}function Vl(C,b,N){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,F.Z)(function*(C,b,N){const V=oa(b);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:N[vo],message_name:N[Fa],message_time:N[Bs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oa(C){switch(C){case br.NOTIFICATION_CLICKED:return"notification_open";case br.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ga(){return(Ga=(0,F.Z)(function*(C,b){const N=b.data;if(!N.isFirebaseMessaging)return;C.onMessageHandler&&N.messageType===br.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Mu(N)):C.onMessageHandler.next(Mu(N)));const V=N.data;Kn(V)&&"1"===V[La]&&(yield Vl(C,N.messageType,V))})).apply(this,arguments)}const jl="@firebase/messaging",ku=C=>{const b=new Mi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function td(C,b){return Ga.apply(this,arguments)}(b,N)),b},nd=C=>{const b=C.getProvider("messaging").getImmediate();return{getToken:V=>function qa(C,b){return $a.apply(this,arguments)}(b,V)}};function ur(){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,F.Z)(function*(){try{yield(0,ie.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pg(){(0,se._registerComponent)(new he.wA("messaging",ku,"PUBLIC")),(0,se._registerComponent)(new he.wA("messaging-internal",nd,"PRIVATE")),(0,se.registerVersion)(jl,"0.9.9"),(0,se.registerVersion)(jl,"0.9.9","esm2017")}();const qs="analytics",Lu="firebase_id",sd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vs="https://www.googletagmanager.com/gtag/js",bn=new oe.Yd("@firebase/analytics");function ef(C){return Promise.all(C.map(b=>b.catch(N=>N)))}function gg(C,b){const N=document.createElement("script");N.src=`${vs}?l=${C}&id=${b}`,N.async=!0,document.head.appendChild(N)}function Vu(C,b,N,V,z,re){return od.apply(this,arguments)}function od(){return(od=(0,F.Z)(function*(C,b,N,V,z,re){const le=V[z];try{if(le)yield b[le];else{const Ke=(yield ef(N)).find(Pt=>Pt.measurementId===z);Ke&&(yield b[Ke.appId])}}catch(Ge){bn.error(Ge)}C("config",z,re)})).apply(this,arguments)}function Ya(C,b,N,V,z){return ad.apply(this,arguments)}function ad(){return(ad=(0,F.Z)(function*(C,b,N,V,z){try{let re=[];if(z&&z.send_to){let le=z.send_to;Array.isArray(le)||(le=[le]);const Ge=yield ef(N);for(const Ke of le){const Pt=Ge.find(Or=>Or.measurementId===Ke),en=Pt&&b[Pt.appId];if(!en){re=[];break}re.push(en)}}0===re.length&&(re=Object.values(b)),yield Promise.all(re),C("event",V,z||{})}catch(re){bn.error(re)}})).apply(this,arguments)}function ud(){const C=window.document.getElementsByTagName("script");for(const b of Object.values(C))if(b.src&&b.src.includes(vs))return b;return null}const Dn=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xr=new class Dr{constructor(b={},N=1e3){this.throttleMetadata=b,this.intervalMillis=N}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,N){this.throttleMetadata[b]=N}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Qa(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function ld(C){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,F.Z)(function*(C){var b;const{appId:N,apiKey:V}=C,z={method:"GET",headers:Qa(V)},re=sd.replace("{app-id}",N),le=yield fetch(re,z);if(200!==le.status&&304!==le.status){let Ge="";try{const Ke=yield le.json();(null===(b=Ke.error)||void 0===b?void 0:b.message)&&(Ge=Ke.error.message)}catch(Ke){}throw Dn.create("config-fetch-failed",{httpStatus:le.status,responseMessage:Ge})}return le.json()})).apply(this,arguments)}function cd(C){return ts.apply(this,arguments)}function ts(){return(ts=(0,F.Z)(function*(C,b=Xr,N){const{appId:V,apiKey:z,measurementId:re}=C.options;if(!V)throw Dn.create("no-app-id");if(!z){if(re)return{measurementId:re,appId:V};throw Dn.create("no-api-key")}const le=b.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new ql;return setTimeout((0,F.Z)(function*(){Ge.abort()}),void 0!==N?N:6e4),Xa({appId:V,apiKey:z,measurementId:re},le,Ge,b)})).apply(this,arguments)}function Xa(C,b,N){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,F.Z)(function*(C,{throttleEndTimeMillis:b,backoffCount:N},V,z=Xr){const{appId:re,measurementId:le}=C;try{yield wt(V,b)}catch(Ge){if(le)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${le} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:re,measurementId:le};throw Ge}try{const Ge=yield ld(C);return z.deleteThrottleMetadata(re),Ge}catch(Ge){if(!eu(Ge)){if(z.deleteThrottleMetadata(re),le)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${le} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:re,measurementId:le};throw Ge}const Ke=503===Number(Ge.customData.httpStatus)?(0,ie.$s)(N,z.intervalMillis,30):(0,ie.$s)(N,z.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Ke,backoffCount:N+1};return z.setThrottleMetadata(re,Pt),bn.debug(`Calling attemptFetch again in ${Ke} millis`),Xa(C,Pt,V,z)}})).apply(this,arguments)}function wt(C,b){return new Promise((N,V)=>{const z=Math.max(b-Date.now(),0),re=setTimeout(N,z);C.addEventListener(()=>{clearTimeout(re),V(Dn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function eu(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const b=Number(C.customData.httpStatus);return 429===b||500===b||503===b||504===b}class ql{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function tu(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,F.Z)(function*(){if(!(0,ie.hl)())return bn.warn(Dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return bn.warn(Dn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function aa(){return(aa=(0,F.Z)(function*(C,b,N,V,z,re,le){var Ge;const Ke=cd(C);Ke.then(wn=>{N[wn.measurementId]=wn.appId,C.options.measurementId&&wn.measurementId!==C.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>bn.error(wn)),b.push(Ke);const Pt=tu().then(wn=>{if(wn)return V.getId()}),[en,Or]=yield Promise.all([Ke,Pt]);ud()||gg(re,en.measurementId),z("js",new Date);const Vn=null!==(Ge=null==le?void 0:le.config)&&void 0!==Ge?Ge:{};return Vn.origin="firebase",Vn.update=!0,null!=Or&&(Vn[Lu]=Or),z("config",en.measurementId,Vn),en.measurementId})).apply(this,arguments)}class $l{constructor(b){this.app=b}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},Bu=[];const Gl={};let ju,Yn,ua="dataLayer",la=!1;function Eo(C,b,N){!function Ni(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const b=C.map((V,z)=>`(${z+1}) ${V}`).join(" "),N=Dn.create("invalid-analytics-context",{errorInfo:b});bn.warn(N.message)}}();const V=C.options.appId;if(!V)throw Dn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Dn.create("no-api-key");bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[V])throw Dn.create("already-exists",{id:V});if(!la){!function Ka(C){let b=[];Array.isArray(window[C])?b=window[C]:window[C]=b}(ua);const{wrappedGtag:re,gtagCore:le}=function Hl(C,b,N,V,z){let re=function(...le){window[V].push(arguments)};return window[z]&&"function"==typeof window[z]&&(re=window[z]),window[z]=function mg(C,b,N,V){function re(){return(re=(0,F.Z)(function*(le,Ge,Ke){try{"event"===le?yield Ya(C,b,N,Ge,Ke):"config"===le?yield Vu(C,b,N,V,Ge,Ke):C("set",Ge)}catch(Pt){bn.error(Pt)}})).apply(this,arguments)}return function z(le,Ge,Ke){return re.apply(this,arguments)}}(re,C,b,N),{gtagCore:re,wrappedGtag:window[z]}}(ns,Bu,Gl,ua,"gtag");Yn=re,ju=le,la=!0}return ns[V]=function Ln(C,b,N,V,z,re,le){return aa.apply(this,arguments)}(C,Bu,Gl,b,ju,ua,N),new $l(C)}function ca(){return(ca=(0,F.Z)(function*(C,b,N,V,z){if(z&&z.global)C("event",N,V);else{const re=yield b;C("event",N,Object.assign(Object.assign({},V),{send_to:re}))}})).apply(this,arguments)}function ws(){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,F.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}const Un="@firebase/analytics";!function un(){(0,se._registerComponent)(new he.wA(qs,(b,{options:N})=>Eo(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,se._registerComponent)(new he.wA("analytics-internal",function C(b){try{const N=b.getProvider(qs).getImmediate();return{logEvent:(V,z,re)=>function Ks(C,b,N,V){C=(0,ie.m9)(C),function jt(C,b,N,V,z){return ca.apply(this,arguments)}(Yn,ns[C.app.options.appId],b,N,V).catch(z=>bn.error(z))}(N,V,z,re)}}catch(N){throw Dn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,se.registerVersion)(Un,"0.7.5"),(0,se.registerVersion)(Un,"0.7.5","esm2017")}();var Hu=k(4408),nf=k(7565);const ui=new class rf extends nf.v{}(class Pr extends Hu.o{constructor(b,N){super(b,N),this.scheduler=b,this.work=N}schedule(b,N=0){return N>0?super.schedule(b,N):(this.delay=N,this.state=b,this.scheduler.flush(this),this)}execute(b,N){return N>0||this.closed?super.execute(b,N):this._execute(b,N)}requestAsyncId(b,N,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(b,N,V):b.flush(this)}});var gd=k(4986),ru=k(8505),da=k(9468),Wl=k(5363);const md=new l.GfV("7.2.1"),ha="__angularfire_symbol__analyticsIsSupportedValue",yd="__angularfire_symbol__analyticsIsSupported",_d="__angularfire_symbol__remoteConfigIsSupportedValue",qu="__angularfire_symbol__remoteConfigIsSupported",Qn="__angularfire_symbol__messagingIsSupportedValue",It="__angularfire_symbol__messagingIsSupported";function Ed(C,b,N){if(b){if(1===b.length)return b[0];const re=b.filter(le=>le.app===N);if(1===re.length)return re[0]}return N.container.getProvider(C).getImmediate({optional:!0})}globalThis[yd]||(globalThis[yd]=ws().then(C=>globalThis[ha]=C).catch(()=>globalThis[ha]=!1)),globalThis[It]||(globalThis[It]=ur().then(C=>globalThis[Qn]=C).catch(()=>globalThis[Qn]=!1)),globalThis[qu]||(globalThis[qu]=Wc().then(C=>globalThis[_d]=C).catch(()=>globalThis[_d]=!1));const sf=(C,b)=>{const N=b?[b]:(0,Q.C6)(),V=[];return N.forEach(z=>{z.container.getProvider(C).instances.forEach(le=>{V.includes(le)||V.push(le)})}),V};function fa(){}class ki{constructor(b,N=ui){this.zone=b,this.delegate=N}now(){return this.delegate.now()}schedule(b,N,V){const z=this.zone;return this.delegate.schedule(function(le){z.runGuarded(()=>{b.apply(this,[le])})},N,V)}}class iu{constructor(b){this.zone=b,this.task=null}call(b,N){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fa,{},fa,fa)),N.pipe((0,ru.b)({next:V,complete:V,error:V})).subscribe(b).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Gu=(()=>{class C{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ki(Zone.current)),this.insideAngular=N.run(()=>new ki(Zone.current,gd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(N){return new(N||C)(l.LFG(l.R0b))},C.\u0275prov=l.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ei(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ou(C){return ei(),function Wu(C){return function(N){return(N=N.lift(new iu(C.ngZone))).pipe((0,da.R)(C.outsideAngular),(0,Wl.Q)(C.insideAngular))}}(ei())(C)}},2090:(at,De,k)=>{"use strict";k.d(De,{BH:()=>je,LL:()=>de,ZR:()=>Fe,gQ:()=>Me,zI:()=>fe,hu:()=>Q,g5:()=>F,US:()=>he,tV:()=>ue,h$:()=>oe,$s:()=>lt,r3:()=>Wr,Sg:()=>Ae,ne:()=>gr,p$:()=>Z,vZ:()=>Xt,ZB:()=>H,gK:()=>Ir,pd:()=>fs,m9:()=>Ti,z$:()=>Oe,GJ:()=>rn,jU:()=>ne,ru:()=>pe,d:()=>ye,xb:()=>Sn,w1:()=>He,hl:()=>ft,uI:()=>Be,UG:()=>K,Yr:()=>tt,b$:()=>Se,G6:()=>Ye,Mn:()=>xe,w9:()=>pr,cI:()=>Er,UI:()=>Ei,xO:()=>co,zd:()=>zr,DV:()=>wi,ug:()=>Ft,dS:()=>Wo,Pz:()=>it,Dv:()=>Us,Wj:()=>gn,lb:()=>si,eu:()=>J});const Q=function(B,q){if(!B)throw F(q)},F=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},se=function(B){const q=[];let G=0;for(let Ee=0;Ee<B.length;Ee++){let ee=B.charCodeAt(Ee);ee<128?q[G++]=ee:ee<2048?(q[G++]=ee>>6|192,q[G++]=63&ee|128):55296==(64512&ee)&&Ee+1<B.length&&56320==(64512&B.charCodeAt(Ee+1))?(ee=65536+((1023&ee)<<10)+(1023&B.charCodeAt(++Ee)),q[G++]=ee>>18|240,q[G++]=ee>>12&63|128,q[G++]=ee>>6&63|128,q[G++]=63&ee|128):(q[G++]=ee>>12|224,q[G++]=ee>>6&63|128,q[G++]=63&ee|128)}return q},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,q){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ee=0;ee<B.length;ee+=3){const $e=B[ee],Te=ee+1<B.length,_e=Te?B[ee+1]:0,qe=ee+2<B.length,rt=qe?B[ee+2]:0;let sn=(15&_e)<<2|rt>>6,ir=63&rt;qe||(ir=64,Te||(sn=64)),Ee.push(G[$e>>2],G[(3&$e)<<4|_e>>4],G[sn],G[ir])}return Ee.join("")},encodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(B):this.encodeByteArray(se(B),q)},decodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(B):function(B){const q=[];let G=0,Ee=0;for(;G<B.length;){const ee=B[G++];if(ee<128)q[Ee++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const $e=B[G++];q[Ee++]=String.fromCharCode((31&ee)<<6|63&$e)}else if(ee>239&&ee<365){const qe=((7&ee)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;q[Ee++]=String.fromCharCode(55296+(qe>>10)),q[Ee++]=String.fromCharCode(56320+(1023&qe))}else{const $e=B[G++],Te=B[G++];q[Ee++]=String.fromCharCode((15&ee)<<12|(63&$e)<<6|63&Te)}}return q.join("")}(this.decodeStringToByteArray(B,q))},decodeStringToByteArray(B,q){this.init_();const G=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ee=0;ee<B.length;){const $e=G[B.charAt(ee++)],_e=ee<B.length?G[B.charAt(ee)]:0;++ee;const rt=ee<B.length?G[B.charAt(ee)]:64;++ee;const ht=ee<B.length?G[B.charAt(ee)]:64;if(++ee,null==$e||null==_e||null==rt||null==ht)throw Error();Ee.push($e<<2|_e>>4),64!==rt&&(Ee.push(_e<<4&240|rt>>2),64!==ht&&Ee.push(rt<<6&192|ht))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},oe=function(B){const q=se(B);return he.encodeByteArray(q,!0)},ae=function(B){return oe(B).replace(/\./g,"")},ue=function(B){try{return he.decodeString(B,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Z(B){return H(void 0,B)}function H(B,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return q}for(const G in q)!q.hasOwnProperty(G)||!X(G)||(B[G]=H(B[G],q[G]));return B}function X(B){return"__proto__"!==B}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,G)=>{this.resolve=q,this.reject=G})}wrapCallback(q){return(G,Ee)=>{G?this.reject(G):this.resolve(Ee),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(G):q(G,Ee))}}}function Ae(B,q){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=q||"demo-project",ee=B.iat||0,$e=B.sub||B.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Te=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ee,exp:ee+3600,auth_time:ee,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Te)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function ne(){return"object"==typeof self&&self.self===self}function pe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Oe().indexOf("Electron/")>=0}function He(){const B=Oe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function xe(){return Oe().indexOf("MSAppHost/")>=0}function tt(){return!1}function Ye(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ft(){return"object"==typeof indexedDB}function J(){return new Promise((B,q)=>{try{let G=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(Ee);ee.onsuccess=()=>{ee.result.close(),G||self.indexedDB.deleteDatabase(Ee),B(!0)},ee.onupgradeneeded=()=>{G=!1},ee.onerror=()=>{var $e;q((null===($e=ee.error)||void 0===$e?void 0:$e.message)||"")}}catch(G){q(G)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(q,G,Ee){super(G),this.code=q,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(q,G,Ee){this.service=q,this.serviceName=G,this.errors=Ee}create(q,...G){const Ee=G[0]||{},ee=`${this.service}/${q}`,$e=this.errors[q],Te=$e?function At(B,q){return B.replace(Zt,(G,Ee)=>{const ee=q[Ee];return null!=ee?String(ee):`<${Ee}?>`})}($e,Ee):"Error";return new Fe(ee,`${this.serviceName}: ${Te} (${ee}).`,Ee)}}const Zt=/\{\$([^}]+)}/g;function Er(B){return JSON.parse(B)}function it(B){return JSON.stringify(B)}const pt=function(B){let q={},G={},Ee={},ee="";try{const $e=B.split(".");q=Er(ue($e[0])||""),G=Er(ue($e[1])||""),ee=$e[2],Ee=G.d||{},delete G.d}catch($e){}return{header:q,claims:G,data:Ee,signature:ee}},pr=function(B){const G=pt(B).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},rn=function(B){const q=pt(B).claims;return"object"==typeof q&&!0===q.admin};function Wr(B,q){return Object.prototype.hasOwnProperty.call(B,q)}function wi(B,q){if(Object.prototype.hasOwnProperty.call(B,q))return B[q]}function Sn(B){for(const q in B)if(Object.prototype.hasOwnProperty.call(B,q))return!1;return!0}function Ei(B,q,G){const Ee={};for(const ee in B)Object.prototype.hasOwnProperty.call(B,ee)&&(Ee[ee]=q.call(G,B[ee],ee,B));return Ee}function Xt(B,q){if(B===q)return!0;const G=Object.keys(B),Ee=Object.keys(q);for(const ee of G){if(!Ee.includes(ee))return!1;const $e=B[ee],Te=q[ee];if(qt($e)&&qt(Te)){if(!Xt($e,Te))return!1}else if($e!==Te)return!1}for(const ee of Ee)if(!G.includes(ee))return!1;return!0}function qt(B){return null!==B&&"object"==typeof B}function co(B){const q=[];for(const[G,Ee]of Object.entries(B))Array.isArray(Ee)?Ee.forEach(ee=>{q.push(encodeURIComponent(G)+"="+encodeURIComponent(ee))}):q.push(encodeURIComponent(G)+"="+encodeURIComponent(Ee));return q.length?"&"+q.join("&"):""}function zr(B){const q={};return B.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ee,$e]=Ee.split("=");q[decodeURIComponent(ee)]=decodeURIComponent($e)}}),q}function fs(B){const q=B.indexOf("?");if(!q)return"";const G=B.indexOf("#",q);return B.substring(q,G>0?G:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,G){G||(G=0);const Ee=this.W_;if("string"==typeof q)for(let ht=0;ht<16;ht++)Ee[ht]=q.charCodeAt(G)<<24|q.charCodeAt(G+1)<<16|q.charCodeAt(G+2)<<8|q.charCodeAt(G+3),G+=4;else for(let ht=0;ht<16;ht++)Ee[ht]=q[G]<<24|q[G+1]<<16|q[G+2]<<8|q[G+3],G+=4;for(let ht=16;ht<80;ht++){const sn=Ee[ht-3]^Ee[ht-8]^Ee[ht-14]^Ee[ht-16];Ee[ht]=4294967295&(sn<<1|sn>>>31)}let rt,Tt,ee=this.chain_[0],$e=this.chain_[1],Te=this.chain_[2],_e=this.chain_[3],qe=this.chain_[4];for(let ht=0;ht<80;ht++){ht<40?ht<20?(rt=_e^$e&(Te^_e),Tt=1518500249):(rt=$e^Te^_e,Tt=1859775393):ht<60?(rt=$e&Te|_e&($e|Te),Tt=2400959708):(rt=$e^Te^_e,Tt=3395469782);const sn=(ee<<5|ee>>>27)+rt+qe+Tt+Ee[ht]&4294967295;qe=_e,_e=Te,Te=4294967295&($e<<30|$e>>>2),$e=ee,ee=sn}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+Te&4294967295,this.chain_[3]=this.chain_[3]+_e&4294967295,this.chain_[4]=this.chain_[4]+qe&4294967295}update(q,G){if(null==q)return;void 0===G&&(G=q.length);const Ee=G-this.blockSize;let ee=0;const $e=this.buf_;let Te=this.inbuf_;for(;ee<G;){if(0===Te)for(;ee<=Ee;)this.compress_(q,ee),ee+=this.blockSize;if("string"==typeof q){for(;ee<G;)if($e[Te]=q.charCodeAt(ee),++Te,++ee,Te===this.blockSize){this.compress_($e),Te=0;break}}else for(;ee<G;)if($e[Te]=q[ee],++Te,++ee,Te===this.blockSize){this.compress_($e),Te=0;break}}this.inbuf_=Te,this.total_+=G}digest(){const q=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&G,G/=256;this.compress_(this.buf_);let Ee=0;for(let ee=0;ee<5;ee++)for(let $e=24;$e>=0;$e-=8)q[Ee]=this.chain_[ee]>>$e&255,++Ee;return q}}function gr(B,q){const G=new st(B,q);return G.subscribe.bind(G)}class st{constructor(q,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{q(this)}).catch(Ee=>{this.error(Ee)})}next(q){this.forEachObserver(G=>{G.next(q)})}error(q){this.forEachObserver(G=>{G.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,G,Ee){let ee;if(void 0===q&&void 0===G&&void 0===Ee)throw new Error("Missing Observer.");ee=function Bt(B,q){if("object"!=typeof B||null===B)return!1;for(const G of q)if(G in B&&"function"==typeof B[G])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:G,complete:Ee},void 0===ee.next&&(ee.next=Hn),void 0===ee.error&&(ee.error=Hn),void 0===ee.complete&&(ee.complete=Hn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch(Te){}}),this.observers.push(ee),$e}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,q)}sendOne(q,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{G(this.observers[q])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hn(){}const Us=function(B,q,G,Ee){let ee;if(Ee<q?ee="at least "+q:Ee>G&&(ee=0===G?"none":"no more than "+G),ee)throw new Error(B+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+ee+".")};function Ir(B,q){return`${B} failed: ${q} argument `}function gn(B,q,G,Ee){if((!Ee||G)&&"function"!=typeof G)throw new Error(Ir(B,q)+"must be a valid function.")}function si(B,q,G,Ee){if((!Ee||G)&&("object"!=typeof G||null===G))throw new Error(Ir(B,q)+"must be a valid context object.")}const Wo=function(B){const q=[];let G=0;for(let Ee=0;Ee<B.length;Ee++){let ee=B.charCodeAt(Ee);if(ee>=55296&&ee<=56319){const $e=ee-55296;Ee++,Q(Ee<B.length,"Surrogate pair missing trail surrogate."),ee=65536+($e<<10)+(B.charCodeAt(Ee)-56320)}ee<128?q[G++]=ee:ee<2048?(q[G++]=ee>>6|192,q[G++]=63&ee|128):ee<65536?(q[G++]=ee>>12|224,q[G++]=ee>>6&63|128,q[G++]=63&ee|128):(q[G++]=ee>>18|240,q[G++]=ee>>12&63|128,q[G++]=ee>>6&63|128,q[G++]=63&ee|128)}return q},Ft=function(B){let q=0;for(let G=0;G<B.length;G++){const Ee=B.charCodeAt(G);Ee<128?q++:Ee<2048?q+=2:Ee>=55296&&Ee<=56319?(q+=4,G++):q+=3}return q};function lt(B,q=1e3,G=2){const Ee=q*Math.pow(G,B),ee=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+ee)}function Ti(B){return B&&B._delegate?B._delegate:B}},5338:(at,De,k)=>{"use strict";var l=k(5e3);let Q=null;function F(){return Q}const oe=new l.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ue(){return(0,l.LFG)(H)}()},providedIn:"platform"}),n})();const Z=new l.OlP("Location Initialized");let H=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function je(){return new H((0,l.LFG)(oe))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ne(n){const e=(0,l.LFG)(oe).location;return new Se((0,l.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const pe=new l.OlP("appBaseHref");let Se=(()=>{class n extends K{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const d=this.prepareExternalUrl(i+Be(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){const d=this.prepareExternalUrl(i+Be(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae),l.LFG(pe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n extends K{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let d=this.prepareExternalUrl(i+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,u){let d=this.prepareExternalUrl(i+Be(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ae),l.LFG(pe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(Ye(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Ae,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(l.LFG(K),l.LFG(ae))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function xe(){return new He((0,l.LFG)(K),(0,l.LFG)(ae))}()},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Zero=0]="Zero",fe[fe.One=1]="One",fe[fe.Two=2]="Two",fe[fe.Few=3]="Few",fe[fe.Many=4]="Many",fe[fe.Other=5]="Other",fe))();const fs=l.kL8;class Ht{}let Rn=(()=>{class n extends Ht{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(fs(r||this.locale)(t)){case fe.Zero:return"zero";case fe.One:return"one";case fe.Two:return"two";case fe.Few:return"few";case fe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function mo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class Yi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Yi(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,d),Ko(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ko(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ko(n,e){n.context.$implicit=e.item}let La=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Ht,useClass:Rn}]}),n})();function Ua(n){return"server"===n}let kl=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Jc((0,l.LFG)(oe),window)}),n})();class Jc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function js(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Kt(this.window.history)||Kt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Kt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class on{}class Jo extends class Yh extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){Q||(Q=n)}(new Jo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kn(){return Wn=Wn||document.querySelector("base"),Wn?Wn.getAttribute("href"):null}();return null==t?null:function Xo(n){ms=ms||document.createElement("a"),ms.setAttribute("href",n);const e=ms.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mo(document.cookie,e)}}let ms,Wn=null;const Xi=new l.OlP("TRANSITION_ID"),zn=[{provide:l.ip1,useFactory:function Mr(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Xi,oe,l.zs3],multi:!0}];class es{static init(){(0,l.VLi)(new es)}addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let u=i.length,d=!1;const p=function(_){d=d||_,u--,0==u&&r(d)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Fl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Nr=new l.OlP("EventManagerPlugins");let Zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const d=i[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Nr),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ea{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),ar=(()=>{class n extends gt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Va),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Va))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Va(n){F().remove(n)}const Ba={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ta=/%COMP%/g;function dn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?dn(n,i,t):(i=i.replace(ta,n),t.push(i))}return t}function wo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jr=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ys(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Nu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new ra(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=dn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zs),l.LFG(ar),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ys{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ba[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ba[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ba[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,wo(r)):this.eventManager.addEventListener(e,t,wo(r))}}class Nu extends ys{constructor(e,t,r,i){super(e),this.component=r;const u=dn(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Nt(n){return"_ngcontent-%COMP%".replace(ta,n)}(i+"-"+r.id),this.hostAttr=function Ul(n){return"_nghost-%COMP%".replace(ta,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ra extends ys{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=dn(i.id,i.styles,[]);for(let d=0;d<u.length;d++){const p=document.createElement("style");p.textContent=u[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ja=(()=>{class n extends ea{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Kn=["alt","control","meta","shift"],Pu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_s={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ed=(()=>{class n extends ea{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let d="";if(Kn.forEach(_=>{const I=r.indexOf(_);I>-1&&(r.splice(I,1),d+=_+".")}),d+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=d,p}static getEventFullKey(t){let r="",i=function ia(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_s.hasOwnProperty(e)&&(e=_s[e]))}return Pu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Kn.forEach(u=>{u!=i&&Mi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qa=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Ou(){Jo.makeCurrent(),es.init()},multi:!0},{provide:oe,useFactory:function sa(){return(0,l.RDi)(document),document},deps:[]}]),$a=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Za(){return new l.qLn},deps:[]},{provide:Nr,useClass:ja,multi:!0,deps:[oe,l.R0b,l.Lbi]},{provide:Nr,useClass:ed,multi:!0,deps:[oe]},{provide:Jr,useClass:Jr,deps:[Zs,ar,l.AFp]},{provide:l.FYo,useExisting:Jr},{provide:gt,useExisting:ar},{provide:ar,useClass:ar,deps:[oe]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Zs,useClass:Zs,deps:[Nr,l.R0b]},{provide:on,useClass:Fl,deps:[]}];let Vl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Xi,useExisting:l.AFp},zn]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:$a,imports:[La,l.hGG]}),n})();"undefined"!=typeof window&&window;let ud=(()=>{class n{constructor(){this.title="ao3-page"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:21,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["type","button","data-toggle","collapse","data-target","#navbarTogglerDemo03","aria-controls","navbarTogglerDemo03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo03",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-light"]],template:function(t,r){1&t&&(l.TgZ(0,"nav",0),l.TgZ(1,"button",1),l._UZ(2,"span",2),l.qZA(),l.TgZ(3,"div",3),l.TgZ(4,"ul",4),l.TgZ(5,"li",5),l.TgZ(6,"a",6),l._uU(7,"Properties"),l.qZA(),l.qZA(),l.TgZ(8,"li",5),l.TgZ(9,"a",6),l._uU(10,"FAQs"),l.qZA(),l.qZA(),l.TgZ(11,"li",5),l.TgZ(12,"a",6),l._uU(13,"Reviews"),l.qZA(),l.qZA(),l.TgZ(14,"li",5),l.TgZ(15,"a",6),l._uU(16,"Messages"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"form",7),l._UZ(18,"input",8),l.TgZ(19,"button",9),l._uU(20,"Search"),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[""]}),n})();var _n=k(8996),Dn=k(7669);function _t(...n){const e=(0,Dn.yG)(n);return(0,_n.D)(n,e)}var $s=k(7579);class Dr extends $s.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Xr=k(8306);const{isArray:Qa}=Array,{getPrototypeOf:ld,prototype:Ja,keys:cd}=Object;var Gs=k(4671),wt=k(4004);const{isArray:eu}=Array;var Ln=k(5403),aa=k(9672);function $l(...n){const e=(0,Dn.yG)(n),t=(0,Dn.jO)(n),{args:r,keys:i}=function ts(n){if(1===n.length){const e=n[0];if(Qa(e))return{args:e,keys:null};if(function Xa(n){return n&&"object"==typeof n&&ld(n)===Ja}(e)){const t=cd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,_n.D)([],e);const u=new Xr.y(function ns(n,e,t=Gs.y){return r=>{Bu(e,()=>{const{length:i}=n,u=new Array(i);let d=i,p=i;for(let _=0;_<i;_++)Bu(e,()=>{const I=(0,_n.D)(n[_],e);let A=!1;I.subscribe(new Ln.Q(r,x=>{u[_]=x,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>function Ws(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,d):Gs.y));return t?u.pipe(function tu(n){return(0,wt.U)(e=>function ql(n,e){return eu(e)?n(...e):n(e)}(n,e))}(t)):u}function Bu(n,e,t){n?(0,aa.f)(t,n,e):e()}const ua=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zs=k(8189);function Yn(...n){return function ju(){return(0,zs.J)(1)}()((0,_n.D)(n,(0,Dn.yG)(n)))}var la=k(8421);function dd(n){return new Xr.y(e=>{(0,la.Xf)(n()).subscribe(e)})}var Ni=k(515),Eo=k(727),jt=k(4482);function ca(){return(0,jt.e)((n,e)=>{let t=null;n._refCount++;const r=new Ln.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class nu extends Xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Eo.w0;const t=this.getSubject();e.add(this.source.subscribe(new Ln.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Eo.w0.EMPTY)}return e}refCount(){return ca()(this)}}function vn(n,e){return(0,jt.e)((t,r)=>{let i=null,u=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe(new Ln.Q(r,_=>{null==i||i.unsubscribe();let I=0;const A=u++;(0,la.Xf)(n(_,A)).subscribe(i=new Ln.Q(r,x=>r.next(e?e(_,x,A,I++):x),()=>{i=null,p()}))},()=>{d=!0,p()}))})}var rs=k(5698);function Pi(...n){const e=(0,Dn.yG)(n);return(0,jt.e)((t,r)=>{(e?Yn(n,t,e):Yn(n,t)).subscribe(r)})}function hd(n,e,t,r,i){return(u,d)=>{let p=t,_=e,I=0;u.subscribe(new Ln.Q(d,A=>{const x=I++;_=p?n(_,A,x):(p=!0,A),r&&d.next(_)},i&&(()=>{p&&d.next(_),d.complete()})))}}function oi(n,e){return(0,jt.e)(hd(n,e,arguments.length>=2,!0))}function Ar(n,e){return(0,jt.e)((t,r)=>{let i=0;t.subscribe(new Ln.Q(r,u=>n.call(e,u,i++)&&r.next(u)))})}function ai(n){return(0,jt.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe(new Ln.Q(t,void 0,void 0,d=>{u=(0,la.Xf)(n(d,ai(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var yr=k(5577),an=k(576);function ws(n,e){return(0,an.m)(e)?(0,yr.z)(n,e,1):(0,yr.z)(n,1)}function Zu(n){return n<=0?()=>Ni.E:(0,jt.e)((e,t)=>{let r=[];e.subscribe(new Ln.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fd(n=yg){return(0,jt.e)((e,t)=>{let r=!1;e.subscribe(new Ln.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yg(){return new ua}function pd(n){return(0,jt.e)((e,t)=>{let r=!1;e.subscribe(new Ln.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ks(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,u)=>n(i,u,r)):Gs.y,(0,rs.q)(1),t?pd(e):fd(()=>new ua))}var Un=k(8505);class un{constructor(e,t){this.id=e,this.url=t}}class Hu extends un{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pr extends un{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nf extends un{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rf extends un{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ui extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oi extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gd extends un{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ru extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class da extends un{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class md{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ha{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yd{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _d{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class Ys{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $u(n){return new Ys(n)}const vd="ngNavigationCancelingError";function wd(n){const e=Error("NavigationCancelingError: "+n);return e[vd]=!0,e}function sf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const d=r[u],p=n[u];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ki(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!iu(n[i],e[i]))return!1;return!0}function iu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Gu(n){return Array.prototype.concat.apply([],n)}function ei(n){return n.length>0?n[n.length-1]:null}function Yt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Fi(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,_n.D)(Promise.resolve(n)):_t(n)}const ou={exact:function C(n,e,t){if(!Pt(n.segments,e.segments)||!z(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:N},Wu={exact:function zl(n,e){return ki(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iu(n[t],e[t]))},ignored:()=>!0};function Id(n,e,t){return ou[t.paths](n.root,e.root,t.matrixParams)&&Wu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function N(n,e,t){return V(n,e,e.segments,t)}function V(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Pt(i,t)||e.hasChildren()||!z(i,t,r))}if(n.segments.length===t.length){if(!Pt(n.segments,t)||!z(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!N(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Pt(n.segments,i)&&z(n.segments,i,r)&&n.children[It])&&V(n.children[It],e,u,r)}}function z(n,e,t){return e.every((r,i)=>Wu[t](n[i].parameters,r.parameters))}class re{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$u(this.queryParams)),this._queryParamMap}toString(){return wn.serialize(this)}}class le{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yt(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return is(this)}}class Ge{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$u(this.parameters)),this._parameterMap}toString(){return Cd(this)}}function Pt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Or{}class Vn{parse(e){const t=new uf(e);return new re(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kr(e.root,!0)}`,r=function Ku(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Fr(t)}=${Fr(i)}`).join("&"):`${Fr(t)}=${Fr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wn=new Vn;function is(n){return n.segments.map(e=>Cd(e)).join("/")}function kr(n,e){if(!n.hasChildren())return is(n);if(e){const t=n.children[It]?kr(n.children[It],!1):"",r=[];return Yt(n.children,(i,u)=>{u!==It&&r.push(`${u}:${kr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function en(n,e){let t=[];return Yt(n.children,(r,i)=>{i===It&&(t=t.concat(e(r,i)))}),Yt(n.children,(r,i)=>{i!==It&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===It?[kr(n.children[It],!1)]:[`${i}:${kr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${is(n)}/${t[0]}`:`${is(n)}/(${t.join("//")})`}}function pa(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fr(n){return pa(n).replace(/%3B/gi,";")}function Io(n){return pa(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function au(n){return decodeURIComponent(n)}function Td(n){return au(n.replace(/\+/g,"%20"))}function Cd(n){return`${Io(n.path)}${function zu(n){return Object.keys(n).map(e=>`;${Io(e)}=${Io(n[e])}`).join("")}(n.parameters)}`}const _g=/^[^\/()?;=#]+/;function of(n){const e=n.match(_g);return e?e[0]:""}const vg=/^[^=?&#]+/,Ow=/^[^&#]+/;class uf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[It]=new le(e,t)),r}parseSegment(){const e=of(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ge(au(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=of(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=of(this.remaining);i&&(r=i,this.capture(r))}e[au(t)]=au(r)}parseQueryParam(e){const t=function af(n){const e=n.match(vg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Zy(n){const e=n.match(Ow);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Td(t),u=Td(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=of(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=It);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[It]:new le([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class wg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yu(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Yu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uu(e,this._root).map(t=>t.value)}}function Yu(n,e){if(n===e.value)return e;for(const t of e.children){const r=Yu(n,t);if(r)return r}return null}function uu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=uu(n,t);if(r.length)return r.unshift(e),r}return[]}class li{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ga(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Kl extends wg{constructor(e,t){super(e),this.snapshot=t,hf(this,e)}toString(){return this.snapshot.toString()}}function lf(n,e){const t=function Yl(n,e){const d=new Qu([],{},{},"",{},It,e,null,n.root,-1,{});return new bd("",new li(d,[]))}(n,e),r=new Dr([new Ge("",{})]),i=new Dr({}),u=new Dr({}),d=new Dr({}),p=new Dr(""),_=new Js(r,i,d,p,u,It,e,t.root);return _.snapshot=t.root,new Kl(new li(_,[]),t)}class Js{constructor(e,t,r,i,u,d,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>$u(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>$u(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function df(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qu{constructor(e,t,r,i,u,d,p,_,I,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=d,this.component=p,this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$u(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$u(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bd extends wg{constructor(e,t){super(t),this.url=e,hf(this,t)}toString(){return ff(this._root)}}function hf(n,e){e.value._routerState=n,e.children.forEach(t=>hf(n,t))}function ff(n){const e=n.children.length>0?` { ${n.children.map(ff).join(", ")} } `:"";return`${n.value}${e}`}function Ql(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ki(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ki(e.params,t.params)||n.params.next(t.params),function fa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ki(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ki(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pf(n,e){const t=ki(n.params,e.params)&&function Ke(n,e){return Pt(n,e)&&n.every((t,r)=>ki(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pf(n.parent,e.parent))}function ss(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function lu(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ss(n,r,i);return ss(n,r)})}(n,e,t);return new li(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(p=>ss(n,p)),d}}const r=function qy(n){return new Js(new Dr(n.url),new Dr(n.params),new Dr(n.queryParams),new Dr(n.fragment),new Dr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>ss(n,u));return new li(r,i)}}function Dd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ad(n){return"object"==typeof n&&null!=n&&n.outlets}function Jl(n,e,t,r,i){let u={};return r&&Yt(r,(d,p)=>{u[p]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),new re(t.root===n?e:$y(t.root,n,e),u,i)}function $y(n,e,t){const r={};return Yt(n.children,(i,u)=>{r[u]=i===e?t:$y(i,e,t)}),new le(n.segments,r)}class gf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ad);if(i&&i!==ei(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Eg(n,e,t){if(n||(n=new le([],{})),0===n.segments.length&&n.hasChildren())return To(n,e,t);const r=function Ig(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const d=n.segments[i],p=t[r];if(Ad(p))break;const _=`${p}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!_f(_,I,d))return u;r+=2}else{if(!_f(_,{},d))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new le(n.segments.slice(0,r.pathIndex),{});return u.children[It]=new le(n.segments.slice(r.pathIndex),n.children),To(u,0,i)}return r.match&&0===i.length?new le(n.segments,{}):r.match&&!n.hasChildren()?os(n,e,t):r.match?To(n,0,i):os(n,e,t)}function To(n,e,t){if(0===t.length)return new le(n.segments,{});{const r=function Fw(n){return Ad(n[0])?n[0].outlets:{[It]:n}}(t),i={};return Yt(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[d]=Eg(n.children[d],e,u))}),Yt(n.children,(u,d)=>{void 0===r[d]&&(i[d]=u)}),new le(n.segments,i)}}function os(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Ad(u)){const _=Xl(u.outlets);return new le(r,_)}if(0===i&&Dd(t[0])){r.push(new Ge(n.segments[e].path,yf(t[0]))),i++;continue}const d=Ad(u)?u.outlets[It]:`${u}`,p=i<t.length-1?t[i+1]:null;d&&p&&Dd(p)?(r.push(new Ge(d,yf(p))),i+=2):(r.push(new Ge(d,{})),i++)}return new le(r,{})}function Xl(n){const e={};return Yt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=os(new le([],{}),0,t))}),e}function yf(n){const e={};return Yt(n,(t,r)=>e[r]=`${t}`),e}function _f(n,e,t){return n==t.path&&ki(e,t.parameters)}class Lw{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ql(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ga(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,i[d],r),delete i[d]}),Yt(i,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ga(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ga(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ga(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new qu(u.value.snapshot))}),e.children.length&&this.forwardEvent(new yd(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Ql(i),i===u)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),Ql(p.route.value),this.activateChildRoutes(e,null,d.children)}else{const p=function Uw(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Tg{constructor(e,t){this.routes=e,this.module=t}}function Xs(n){return"function"==typeof n}function Co(n){return n instanceof re}const cu=Symbol("INITIAL_VALUE");function tc(){return vn(n=>$l(n.map(e=>e.pipe((0,rs.q)(1),Pi(cu)))).pipe(oi((e,t)=>{let r=!1;return t.reduce((i,u,d)=>i!==cu?i:(u===cu&&(r=!0),r||!1!==u&&d!==t.length-1&&!Co(u)?i:u),e)},cu),Ar(e=>e!==cu),(0,wt.U)(e=>Co(e)?e:!0===e),(0,rs.q)(1)))}class bg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new du,this.attachRef=null}}class du{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new bg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let nc=(()=>{class n{constructor(t,r,i,u,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=u||It,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Yy(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(du),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Yy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Js?this.route:e===du?this.childContexts:this.parent.get(e,t)}}let Sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},directives:[nc],encapsulation:2}),n})();function Qy(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];mn(r,Jy(e,r))}}function mn(n,e){n.children&&Qy(n.children,e)}function Jy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ef(n){const e=n.children&&n.children.map(Ef),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==It&&(t.component=Sd),t}function Lr(n){return n.outlet||It}function If(n,e){const t=n.filter(r=>Lr(r)===e);return t.push(...n.filter(r=>Lr(r)!==e)),t}const xd={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xd):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||sf)(t,n,e);if(!u)return Object.assign({},xd);const d={};Yt(u.posParams,(_,I)=>{d[I]=_.path});const p=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Md(n,e,t,r,i="corrected"){if(t.length>0&&function Bw(n,e,t){return t.some(r=>ma(n,e,r)&&Lr(r)!==It)}(n,t,r)){const d=new le(e,function Xy(n,e,t,r){const i={};i[It]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Lr(u)!==It){const d=new le([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[Lr(u)]=d}return i}(n,e,r,new le(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Dg(n,e,t){return t.some(r=>ma(n,e,r))}(n,t,r)){const d=new le(n.segments,function Tf(n,e,t,r,i,u){const d={};for(const p of r)if(ma(n,t,p)&&!i[Lr(p)]){const _=new le([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Lr(p)]=_}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new le(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ma(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ur(n,e,t,r){return!!(Lr(n)===r||r!==It&&ma(e,t,n))&&("**"===n.path||Rd(e,n,t).matched)}function Nd(n,e,t){return 0===e.length&&!n.children[t]}class Ju{constructor(e){this.segmentGroup=e||null}}class Cf{constructor(e){this.urlTree=e}}function Jn(n){return new Xr.y(e=>e.error(new Ju(n)))}function ya(n){return new Xr.y(e=>e.error(new Cf(n)))}function bf(n){return new Xr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Pd{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=Md(this.urlTree.root,[],[],this.config).segmentGroup,t=new le(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,It).pipe((0,wt.U)(u=>this.createUrlTree(Od(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ai(u=>{if(u instanceof Cf)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ju?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,It).pipe((0,wt.U)(i=>this.createUrlTree(Od(i),e.queryParams,e.fragment))).pipe(ai(i=>{throw i instanceof Ju?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new le([],{[It]:e}):e;return new re(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new le([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,_n.D)(i).pipe(ws(u=>{const d=r.children[u],p=If(t,u);return this.expandSegmentGroup(e,p,d,u).pipe((0,wt.U)(_=>({segment:_,outlet:u})))}),oi((u,d)=>(u[d.outlet]=d.segment,u),{}),function By(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,u)=>n(i,u,r)):Gs.y,Zu(1),t?pd(e):fd(()=>new ua))}())}expandSegment(e,t,r,i,u,d){return(0,_n.D)(r).pipe(ws(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,d).pipe(ai(I=>{if(I instanceof Ju)return _t(null);throw I}))),Ks(p=>!!p),ai((p,_)=>{if(p instanceof ua||"EmptyError"===p.name){if(Nd(t,i,u))return _t(new le([],{}));throw new Ju(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,d,p){return Ur(i,t,u,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d):Jn(t):Jn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ya(u):this.lineralizeSegments(r,u).pipe((0,yr.z)(d=>{const p=new le(d,{});return this.expandSegment(e,p,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,d){const{matched:p,consumedSegments:_,lastChild:I,positionalParamSegments:A}=Rd(t,i,u);if(!p)return Jn(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?ya(x):this.lineralizeSegments(i,x).pipe((0,yr.z)(P=>this.expandSegment(e,t,r,P.concat(u.slice(I)),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?_t(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(P=>(r._loadedConfig=P,new le(i,{})))):_t(new le(i,{}));const{matched:d,consumedSegments:p,lastChild:_}=Rd(t,r,i);if(!d)return Jn(t);const I=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,yr.z)(x=>{const P=x.module,U=x.routes,{segmentGroup:W,slicedSegments:Ie}=Md(t,p,I,U),Ue=new le(W.segments,W.children);if(0===Ie.length&&Ue.hasChildren())return this.expandChildren(P,U,Ue).pipe((0,wt.U)(Ot=>new le(p,Ot)));if(0===U.length&&0===Ie.length)return _t(new le(p,{}));const ot=Lr(r)===u;return this.expandSegment(P,Ue,U,Ie,ot?It:u,!0).pipe((0,wt.U)(Jt=>new le(p.concat(Jt.segments),Jt.children)))}))}getChildConfig(e,t,r){return t.children?_t(new Tg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?_t(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,wt.U)(u=>(t._loadedConfig=u,u))):function e_(n){return new Xr.y(e=>e.error(wd(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):_t(new Tg([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?_t(i.map(d=>{const p=e.get(d);let _;if(function Cg(n){return n&&Xs(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!Xs(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Fi(_)})).pipe(tc(),(0,Un.b)(d=>{if(!Co(d))return;const p=wd(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,wt.U)(d=>!0===d)):_t(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return _t(r);if(i.numberOfChildren>1||!i.children[It])return bf(e.redirectTo);i=i.children[It]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new re(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yt(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let d={};return Yt(t.children,(p,_)=>{d[_]=this.createSegmentGroup(e,p,r,i)}),new le(u,d)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Od(n){const e={};for(const r of Object.keys(n.children)){const u=Od(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function t_(n){if(1===n.numberOfChildren&&n.children[It]){const e=n.children[It];return new le(n.segments.concat(e.segments),e.children)}return n}(new le(n.segments,e))}class Af{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Fd{constructor(e,t){this.component=e,this.route=t}}function n_(n,e,t){const r=n._root;return hu(r,e?e._root:null,t,[r.value])}function Ud(n,e,t){const r=function r_(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function hu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=ga(e);return n.children.forEach(d=>{(function i_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function Vd(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Pt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pt(n.url,e.url)||!ki(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pf(n,e)||!ki(n.queryParams,e.queryParams);default:return!pf(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Af(r)):(u.data=d.data,u._resolvedData=d._resolvedData),hu(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Fd(p.outlet.component,d))}else d&&bo(e,p,i),i.canActivateChecks.push(new Af(r)),hu(n,null,u.component?p?p.children:null:t,r,i)})(d,u[d.value.outlet],t,r.concat([d.value]),i),delete u[d.value.outlet]}),Yt(u,(d,p)=>bo(d,t.getContext(p),i)),i}function bo(n,e,t){const r=ga(n),i=n.value;Yt(r,(u,d)=>{bo(u,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Fd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Sg{}function xg(n){return new Xr.y(e=>e.error(n))}class l_{constructor(e,t,r,i,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Md(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,It);if(null===t)return null;const r=new Qu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new li(r,t),u=new bd(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=cf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],p=If(e,u),_=this.processSegmentGroup(p,d,u);if(null===_)return null;r.push(..._)}const i=Es(r);return function Li(n){n.sort((e,t)=>e.value.outlet===It?-1:t.value.outlet===It?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,i);if(null!==d)return d}return Nd(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ur(e,t,r,i))return null;let u,d=[],p=[];if("**"===e.path){const U=r.length>0?ei(r).parameters:{};u=new Qu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rg(e),Lr(e),e.component,e,Mf(t),Nf(t)+r.length,Is(e))}else{const U=Rd(t,e,r);if(!U.matched)return null;d=U.consumedSegments,p=r.slice(U.lastChild),u=new Qu(d,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rg(e),Lr(e),e.component,e,Mf(t),Nf(t)+d.length,Is(e))}const _=function rc(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:A}=Md(t,d,p,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===A.length&&I.hasChildren()){const U=this.processChildren(_,I);return null===U?null:[new li(u,U)]}if(0===_.length&&0===A.length)return[new li(u,[])];const x=Lr(e)===i,P=this.processSegment(_,I,A,x?It:i);return null===P?null:[new li(u,P)]}}function fu(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Es(n){const e=[],t=new Set;for(const r of n){if(!fu(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Es(r.children);e.push(new li(r.value,i))}return e.filter(r=>!t.has(r))}function Mf(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nf(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Rg(n){return n.data||{}}function Is(n){return n.resolve||{}}function sc(n){return vn(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,wt.U)(()=>e)):_t(e)})}class ac extends class oc{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Zd=new l.OlP("ROUTES");class Do{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Tg(Gu(d.injector.get(Zd,void 0,l.XFs.Self|l.XFs.Optional)).map(Ef),d)}),ai(u=>{throw t._loader$=void 0,u}));return t._loader$=new nu(i,()=>new $s.x).pipe(ca()),t._loader$}loadModuleFactory(e){return Fi(e()).pipe((0,yr.z)(t=>t instanceof l.YKP?_t(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class Hd{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Pf(n){throw n}function h_(n,e,t){return e.parse("/")}function Xu(n,e){return _t(null)}const f_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class n{constructor(t,r,i,u,d,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $s.x,this.errorHandler=Pf,this.malformedUriErrorHandler=h_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xu,afterPreactivation:Xu},this.urlHandlingStrategy=new Hd,this.routeReuseStrategy=new ac,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(l.h0i),this.console=d.get(l.c2e);const x=d.get(l.R0b);this.isNgZoneEnabled=x instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function su(){return new re(new le([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Do(d,p,P=>this.triggerEvent(new Wl(P)),P=>this.triggerEvent(new md(P))),this.routerState=lf(this.currentUrlTree,this.rootComponentType),this.transitions=new Dr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ar(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),vn(i=>{let u=!1,d=!1;return _t(i).pipe((0,Un.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vn(p=>{const _=this.browserUrlTree.toString(),I=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return y(p.source)&&(this.browserUrlTree=p.extractedUrl),_t(p).pipe(vn(x=>{const P=this.transitions.getValue();return r.next(new Hu(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),P!==this.transitions.getValue()?Ni.E:Promise.resolve(x)}),function kd(n,e,t,r){return vn(i=>function Df(n,e,t,r,i){return new Pd(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Un.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function eo(n,e,t,r,i){return(0,yr.z)(u=>function Bd(n,e,t,r,i="emptyOnly",u="legacy"){try{const d=new l_(n,e,t,r,i,u).recognize();return null===d?xg(new Sg):_t(d)}catch(d){return xg(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,wt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Un.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(U,x)}this.browserUrlTree=x.urlAfterRedirects}const P=new ui(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(P)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:W,restoredState:Ie,extras:Ue}=p,ot=new Hu(P,this.serializeUrl(U),W,Ie);r.next(ot);const Mt=lf(U,this.rootComponentType).snapshot;return _t(Object.assign(Object.assign({},p),{targetSnapshot:Mt,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Ni.E}),sc(p=>{const{targetSnapshot:_,id:I,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:P,replaceUrl:U}}=p;return this.hooks.beforePreactivation(_,{navigationId:I,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!P,replaceUrl:!!U})}),(0,Un.b)(p=>{const _=new Oi(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,wt.U)(p=>Object.assign(Object.assign({},p),{guards:n_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Ag(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?_t(Object.assign(Object.assign({},t),{guardsResult:!0})):function s_(n,e,t,r){return(0,_n.D)(n).pipe((0,yr.z)(i=>function Rf(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?_t(u.map(p=>{const _=Ud(p,e,i);let I;if(function Ky(n){return n&&Xs(n.canDeactivate)}(_))I=Fi(_.canDeactivate(n,e,t,r));else{if(!Xs(_))throw new Error("Invalid CanDeactivate guard");I=Fi(_(n,e,t,r))}return I.pipe(Ks())})).pipe(tc()):_t(!0)}(i.component,i.route,t,e,r)),Ks(i=>!0!==i,!0))}(d,r,i,n).pipe((0,yr.z)(p=>p&&function ec(n){return"boolean"==typeof n}(p)?function o_(n,e,t,r){return(0,_n.D)(e).pipe(ws(i=>Yn(function u_(n,e){return null!==n&&e&&e(new ha(n)),_t(!0)}(i.route.parent,r),function a_(n,e){return null!==n&&e&&e(new _d(n)),_t(!0)}(i.route,r),function xf(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Ld(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>dd(()=>_t(d.guards.map(_=>{const I=Ud(_,d.node,t);let A;if(function wf(n){return n&&Xs(n.canActivateChild)}(I))A=Fi(I.canActivateChild(r,n));else{if(!Xs(I))throw new Error("Invalid CanActivateChild guard");A=Fi(I(r,n))}return A.pipe(Ks())})).pipe(tc())));return _t(u).pipe(tc())}(n,i.path,t),function Sf(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _t(!0);const i=r.map(u=>dd(()=>{const d=Ud(u,e,t);let p;if(function Vw(n){return n&&Xs(n.canActivate)}(d))p=Fi(d.canActivate(e,n));else{if(!Xs(d))throw new Error("Invalid CanActivate guard");p=Fi(d(e,n))}return p.pipe(Ks())}));return _t(i).pipe(tc())}(n,i.route,t))),Ks(i=>!0!==i,!0))}(r,u,n,e):_t(p)),(0,wt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Un.b)(p=>{if(Co(p.guardsResult)){const I=wd(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw I.url=p.guardsResult,I}const _=new gd(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Ar(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),sc(p=>{if(p.guards.canActivateChecks.length)return _t(p).pipe((0,Un.b)(_=>{const I=new ru(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),vn(_=>{let I=!1;return _t(_).pipe(function jd(n,e){return(0,yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return _t(t);let u=0;return(0,_n.D)(i).pipe(ws(d=>function d_(n,e,t,r){return function Mg(n,e,t,r){const i=Object.keys(n);if(0===i.length)return _t({});const u={};return(0,_n.D)(i).pipe((0,yr.z)(d=>function ic(n,e,t,r){const i=Ud(n,e,r);return Fi(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,Un.b)(p=>{u[d]=p}))),Zu(1),(0,yr.z)(()=>Object.keys(u).length===i.length?_t(u):Ni.E))}(n._resolve,n,e,r).pipe((0,wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),cf(n,t).resolve),null)))}(d.route,r,n,e)),(0,Un.b)(()=>u++),Zu(1),(0,yr.z)(d=>u===i.length?_t(t):Ni.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Un.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Un.b)(_=>{const I=new da(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),sc(p=>{const{targetSnapshot:_,id:I,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:P,replaceUrl:U}}=p;return this.hooks.afterPreactivation(_,{navigationId:I,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!P,replaceUrl:!!U})}),(0,wt.U)(p=>{const _=function Hy(n,e,t){const r=ss(n,e._root,t?t._root:void 0);return new Kl(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Un.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new Lw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Un.b)({next(){u=!0},complete(){u=!0}}),function tf(n){return(0,jt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),ai(p=>{if(d=!0,function Ed(n){return n&&n[vd]}(p)){const _=Co(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const I=new nf(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(I),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||y(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new rf(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(I){i.reject(I)}}return Ni.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},d=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qy(t),this.config=t.map(Ef),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:d,queryParamsHandling:p,preserveFragment:_}=r,I=i||this.routerState.root,A=_?this.currentUrlTree.fragment:d;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function kw(n,e,t,r,i){if(0===t.length)return Jl(e.root,e.root,e,r,i);const u=function Gy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Yt(u.outlets,(_,I)=>{p[I]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===d?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new gf(t,e,r)}(t);if(u.toRoot())return Jl(e.root,new le([],{}),e,r,i);const d=function Wy(n,e,t){if(n.isAbsolute)return new mf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new mf(u,u===e.root,0)}const r=Dd(n.commands[0])?0:1;return function zy(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new mf(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=d.processChildren?To(d.segmentGroup,d.index,u.commands):Eg(d.segmentGroup,d.index,u.commands);return Jl(d.segmentGroup,p,e,r,i)}(I,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Co(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function g_(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},f_):!1===r?Object.assign({},p_):r,Co(t))return Id(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Id(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,d){var p,_,I;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,x=y(r)&&A&&!y(A.source),P=A.rawUrl.toString()===t.toString(),U=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(x&&P&&U)return Promise.resolve(!0);let Ie,Ue,ot;d?(Ie=d.resolve,Ue=d.reject,ot=d.promise):ot=new Promise((Ot,Zn)=>{Ie=Ot,Ue=Zn});const Mt=++this.navigationId;let Jt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Jt=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(I=this.browserPageId)&&void 0!==I?I:0)+1):Jt=0,this.setTransition({id:Mt,targetPageId:Jt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:Ie,reject:Ue,promise:ot,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ot.catch(Ot=>Promise.reject(Ot))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new nf(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function y(n){return"imperative"!==n}let g=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new $s.x,this.subscription=t.events.subscribe(u=>{u instanceof Pr&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,d){if(0!==t||r||i||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:w(this.skipLocationChange),replaceUrl:w(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:w(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ui),l.Y36(Js),l.Y36(K))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function w(n){return""===n||!!n}class j{}class ke{preload(e,t){return _t(null)}}let Ne=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Do(i,r,_=>t.triggerEvent(new Wl(_)),_=>t.triggerEvent(new md(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof Pr),ws(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,_n.D)(i).pipe((0,zs.J)(),(0,wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?_t(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,yr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ui),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(j))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pr&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const bt=new l.OlP("ROUTER_CONFIGURATION"),lr=new l.OlP("ROUTER_FORROOT_GUARD"),Ts=[He,{provide:Or,useClass:Vn},{provide:Ui,useFactory:function cc(n,e,t,r,i,u,d={},p,_){const I=new Ui(null,n,e,t,r,i,Gu(u));return p&&(I.urlHandlingStrategy=p),_&&(I.routeReuseStrategy=_),function el(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,I),d.enableTracing&&I.events.subscribe(A=>{var x,P;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(P=console.groupEnd)||void 0===P||P.call(console)}),I},deps:[Or,du,He,l.zs3,l.Sil,Zd,bt,[class to{},new l.FiY],[class ti{},new l.FiY]]},du,{provide:Js,useFactory:function Ff(n){return n.routerState.root},deps:[Ui]},Ne,ke,class te{preload(e,t){return t().pipe(ai(()=>_t(null)))}},{provide:bt,useValue:{enableTracing:!1}}];function qd(){return new l.PXZ("Router",Ui)}let uc=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Ts,$d(t),{provide:lr,useFactory:lc,deps:[[Ui,new l.FiY,new l.tp0]]},{provide:bt,useValue:r||{}},{provide:K,useFactory:kf,deps:[ae,[new l.tBr(pe),new l.FiY],bt]},{provide:Qe,useFactory:Of,deps:[Ui,kl,bt]},{provide:j,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ke},{provide:l.PXZ,multi:!0,useFactory:qd},[dc,{provide:l.ip1,multi:!0,useFactory:Gd,deps:[dc]},{provide:Wd,useFactory:Lf,deps:[dc]},{provide:l.tb,multi:!0,useExisting:Wd}]]}}static forChild(t){return{ngModule:n,providers:[$d(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lr,8),l.LFG(Ui,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Of(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Qe(n,e,t)}function kf(n,e,t={}){return t.useHash?new ye(n,e):new Se(n,e)}function lc(n){return"guarded"}function $d(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:Zd,multi:!0,useValue:n}]}let dc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $s.x}appInitializer(){return this.injector.get(Z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Ui),d=this.injector.get(bt);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?_t(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(bt),i=this.injector.get(Ne),u=this.injector.get(Qe),d=this.injector.get(Ui),p=this.injector.get(l.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),u.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Gd(n){return n.appInitializer.bind(n)}function Lf(n){return n.bootstrapListener.bind(n)}const Wd=new l.OlP("Router Initializer"),Tb=[{typeofMedia:"Anime & Manga",typeofMedia2:"Books",title1:"\u50d5\u306e\u30d2\u30fc\u30ed\u30fc\u30a2\u30ab\u30c7\u30df\u30a2 | Boku no Hero Academia | My Hero Academia (219824)",title2:"Haikyuu!! (132403)",title3:"Naruto (86129)",title4:"Shingeki no Kyojin | Attack on Titan (67176)",title5:"\u30b8\u30e7\u30b8\u30e7\u306e\u5947\u5999\u306a\u5192\u967a | JoJo no Kimyou na Bouken | JoJo's Bizarre Adventure (48387)",title12:"Harry Potter - J. K. Rowling (345986)",title22:"Star Wars - All Media Types (185373)",title32:"Sherlock Holmes & Related Fandoms (136017)",title42:"TOLKIEN J. R. R. - Works & Related Fandoms (79660)",title52:"Dragon Age - All Media Types (74560)"},{typeofMedia:"Cartoons & Comics & Graphic Novels",typeofMedia2:"Celebrities & Real People",title1:"Marvel (535886)",title2:"DCU (250882)",title3:"The Avengers (Marvel) - All Media Types (204299)",title4:"Star Wars - All Media Types (185373)",title5:"Captain America - All Media Types (108213)",title12:"Real Person Fiction (452447)",title22:"Video Blogging RPF (174715)",title32:"Actor RPF (97023)",title42:"Minecraft (Video Game) (91093)",title52:"Music RPF (72125)"},{typeofMedia:"Movies",typeofMedia2:"Music & Bands",title1:"Marvel (535886)",title2:"Marvel Cinematic Universe (444746)",title3:"Harry Potter - J. K. Rowling (346238)",title4:"DCU (251072)",title5:"The Avengers (Marvel) - All Media Types (204387)",title12:"K-pop (467940)",title22:"\ubc29\ud0c4\uc18c\ub144\ub2e8 | Bangtan Boys | BTS (175125)",title32:"Music RPF (72172)",title42:"One Direction (Band) (62084)",title52:"Rock Music RPF (56835)"},{typeofMedia:"Other Media",typeofMedia2:"Theater",title1:"Star Wars - All Media Types (185534)",title2:"Video Blogging RPF (174962)",title3:"Original Work (148272)",title4:"Minecraft (Video Game) (91306)",title5:"Doctor Who & Related Fandoms (88487)",title12:"Les Mis\xe9rables - All Media Types (22916)",title22:"Hamilton - Miranda (19186)",title32:"Newsies - All Media Types (7518)",title42:"Bishoujo Senshi Sailor Moon | Pretty Guardian Sailor Moon (7155)",title52:"Be More Chill - Iconis/Tracz (7061)"},{typeofMedia:"TV Shows",typeofMedia2:"Video Games",title1:"Marvel (535886)",title2:"Marvel Cinematic Universe (444746)",title3:"DCU (251072)",title4:"Supernatural (TV 2005) (250597)",title5:"Sherlock Holmes & Related Fandoms (136056)",title12:"Harry Potter - J. K. Rowling (346238)",title22:"Star Wars - All Media Types (185534)",title32:"Minecraft (Video Game) (91306)",title42:"Final Fantasy Series (81821)",title52:"Dragon Age - All Media Types (74578)"}];let Cb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-MediaCard"]],inputs:{typeofMedia:"typeofMedia",typeofMedia2:"typeofMedia2",title1:"title1",title2:"title2",title3:"title3",title4:"title4",title5:"title5",title12:"title12",title22:"title22",title32:"title32",title42:"title42",title52:"title52"},decls:36,vars:14,consts:[[1,"row","align-items-start"],[1,"col-sm-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-text"],["href","#",1,"btn","btn-secondary"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"p",5),l.TgZ(7,"p"),l._uU(8),l.qZA(),l.TgZ(9,"p"),l._uU(10),l.qZA(),l.TgZ(11,"p"),l._uU(12),l.qZA(),l.TgZ(13,"p"),l._uU(14),l.qZA(),l.TgZ(15,"p"),l._uU(16),l.qZA(),l.TgZ(17,"a",6),l._uU(18),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",1),l.TgZ(20,"div",2),l.TgZ(21,"div",3),l._uU(22),l.qZA(),l.TgZ(23,"div",4),l.TgZ(24,"p",5),l._uU(25),l.qZA(),l.TgZ(26,"p"),l._uU(27),l.qZA(),l.TgZ(28,"p"),l._uU(29),l.qZA(),l.TgZ(30,"p"),l._uU(31),l.qZA(),l.TgZ(32,"p"),l._uU(33),l.qZA(),l.TgZ(34,"a",6),l._uU(35),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.hij(" ",r.typeofMedia," "),l.xp6(4),l.hij(" ",r.title1,""),l.xp6(2),l.hij(" ",r.title2,""),l.xp6(2),l.hij(" ",r.title3,""),l.xp6(2),l.hij(" ",r.title4,""),l.xp6(2),l.hij(" ",r.title5," "),l.xp6(2),l.Oqu(r.typeofMedia),l.xp6(4),l.hij(" ",r.typeofMedia2," "),l.xp6(3),l.hij(" ",r.title12,""),l.xp6(2),l.hij(" ",r.title22,""),l.xp6(2),l.hij(" ",r.title32,""),l.xp6(2),l.hij(" ",r.title42,""),l.xp6(2),l.hij(" ",r.title52," "),l.xp6(2),l.Oqu(r.typeofMedia))},styles:[""]}),n})();function jw(n,e){if(1&n&&(l.TgZ(0,"div"),l.TgZ(1,"ao3-MediaCard",3),l._uU(2," loading... "),l.qZA(),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.s9C("typeofMedia2",t.typeofMedia2),l.s9C("typeofMedia",t.typeofMedia),l.s9C("title1",t.title1),l.s9C("title2",t.title2),l.s9C("title3",t.title3),l.s9C("title4",t.title4),l.s9C("title5",t.title5),l.s9C("title12",t.title12),l.s9C("title22",t.title22),l.s9C("title32",t.title32),l.s9C("title42",t.title42),l.s9C("title52",t.title52)}}let m_=(()=>{class n{constructor(){for(var t of(this.CatagoryCards=[],Tb))console.log(t),this.CatagoryCards.push(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-fandom-page"]],decls:7,vars:1,consts:[["routerLink","/storypage"],[1,"container"],[4,"ngFor","ngForOf"],[1,"m-5",3,"typeofMedia2","typeofMedia","title1","title2","title3","title4","title5","title12","title22","title32","title42","title52"]],template:function(t,r){1&t&&(l._uU(0,"This is fandom page!\n"),l.TgZ(1,"a",0),l._uU(2,"Harry Potter - J. K. Rowling"),l.qZA(),l.TgZ(3,"ao3-MediaCard"),l._uU(4," Loading...\n"),l.qZA(),l.TgZ(5,"div",1),l.YNc(6,jw,3,12,"div",2),l.qZA()),2&t&&(l.xp6(6),l.Q6J("ngForOf",r.CatagoryCards))},directives:[g,Cb,Pn],styles:[""]}),n})(),y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Home-page"]],decls:95,vars:0,consts:[[1,"row","justify-content-center"],[1,"col-4"],[1,"card","border-light","mb-3"],[1,"card-header","text-danger"],[1,"card-body"],[1,"card-text"],[1,"row"],[1,"col-6"],[1,"card"],[1,"card-title"],[1,"position-absolute","bottom-0","end-0"],[1,"card","text-DARK","bg-light","mb-3"],[1,"col-12"],[1,"row","align-items-center"],["type","button",1,"btn","btn-outline-secondary","center"]],template:function(t,r){1&t&&(l._uU(0,"This is the home page!\n"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l._uU(5,"Find your favorites"),l.qZA(),l.TgZ(6,"div",4),l._UZ(7,"p",5),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l._uU(10," > All Fandoms "),l.qZA(),l.TgZ(11,"div",7),l._uU(12," > Anime & Manga "),l.qZA(),l.qZA(),l.TgZ(13,"div",6),l.TgZ(14,"div",7),l._uU(15," > Books & Literature "),l.qZA(),l.TgZ(16,"div",7),l._uU(17," > Cartoons & Comics & Graphic Novels "),l.qZA(),l.qZA(),l.TgZ(18,"div",6),l.TgZ(19,"div",7),l._uU(20," >Celebrities & Real People "),l.qZA(),l.TgZ(21,"div",7),l._uU(22," > Movies "),l.qZA(),l.qZA(),l.TgZ(23,"div",6),l.TgZ(24,"div",7),l._uU(25," > Music & Bands "),l.qZA(),l.TgZ(26,"div",7),l._uU(27," > Other Media "),l.qZA(),l.qZA(),l.TgZ(28,"div",6),l.TgZ(29,"div",7),l._uU(30," > Theater "),l.qZA(),l.TgZ(31,"div",7),l._uU(32," > TV Shows "),l.qZA(),l.qZA(),l.TgZ(33,"div",6),l.TgZ(34,"div",7),l._uU(35," >Video Games "),l.qZA(),l.TgZ(36,"div",7),l._uU(37," > Uncategorized Fandoms "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"div",8),l.TgZ(39,"div",3),l._uU(40,"News"),l.qZA(),l.TgZ(41,"div",4),l.TgZ(42,"u",9),l._uU(43,"Thanks for Participating in International Fanworks Day 2022"),l.qZA(),l.TgZ(44,"p",5),l._uU(45,"Published: Thu 17 Feb 2022 01:28PM EST Comments: 9 "),l.qZA(),l.TgZ(46,"p",5),l._uU(47," Another International Fanworks Day has gone by and once again, we at the Organization for Transformative Works are grateful for the enthusiasm and participation of our visitors. IFD is all about celebrating the creativity of the fandom community and it was on full display this year! "),l.qZA(),l.TgZ(48,"div",10),l.TgZ(49,"u"),l._uU(50," Read More!"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"div",8),l.TgZ(52,"div",4),l.TgZ(53,"u",9),l._uU(54,"It's International Fanworks Day 2022! "),l.qZA(),l.TgZ(55,"p",5),l._uU(56," Published: Mon 14 Feb 2022 03:59PM EST Comments: 24 "),l.qZA(),l.TgZ(57,"p",5),l._uU(58," Hurray! It\u2019s International Fanworks Day, our annual opportunity to celebrate all things fanworks and fandom. As is now traditional every February 15, the OTW will be celebrating with a chatroom games marathon, hosted on Discord: you can find all the details below. And remember to check out our previous post for details of the rest of our #IFD2022 celebrations! "),l.qZA(),l.TgZ(59,"div",10),l.TgZ(60,"u"),l._uU(61," Read More!"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(62,"div",8),l.TgZ(63,"div",4),l.TgZ(64,"u",9),l._uU(65,"International Fanworks Day Feedback Fest 2022 "),l.qZA(),l.TgZ(66,"p",5),l._uU(67," Published: Sun 13 Feb 2022 10:31AM EST Comments: 1487 "),l.qZA(),l.TgZ(68,"p",5),l._uU(69," We've all built our own personal canons \u2013 the fics, vids, art and other works that we love and go back to, time and time again. In January, we told you the theme of this year's International Fanworks Day was Fandom Classics, and we asked you to start compiling the fanworks that you consider to be essential reading, viewing or listening. "),l.qZA(),l.TgZ(70,"div",10),l.TgZ(71,"u"),l._uU(72," Read More!"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(73,"div",1),l.TgZ(74,"div",6),l.TgZ(75,"div",4),l.TgZ(76,"h4",9),l._uU(77," A fan-created, fan-run, nonprofit, noncommercial archive for transformative fanworks, like fanfiction, fanart, fan videos, and podfic"),l.qZA(),l.qZA(),l.TgZ(78,"div",11),l.TgZ(79,"div",4),l.TgZ(80,"div",12),l._uU(81," With an AO3 account, you can: "),l.qZA(),l.TgZ(82,"div",12),l._uU(83," > Share your own fanworks "),l.qZA(),l.TgZ(84,"div",12),l._uU(85," > Get notified when your favorite works, series, or users update "),l.qZA(),l.TgZ(86,"div",12),l._uU(87," > Participate in challenges "),l.qZA(),l.TgZ(88,"div",12),l._uU(89," > Keep track of works you've visited and works you want to check out later "),l.qZA(),l.TgZ(90,"div",12),l._uU(91," You can join by getting an invitation from our automated invite queue. All fans and fanworks are welcome! "),l.qZA(),l.TgZ(92,"div",13),l.TgZ(93,"button",14),l._uU(94,"Get Invited!"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[""]}),n})();const o1=[{img:"/assets/ficLOGO.png",author:"Take My Hand by torino10154",fandom:"Harry Potter - J. K. Rowling",tags:"No Archive Warnings Apply, Scorpius Malfoy, Draco Malfoy, Community: hp_goldenage, Father-Son Relationship, Gen Work, Bittersweet, Older Characters, Memory Loss, hearing loss, Aging",summery:"James shares some news and not everyone takes it well.",date:"17 Jan 2022",stats:"Language: English Words: 250 Chapters: 1/1 Comments: 3 Kudos: 15 Bookmarks: 2 Hits: 63"},{img:"/assets/ficLOGO.png",author:"Bad Timing? by jenorama",fandom:"Harry Potter - J. K. Rowling",tags:"No Archive Warnings Apply, James Potter, Sirius Black, Peter Pettigrew, Remus Lupin, missing moment",summery:"James shares some news and not everyone takes it well.",date:"23 Jan 2022",stats:"Language: English Words: 1,375 Chapters: 1/1 Comments: 3 Kudos: 18 Hits: 81"},{img:"/assets/ficLOGO.png",author:"Newt Scamander's Old New Resolution by prima_vera",fandom:"Harry Potter - J. K. Rowling, Fantastic Beasts and Where to Find Them (Movies)",tags:"No Archive Warnings Apply, Newt Scamander, New Year's Resolutions, Drabble",summery:"",date:"21 Jan 2022",stats:"Language: English Words: 203 Chapters: 1/1 Kudos: 1 Hits: 14"}];var __=k(4986),v_=k(6451),w_=k(3099);function Zw(n,e=Gs.y){return n=null!=n?n:bb,(0,jt.e)((t,r)=>{let i,u=!0;t.subscribe(new Ln.Q(r,d=>{const p=e(d);(u||!n(i,p))&&(u=!1,i=p,r.next(d))}))})}function bb(n,e){return n===e}var Ao=k(5032),Mn=k(5813),Vi=k(2011),qw=(k(2438),k(3942)),_a=k(4859),ve=k(5861),So=k(9681),O=k(2090),yt=k(1877);const E_="@firebase/database";let Ng="";function Uf(n){Ng=n}class xo{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $w{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Gw=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xo(e)}}catch(e){}return new $w},pu=Gw("localStorage"),Ro=Gw("sessionStorage"),tl=new yt.Yd("@firebase/database"),T_=function(){let n=1;return function(){return n++}}(),Pg=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},Og=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Og.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let nl=null,Ab=!0;const Vf=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(tl.logLevel=yt.in.VERBOSE,nl=tl.log.bind(tl),e&&Ro.set("logging_enabled",!0)):"function"==typeof n?nl=n:(nl=null,Ro.remove("logging_enabled"))},cr=function(...n){if(!0===Ab&&(Ab=!1,null===nl&&!0===Ro.get("logging_enabled")&&Vf(!0)),nl){const e=Og.apply(null,n);nl(e)}},hc=function(n){return function(...e){cr(n,...e)}},Bf=function(...n){const e="FIREBASE INTERNAL ERROR: "+Og(...n);tl.error(e)},no=function(...n){const e=`FIREBASE FATAL ERROR: ${Og(...n)}`;throw tl.error(e),new Error(e)},as=function(...n){const e="FIREBASE WARNING: "+Og(...n);tl.warn(e)},kg=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gu="[MIN_NAME]",Mo="[MAX_NAME]",zd=function(n,e){if(n===e)return 0;if(n===gu||e===Mo)return-1;if(e===gu||n===Mo)return 1;{const t=b_(n),r=b_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Rb=function(n,e){return n===e?0:n<e?-1:1},Fg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},Lg=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=Lg(n[e[r]]);return t+="}",t},C_=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Vr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Ug=function(n){(0,O.hu)(!kg(n),"Invalid JSON number");const r=1023;let i,u,d,p,_;0===n?(u=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,d=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,d=Math.round(n/Math.pow(2,-1074))));const I=[];for(_=52;_;_-=1)I.push(d%2?1:0),d=Math.floor(d/2);for(_=11;_;_-=1)I.push(u%2?1:0),u=Math.floor(u/2);I.push(i?1:0),I.reverse();const A=I.join("");let x="";for(_=0;_<64;_+=8){let P=parseInt(A.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),x+=P}return x.toLowerCase()},d1=new RegExp("^-?(0*)\\d{1,10}$"),Mb=-2147483648,Ww=2147483647,b_=function(n){if(d1.test(n)){const e=Number(n);if(e>=Mb&&e<=Ww)return e}return null},jf=function(n){try{n()}catch(e){setTimeout(()=>{throw as("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Vg=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class rl{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class D_{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}let Zf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kw="websocket",x_="long_polling";class R_{constructor(e,t,r,i,u=!1,d="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Kd(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===Kw)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==x_)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Pb(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Vr(t,(u,d)=>{i.push(u+"="+d)}),r+i.join("&")}class Yd{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const $f={},il={};function fc(n){const e=n.toString();return $f[e]||($f[e]=new Yd),$f[e]}class Ob{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jd{constructor(e,t,r,i,u,d,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=d,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(e),this.stats_=fc(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Kd(t,x_,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ob(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nE((...u)=>{const[d,p,_,I,A]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=p,this.password=_;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[d,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mu.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jd.forceAllow_=!0}static forceDisallow(){Jd.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Jd.forceAllow_&&(Jd.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=C_(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class nE{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=T_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=nE.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(p){cr("frame writing exception"),p.stack&&cr(p.stack),cr(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Zg=null;"undefined"!=typeof MozWebSocket?Zg=MozWebSocket:"undefined"!=typeof WebSocket&&(Zg=WebSocket);let Wf=(()=>{class n{constructor(t,r,i,u,d,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=fc(r),this.connURL=n.connectionURL_(r,p,_,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u){const d={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&mu.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),u&&(d.ac=u),Kd(t,Kw,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pu.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${Ng}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(u.proxy={origin:p}),this.mySock=new Zg(this.connURL,[],u)}else this.mySock=new Zg(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Zg&&!n.forceDisallow_}static previouslyFailed(){return pu.isInMemoryStorage||!0===pu.get("previous_websocket_failure")}markConnectionHealthy(){pu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=C_(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class zf{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Jd,Wf]}initTransports_(e){const t=Wf&&Wf.isAvailable();let r=t&&!Wf.previouslyFailed();if(e.webSocketOnly&&(t||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wf];else{const i=this.transports_=[];for(const u of zf.ALL_TRANSPORTS)u&&u.isAvailable()&&i.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class lE{constructor(e,t,r,i,u,d,p,_,I,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=d,this.onReady_=p,this.onDisconnect_=_,this.onKill_=I,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new zf(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Vg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Fg("t",e),r=Fg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Fg("t",e),r=Fg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Fg("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Bf("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Vg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cE{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Zb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Kf extends Zb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kf}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Gt(){return new hn("")}function Lt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function sl(n){return n.pieces_.length-n.pieceNum_}function fn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new hn(n.pieces_,e)}function Yf(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qg(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new hn(e,0)}function An(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new hn(t,0)}function Ut(n){return n.pieceNum_>=n.pieces_.length}function Bi(n,e){const t=Lt(n),r=Lt(e);if(null===t)return e;if(t===r)return Bi(fn(n),fn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function V_(n,e){const t=pc(n,0),r=pc(e,0);for(let i=0;i<t.length&&i<r.length;i++){const u=zd(t[i],r[i]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function fE(n,e){if(sl(n)!==sl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ro(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(sl(n)>sl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class pE{constructor(e,t){this.errorPrefix_=t,this.parts_=pc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);B_(this)}}function B_(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ol(n))}function ol(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Po extends Zb{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Po}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const al=1e3;let Jf,gc=(()=>{class n extends cE{constructor(t,r,i,u,d,p,_,I){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=d,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=I,this.id=n.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=al,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,I&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Po.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Kf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,d={r:u,a:t,b:r};this.log_((0,O.Pz)(d)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject},u={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[d];void 0===p||u!==p||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,i,u){this.initConnection_();const d=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+d),this.listens.has(p)||this.listens.set(p,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(p).has(d),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(p).set(d,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const d={p:i};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,_=>{const I=_.d,A=_.s;n.warnOnListenWarnings_(I,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",_),"ok"!==A&&this.removeListen_(i,u),t.onComplete&&t.onComplete(A,I))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const d=u.s,p=u.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const d={p:t};u&&(d.q=i,d.t=u),this.sendRequest("n",d)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const d={p:r,d:i};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,d){this.initConnection_();const p={p:r,d:i};void 0!==d&&(p.h=d),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Bf("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=al,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=al,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=al),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,I=null;const A=function(){I?I.close():(_=!0,u())};t.realtime_={close:A,sendRequest:function(U){(0,O.hu)(I,"sendRequest call when we're not connected not allowed."),I.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,W]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=W&&W.token,I=new lE(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,Ie=>{as(Ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&as(U),A())}}})()}interrupt(t){cr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=al,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(d=>Lg(d)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new hn(t).toString();let u;if(this.listens.has(i)){const d=this.listens.get(i);u=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){cr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){cr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Ng.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Kf.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kt(e,t)}}class Qf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new kt(gu,e),i=new kt(gu,t);return 0!==this.compare(r,i)}minPost(){return kt.MIN}}class H_ extends Qf{static get __EMPTY_NODE(){return Jf}static set __EMPTY_NODE(e){Jf=e}compare(e,t){return zd(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kt.MIN}maxPost(){return new kt(Mo,Jf)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new kt(e,Jf)}toString(){return".key"}}const va=new H_;class eh{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,i&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let q_,Oo=(()=>{class n{constructor(t,r,i,u,d){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=u?u:ji.EMPTY_NODE,this.right=null!=d?d:ji.EMPTY_NODE}copy(t,r,i,u,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=u?u:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const d=i(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return ji.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ji.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ji{constructor(e,t=ji.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ji(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Oo.BLACK,null,null))}remove(e){return new ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eh(this.root_,null,this.comparator_,!0,e)}}function th(n,e){return zd(n.name,e.name)}function $g(n,e){return zd(n,e)}ji.EMPTY_NODE=new class Wb{copy(e,t,r,i,u){return this}insert(e,t,r){return new Oo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mc=function(n){return"number"==typeof n?"number:"+Ug(n):"string:"+n},_E=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===q_||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===q_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vE,wE,bs,nh=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_E(this.priorityNode_)}static set __childrenNodeConstructor(t){vE=t}static get __childrenNodeConstructor(){return vE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ut(t)?this:".priority"===Lt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Lt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===sl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(fn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mc(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Ug(this.value_):this.value_,this.lazyHash_=Pg(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(u>=0,"Unknown leaf type: "+r),(0,O.hu)(d>=0,"Unknown leaf type: "+i),u===d?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const En=new class IE extends Qf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?zd(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kt.MIN}maxPost(){return new kt(Mo,new nh("[PRIORITY-POST]",bs))}makePost(e,t){const r=wE(e);return new kt(t,new nh("[PRIORITY-POST]",r))}toString(){return".priority"}},TE=Math.log(2);class Kb{constructor(e){this.count=parseInt(Math.log(e+1)/TE,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gg=function(n,e,t,r){n.sort(e);const i=function(_,I){const A=I-_;let x,P;if(0===A)return null;if(1===A)return x=n[_],P=t?t(x):x,new Oo(P,x.node,Oo.BLACK,null,null);{const U=parseInt(A/2,10)+_,W=i(_,U),Ie=i(U+1,I);return x=n[U],P=t?t(x):x,new Oo(P,x.node,Oo.BLACK,W,Ie)}},p=function(_){let I=null,A=null,x=n.length;const P=function(W,Ie){const Ue=x-W,ot=x;x-=W;const Mt=i(Ue+1,ot),Jt=n[Ue],Ot=t?t(Jt):Jt;U(new Oo(Ot,Jt.node,Ie,null,Mt))},U=function(W){I?(I.left=W,I=W):(A=W,I=W)};for(let W=0;W<_.count;++W){const Ie=_.nextBitIsOne(),Ue=Math.pow(2,_.count-(W+1));Ie?P(Ue,Oo.BLACK):(P(Ue,Oo.BLACK),P(Ue,Oo.RED))}return A}(new Kb(n.length));return new ji(r||e,p)};let G_;const rh={};class wa{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(rh&&En,"ChildrenNode.ts has not been loaded"),G_=G_||new wa({".priority":rh},{".priority":En}),G_}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ji?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(kt.Wrap);let p,d=u.getNext();for(;d;)i=i||e.isDefinedOn(d.node),r.push(d),d=u.getNext();p=i?Gg(r,e.getCompare()):rh;const _=e.toString(),I=Object.assign({},this.indexSet_);I[_]=e;const A=Object.assign({},this.indexes_);return A[_]=p,new wa(A,I)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,u)=>{const d=(0,O.DV)(this.indexSet_,u);if((0,O.hu)(d,"Missing index implementation for "+u),i===rh){if(d.isDefinedOn(e.node)){const p=[],_=t.getIterator(kt.Wrap);let I=_.getNext();for(;I;)I.name!==e.name&&p.push(I),I=_.getNext();return p.push(e),Gg(p,d.getCompare())}return rh}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new kt(e.name,p))),_.insert(e,e.node)}});return new wa(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===rh)return i;{const u=t.get(e.name);return u?i.remove(new kt(e.name,u)):i}});return new wa(r,this.indexSet_)}}let Wg,xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_E(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wg||(Wg=new n(new ji($g),null,wa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wg}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Wg:r}}getChild(t){const r=Lt(t);return null===r?this:this.getImmediateChild(r).getChild(fn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new kt(t,r);let u,d;r.isEmpty()?(u=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(i,this.children_));const p=u.isEmpty()?Wg:this.priorityNode_;return new n(u,p,d)}}updateChild(t,r){const i=Lt(t);if(null===i)return r;{(0,O.hu)(".priority"!==Lt(t)||1===sl(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(fn(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,d=!0;if(this.forEachChild(En,(p,_)=>{r[p]=_.val(t),i++,d&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):d=!1}),!t&&d&&u<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+mc(this.getPriority().val())+":"),this.forEachChild(En,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":Pg(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const d=u.getPredecessorKey(new kt(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,kt.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)<0;)u.getNext(),d=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,kt.Wrap);let d=u.peek();for(;null!=d&&r.compare(d,t)>0;)u.getNext(),d=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xf?-1:0}withIndex(t){if(t===va||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===va||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(En),u=r.getIterator(En);let d=i.getNext(),p=u.getNext();for(;d&&p;){if(d.name!==p.name||!d.node.equals(p.node))return!1;d=i.getNext(),p=u.getNext()}return null===d&&null===p}return!1}return!1}}resolveIndex_(t){return t===va?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Xf=new class Yb extends xt{constructor(){super(new ji($g),xt.EMPTY_NODE,wa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xt.EMPTY_NODE}isEmpty(){return!1}};function Xn(n,e=null){if(null===n)return xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new nh(n,Xn(e));if(n instanceof Array){let t=xt.EMPTY_NODE;return Vr(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const u=Xn(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Xn(e))}{const t=[];let r=!1;if(Vr(n,(d,p)=>{if("."!==d.substring(0,1)){const _=Xn(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new kt(d,_)))}}),0===t.length)return xt.EMPTY_NODE;const u=Gg(t,th,d=>d.name,$g);if(r){const d=Gg(t,En.getCompare());return new xt(u,Xn(e),new wa({".priority":d},{".priority":En}))}return new xt(u,Xn(e),wa.Default)}}Object.defineProperties(kt,{MIN:{value:new kt(gu,xt.EMPTY_NODE)},MAX:{value:new kt(Mo,Xf)}}),H_.__EMPTY_NODE=xt.EMPTY_NODE,nh.__childrenNodeConstructor=xt,function zb(n){q_=n}(Xf),function EE(n){bs=n}(Xf),function $_(n){wE=n}(Xn);class ep extends Qf{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Ut(e)&&".priority"!==Lt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?zd(e.name,t.name):u}makePost(e,t){const r=Xn(e),i=xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new kt(t,i)}maxPost(){const e=xt.EMPTY_NODE.updateChild(this.indexPath_,Xf);return new kt(Mo,e)}toString(){return pc(this.indexPath_,0).join("/")}}const zg=new class Qb extends Qf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?zd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kt.MIN}maxPost(){return kt.MAX}makePost(e,t){const r=Xn(e);return new kt(t,r)}toString(){return".value"}},yc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",m1=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const u=new Array(8);for(i=7;i>=0;i--)u[i]=yc.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let d=u.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=yc.charAt(e[i]);return(0,O.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),W_=function(n){if(n===""+Ww)return"-";const e=b_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Mo;const u=yc.charAt(yc.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},z_=function(n){if(n===""+Mb)return gu;const e=b_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Ww:(delete t[t.length-1],t.join("")):(t[t.length-1]=yc.charAt(yc.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function K_(n){return{type:"value",snapshotNode:n}}function ih(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Kg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Y_{constructor(e){this.index_=e}updateChild(e,t,r,i,u,d){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(Kg(t,p)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?d.trackChildChange(ih(t,r)):d.trackChildChange(sh(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(En,(i,u)=>{t.hasChild(i)||r.trackChildChange(Kg(i,u))}),t.isLeafNode()||t.forEachChild(En,(i,u)=>{if(e.hasChild(i)){const d=e.getImmediateChild(i);d.equals(u)||r.trackChildChange(sh(i,u,d))}else r.trackChildChange(ih(i,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _c{constructor(e){this.indexedFilter_=new Y_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_c.getStartPost_(e),this.endPost_=_c.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,u,d){return this.matches(new kt(t,r))||(r=xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,u,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(xt.EMPTY_NODE);const u=this;return t.forEachChild(En,(d,p)=>{u.matches(new kt(d,p))||(i=i.updateImmediateChild(d,xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Xb{constructor(e){this.rangedFilter_=new _c(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,u,d){return this.rangedFilter_.matches(new kt(t,r))||(r=xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,u,d):this.fullLimitUpdateChild_(e,t,r,u,d)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;i=xt.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const p=u.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),d++}}else{let u,d,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(xt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();p=(P,U)=>x(U,P)}else _=i.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let I=0,A=!1;for(;_.hasNext();){const x=_.getNext();!A&&p(u,x)<=0&&(A=!0),A&&I<this.limit_&&p(x,d)<=0?I++:i=i.updateImmediateChild(x.name,xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,u){let d;if(this.reverse_){const x=this.index_.getCompare();d=(P,U)=>x(U,P)}else d=this.index_.getCompare();const p=e;(0,O.hu)(p.numChildren()===this.limit_,"");const _=new kt(t,r),I=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(_);if(p.hasChild(t)){const x=p.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,I,this.reverse_);for(;null!=P&&(P.name===t||p.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:d(P,_);if(A&&!r.isEmpty()&&U>=0)return null!=u&&u.trackChildChange(sh(t,r,x)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(Kg(t,x));const Ie=p.updateImmediateChild(t,xt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=u&&u.trackChildChange(ih(P.name,P.node)),Ie.updateImmediateChild(P.name,P.node)):Ie}}return r.isEmpty()?e:A&&d(I,_)>=0?(null!=u&&(u.trackChildChange(Kg(I.name,I.node)),u.trackChildChange(ih(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(I.name,xt.EMPTY_NODE)):e}}class Yg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=En}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===En}copy(){const e=new Yg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Q_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ul(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ll(n,e){const t=n.copy();return t.index_=e,t}function DE(n){const e={};if(n.isDefault())return e;let t;return n.index_===En?t="$priority":n.index_===zg?t="$value":n.index_===va?t="$key":((0,O.hu)(n.index_ instanceof ep,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function AE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==En&&(e.i=n.index_.toString()),e}class oh extends cE{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=oh.getListenId_(e,r),p={};this.listens_[d]=p;const _=DE(e._queryParams);this.restRequest_(u+".json",_,(I,A)=>{let x=A;if(404===I&&(x=null,I=null),null===I&&this.onDataUpdate_(u,x,!1,r),(0,O.DV)(this.listens_,d)===p){let P;P=I?401===I?"permission_denied":"rest_error:"+I:"ok",i(P,null)}})}unlisten(e,t){const r=oh.getListenId_(e,t);delete this.listens_[r]}get(e){const t=DE(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(u,d)=>{let p=d;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+d);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+d+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,O.cI)(p.responseText)}catch(I){as("Failed to parse JSON response for "+d+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&as("Got unsuccessful REST response for "+d+" Status: "+p.status),r(p.status);r=null}},p.open("GET",d,!0),p.send()})}}class Ea{constructor(){this.rootNode_=xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cl(){return{value:null,children:new Map}}function dr(n,e,t){if(Ut(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Lt(e);n.children.has(r)||n.children.set(r,cl()),dr(n.children.get(r),e=fn(e),t)}}function yu(n,e){if(Ut(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(En,(r,i)=>{dr(n,new hn(r),i)}),yu(n,e)}}if(n.children.size>0){const t=Lt(e);return e=fn(e),n.children.has(t)&&yu(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function ah(n,e,t){null!==n.value?t(e,n.value):function so(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{ah(i,new hn(e.toString()+"/"+r),t)})}class J_{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class ch{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new J_(e);const r=1e4+2e4*Math.random();Vg(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Vr(e,(i,u)=>{u>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),Vg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ni=(()=>{return(n=ni||(ni={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ni;var n})();function fl(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _u{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ni.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ut(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new hn(e));return new _u(Gt(),t,this.revert)}}return(0,O.hu)(Lt(this.path)===e,"operationForChild called for unrelated child."),new _u(fn(this.path),this.affectedTree,this.revert)}}class dh{constructor(e,t){this.source=e,this.path=t,this.type=ni.LISTEN_COMPLETE}operationForChild(e){return Ut(this.path)?new dh(this.source,Gt()):new dh(this.source,fn(this.path))}}class pl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ni.OVERWRITE}operationForChild(e){return Ut(this.path)?new pl(this.source,Gt(),this.snap.getImmediateChild(e)):new pl(this.source,fn(this.path),this.snap)}}class wc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ni.MERGE}operationForChild(e){if(Ut(this.path)){const t=this.children.subtree(new hn(e));return t.isEmpty()?null:t.value?new pl(this.source,Gt(),t.value):new wc(this.source,Gt(),t)}return(0,O.hu)(Lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wc(this.source,fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ut(e))return this.isFullyInitialized()&&!this.filtered_;const t=Lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class SE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hh(n,e,t,r,i,u){const d=r.filter(p=>p.type===t);d.sort((p,_)=>function ME(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new kt(e.childName,e.snapshotNode),i=new kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),d.forEach(p=>{const _=function RE(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);i.forEach(I=>{I.respondsTo(p.type)&&e.push(I.createEvent(_,n.query_))})})}function Jg(n,e){return{eventCache:n,serverCache:e}}function fh(n,e,t,r){return Jg(new vu(e,t,r),n.serverCache)}function NE(n,e,t,r){return Jg(n.eventCache,new vu(e,t,r))}function Xg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function gl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let X_;class In{constructor(e,t=(()=>(X_||(X_=new ji(Rb)),X_))()){this.value=e,this.children=t}static fromObject(e){let t=new In(null);return Vr(e,(r,i)=>{t=t.set(new hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Gt(),value:this.value};if(Ut(e))return null;{const r=Lt(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(fn(e),t);return null!=u?{path:An(new hn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ut(e))return this;{const t=Lt(e),r=this.children.get(t);return null!==r?r.subtree(fn(e)):new In(null)}}set(e,t){if(Ut(e))return new In(t,this.children);{const r=Lt(e),u=(this.children.get(r)||new In(null)).set(fn(e),t),d=this.children.insert(r,u);return new In(this.value,d)}}remove(e){if(Ut(e))return this.children.isEmpty()?new In(null):new In(null,this.children);{const t=Lt(e),r=this.children.get(t);if(r){const i=r.remove(fn(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new In(null):new In(this.value,u)}return this}}get(e){if(Ut(e))return this.value;{const t=Lt(e),r=this.children.get(t);return r?r.get(fn(e)):null}}setTree(e,t){if(Ut(e))return t;{const r=Lt(e),u=(this.children.get(r)||new In(null)).setTree(fn(e),t);let d;return d=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new In(this.value,d)}}fold(e){return this.fold_(Gt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(An(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Gt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ut(e))return null;{const u=Lt(e),d=this.children.get(u);return d?d.findOnPath_(fn(e),An(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Gt(),t)}foreachOnPath_(e,t,r){if(Ut(e))return this;{this.value&&r(t,this.value);const i=Lt(e),u=this.children.get(i);return u?u.foreachOnPath_(fn(e),An(t,i),r):new In(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(An(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ko{constructor(e){this.writeTree_=e}static empty(){return new ko(new In(null))}}function ph(n,e,t){if(Ut(e))return new ko(new In(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const d=Bi(i,e);return u=u.updateChild(d,t),new ko(n.writeTree_.set(i,u))}{const i=new In(t),u=n.writeTree_.setTree(e,i);return new ko(u)}}}function ev(n,e,t){let r=n;return Vr(t,(i,u)=>{r=ph(r,An(e,i),u)}),r}function PE(n,e){if(Ut(e))return ko.empty();{const t=n.writeTree_.setTree(e,new In(null));return new ko(t)}}function OE(n,e){return null!=Ec(n,e)}function Ec(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Bi(t.path,e)):null}function em(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(En,(r,i)=>{e.push(new kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new kt(r,i.value))}),e}function Ia(n,e){if(Ut(e))return n;{const t=Ec(n,e);return new ko(null!=t?new In(t):n.writeTree_.subtree(e))}}function tv(n){return n.writeTree_.isEmpty()}function tp(n,e){return sD(Gt(),n.writeTree_,e)}function sD(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,O.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=sD(An(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(An(n,".priority"),r)),t}}function nv(n,e){return fD(e,n)}function gh(n,e){if(n.snap)return ro(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ro(An(n.path,t),e))return!0;return!1}function FE(n){return n.visible}function LE(n,e,t){let r=ko.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const d=u.path;let p;if(u.snap)ro(t,d)?(p=Bi(t,d),r=ph(r,p,u.snap)):ro(d,t)&&(p=Bi(d,t),r=ph(r,Gt(),u.snap.getChild(p)));else{if(!u.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(ro(t,d))p=Bi(t,d),r=ev(r,p,u.children);else if(ro(d,t))if(p=Bi(d,t),Ut(p))r=ev(r,Gt(),u.children);else{const _=(0,O.DV)(u.children,Lt(p));if(_){const I=_.getChild(fn(p));r=ph(r,Gt(),I)}}}}}return r}function rv(n,e,t,r,i){if(r||i){const u=Ia(n.visibleWrites,e);return!i&&tv(u)?t:i||null!=t||OE(u,Gt())?tp(LE(n.allWrites,function(I){return(I.visible||i)&&(!r||!~r.indexOf(I.writeId))&&(ro(I.path,e)||ro(e,I.path))},e),t||xt.EMPTY_NODE):null}{const u=Ec(n.visibleWrites,e);if(null!=u)return u;{const d=Ia(n.visibleWrites,e);return tv(d)?t:null!=t||OE(d,Gt())?tp(d,t||xt.EMPTY_NODE):null}}}function nm(n,e,t,r){return rv(n.writeTree,n.treePath,e,t,r)}function iv(n,e){return function tm(n,e,t){let r=xt.EMPTY_NODE;const i=Ec(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(En,(u,d)=>{r=r.updateImmediateChild(u,d)}),r;if(t){const u=Ia(n.visibleWrites,e);return t.forEachChild(En,(d,p)=>{const _=tp(Ia(u,new hn(d)),p);r=r.updateImmediateChild(d,_)}),em(u).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return em(Ia(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function sv(n,e,t,r){return function lD(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=An(e,t);if(OE(n.visibleWrites,u))return null;{const d=Ia(n.visibleWrites,u);return tv(d)?i.getChild(t):tp(d,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function rm(n,e){return function cD(n,e){return Ec(n.visibleWrites,e)}(n.writeTree,An(n.treePath,e))}function im(n,e,t){return function UE(n,e,t,r){const i=An(e,t),u=Ec(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?tp(Ia(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function sm(n,e){return fD(An(n.treePath,e),n.writeTree)}function fD(n,e){return{treePath:n,writeTree:e}}class ov{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,sh(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,Kg(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,ih(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,sh(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const gD=new class pD{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Ic{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return im(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gl(this.viewCache_),u=function VE(n,e,t,r,i,u){return function dD(n,e,t,r,i,u,d){let p;const _=Ia(n.visibleWrites,e),I=Ec(_,Gt());if(null!=I)p=I;else{if(null==t)return[];p=tp(_,t)}if(p=p.withIndex(d),p.isEmpty()||p.isLeafNode())return[];{const A=[],x=d.getCompare(),P=u?p.getReverseIteratorFrom(r,d):p.getIteratorFrom(r,d);let U=P.getNext();for(;U&&A.length<i;)0!==x(U,r)&&A.push(U),U=P.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function om(n,e,t,r,i,u){const d=e.eventCache;if(null!=rm(r,t))return e;{let p,_;if(Ut(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const I=gl(e),x=iv(r,I instanceof xt?I:xt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),x,u)}else{const I=nm(r,gl(e));p=n.filter.updateFullNode(e.eventCache.getNode(),I,u)}else{const I=Lt(t);if(".priority"===I){(0,O.hu)(1===sl(t),"Can't have a priority with additional path components");const A=d.getNode();_=e.serverCache.getNode();const x=sv(r,t,A,_);p=null!=x?n.filter.updatePriority(A,x):d.getNode()}else{const A=fn(t);let x;if(d.isCompleteForChild(I)){_=e.serverCache.getNode();const P=sv(r,t,d.getNode(),_);x=null!=P?d.getNode().getImmediateChild(I).updateChild(A,P):d.getNode().getImmediateChild(I)}else x=im(r,I,e.serverCache);p=null!=x?n.filter.updateChild(d.getNode(),I,x,A,i,u):d.getNode()}}return fh(e,p,d.isFullyInitialized()||Ut(t),n.filter.filtersNodes())}}function mh(n,e,t,r,i,u,d,p){const _=e.serverCache;let I;const A=d?n.filter:n.filter.getIndexedFilter();if(Ut(t))I=A.updateFullNode(_.getNode(),r,null);else if(A.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);I=A.updateFullNode(_.getNode(),U,null)}else{const U=Lt(t);if(!_.isCompleteForPath(t)&&sl(t)>1)return e;const W=fn(t),Ue=_.getNode().getImmediateChild(U).updateChild(W,r);I=".priority"===U?A.updatePriority(_.getNode(),Ue):A.updateChild(_.getNode(),U,Ue,W,gD,null)}const x=NE(e,I,_.isFullyInitialized()||Ut(t),A.filtersNodes());return om(n,x,t,i,new Ic(i,x,u),p)}function am(n,e,t,r,i,u,d){const p=e.eventCache;let _,I;const A=new Ic(i,e,u);if(Ut(t))I=n.filter.updateFullNode(e.eventCache.getNode(),r,d),_=fh(e,I,!0,n.filter.filtersNodes());else{const x=Lt(t);if(".priority"===x)I=n.filter.updatePriority(e.eventCache.getNode(),r),_=fh(e,I,p.isFullyInitialized(),p.isFiltered());else{const P=fn(t),U=p.getNode().getImmediateChild(x);let W;if(Ut(P))W=r;else{const Ie=A.getCompleteChild(x);W=null!=Ie?".priority"===Yf(P)&&Ie.getChild(qg(P)).isEmpty()?Ie:Ie.updateChild(P,r):xt.EMPTY_NODE}_=U.equals(W)?e:fh(e,n.filter.updateChild(p.getNode(),x,W,P,A,d),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function yD(n,e){return n.eventCache.isCompleteForChild(e)}function lv(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function um(n,e,t,r,i,u,d,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let I,_=e;I=Ut(t)?r:new In(null).setTree(t,r);const A=e.serverCache.getNode();return I.children.inorderTraversal((x,P)=>{if(A.hasChild(x)){const W=lv(0,e.serverCache.getNode().getImmediateChild(x),P);_=mh(n,_,new hn(x),W,i,u,d,p)}}),I.children.inorderTraversal((x,P)=>{const U=!e.serverCache.isCompleteForChild(x)&&void 0===P.value;if(!A.hasChild(x)&&!U){const Ie=lv(0,e.serverCache.getNode().getImmediateChild(x),P);_=mh(n,_,new hn(x),Ie,i,u,d,p)}}),_}class jE{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Y_(r.getIndex()),u=function eD(n){return n.loadsAllData()?new Y_(n.getIndex()):n.hasLimit()?new Xb(n):new _c(n)}(r);this.processor_=function BE(n){return{filter:n}}(u);const d=t.serverCache,p=t.eventCache,_=i.updateFullNode(xt.EMPTY_NODE,d.getNode(),null),I=u.updateFullNode(xt.EMPTY_NODE,p.getNode(),null),A=new vu(_,d.isFullyInitialized(),i.filtersNodes()),x=new vu(I,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=Jg(x,A),this.eventGenerator_=new SE(this.query_)}get query(){return this.query_}}function HE(n,e){const t=gl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ut(e)&&!t.getImmediateChild(Lt(e)).isEmpty())?t.getChild(e):null}function qE(n){return 0===n.eventRegistrations_.length}function hv(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(t,i);d&&r.push(d)})}if(e){let i=[];for(let u=0;u<n.eventRegistrations_.length;++u){const d=n.eventRegistrations_[u];if(d.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(u+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function lm(n,e,t,r){e.type===ni.MERGE&&null!==e.source.queryId&&((0,O.hu)(gl(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Xg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function uv(n,e,t,r,i){const u=new ov;let d,p;if(t.type===ni.OVERWRITE){const I=t;I.source.fromUser?d=am(n,e,I.path,I.snap,r,i,u):((0,O.hu)(I.source.fromServer,"Unknown source."),p=I.source.tagged||e.serverCache.isFiltered()&&!Ut(I.path),d=mh(n,e,I.path,I.snap,r,i,p,u))}else if(t.type===ni.MERGE){const I=t;I.source.fromUser?d=function _D(n,e,t,r,i,u,d){let p=e;return r.foreach((_,I)=>{const A=An(t,_);yD(e,Lt(A))&&(p=am(n,p,A,I,i,u,d))}),r.foreach((_,I)=>{const A=An(t,_);yD(e,Lt(A))||(p=am(n,p,A,I,i,u,d))}),p}(n,e,I.path,I.children,r,i,u):((0,O.hu)(I.source.fromServer,"Unknown source."),p=I.source.tagged||e.serverCache.isFiltered(),d=um(n,e,I.path,I.children,r,i,p,u))}else if(t.type===ni.ACK_USER_WRITE){const I=t;d=I.revert?function cv(n,e,t,r,i,u){let d;if(null!=rm(r,t))return e;{const p=new Ic(r,e,i),_=e.eventCache.getNode();let I;if(Ut(t)||".priority"===Lt(t)){let A;if(e.serverCache.isFullyInitialized())A=nm(r,gl(e));else{const x=e.serverCache.getNode();(0,O.hu)(x instanceof xt,"serverChildren would be complete if leaf node"),A=iv(r,x)}A=A,I=n.filter.updateFullNode(_,A,u)}else{const A=Lt(t);let x=im(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=_.getImmediateChild(A)),I=null!=x?n.filter.updateChild(_,A,x,fn(t),p,u):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(_,A,xt.EMPTY_NODE,fn(t),p,u):_,I.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=nm(r,gl(e)),d.isLeafNode()&&(I=n.filter.updateFullNode(I,d,u)))}return d=e.serverCache.isFullyInitialized()||null!=rm(r,Gt()),fh(e,I,d,n.filter.filtersNodes())}}(n,e,I.path,r,i,u):function vD(n,e,t,r,i,u,d){if(null!=rm(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Ut(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return mh(n,e,t,_.getNode().getChild(t),i,u,p,d);if(Ut(t)){let I=new In(null);return _.getNode().forEachChild(va,(A,x)=>{I=I.set(new hn(A),x)}),um(n,e,t,I,i,u,p,d)}return e}{let I=new In(null);return r.foreach((A,x)=>{const P=An(t,A);_.isCompleteForPath(P)&&(I=I.set(A,_.getNode().getChild(P)))}),um(n,e,t,I,i,u,p,d)}}(n,e,I.path,I.affectedTree,r,i,u)}else{if(t.type!==ni.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);d=function wD(n,e,t,r,i){const u=e.serverCache;return om(n,NE(e,u.getNode(),u.isFullyInitialized()||Ut(t),u.isFiltered()),t,r,gD,i)}(n,e,t.path,r,u)}const _=u.getChanges();return function mD(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=Xg(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(K_(Xg(e)))}}(e,d,_),{viewCache:d,changes:_}}(n.processor_,i,e,t,r);return function av(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,O.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,GE(n,u.changes,u.viewCache.eventCache.getNode(),null)}function GE(n,e,t,r){return function xE(n,e,t,r){const i=[],u=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(function bE(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),hh(n,i,"child_removed",e,r,t),hh(n,i,"child_added",e,r,t),hh(n,i,"child_moved",u,r,t),hh(n,i,"child_changed",e,r,t),hh(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let cm,np;class WE{constructor(){this.views=new Map}}function dm(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,O.hu)(null!=u,"SyncTree gave us an op for an invalid query."),lm(u,e,t,r)}{let u=[];for(const d of n.views.values())u=u.concat(lm(d,e,t,r));return u}}function gv(n,e,t,r,i){const d=n.views.get(e._queryIdentifier);if(!d){let p=nm(t,i?r:null),_=!1;p?_=!0:r instanceof xt?(p=iv(t,r),_=!1):(p=xt.EMPTY_NODE,_=!1);const I=Jg(new vu(p,_,!1),new vu(r,i,!1));return new jE(e,I)}return d}function mv(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wu(n,e){let t=null;for(const r of n.views.values())t=t||HE(r,e);return t}function yv(n,e){return e._queryParams.loadsAllData()?hm(n):n.views.get(e._queryIdentifier)}function ID(n,e){return null!=yv(n,e)}function ml(n){return null!=hm(n)}function hm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QE=1;class JE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new In(null),this.pendingWriteTree_=function hD(){return{visibleWrites:ko.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _v(n,e,t,r,i){return function oD(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ph(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Tc(n,new pl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function yl(n,e,t=!1){const r=function y1(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function aD(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const p=n.allWrites[d];p.visible&&(d>=t&&gh(p,r.path)?i=!1:ro(r.path,p.path)&&(u=!0)),d--}return!!i&&(u?(function uD(n){n.visibleWrites=LE(n.allWrites,FE,Gt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=PE(n.visibleWrites,r.path):Vr(r.children,_=>{n.visibleWrites=PE(n.visibleWrites,An(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new In(null);return null!=r.snap?u=u.set(Gt(),!0):Vr(r.children,d=>{u=u.set(new hn(d),!0)}),Tc(n,new _u(r.path,u,t))}return[]}function yh(n,e,t){return Tc(n,new pl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function vv(n,e,t,r){const i=e._path,u=n.syncPointTree_.get(i);let d=[];if(u&&("default"===e._queryIdentifier||ID(u,e))){const p=function YE(n,e,t,r){const i=e._queryIdentifier,u=[];let d=[];const p=ml(n);if("default"===i)for(const[_,I]of n.views.entries())d=d.concat(hv(I,t,r)),qE(I)&&(n.views.delete(_),I.query._queryParams.loadsAllData()||u.push(I.query));else{const _=n.views.get(i);_&&(d=d.concat(hv(_,t,r)),qE(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||u.push(_.query)))}return p&&!ml(n)&&u.push(new(function pv(){return(0,O.hu)(cm,"Reference.ts has not been loaded"),cm}())(e._repo,e._path)),{removed:u,events:d}}(u,e,t,r);(function zE(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;d=p.events;const I=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(x,P)=>ml(P));if(I&&!A){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const P=function DD(n){return n.fold((e,t,r)=>{if(t&&ml(t))return[hm(t)];{let i=[];return t&&(i=mv(t)),Vr(r,(u,d)=>{i=i.concat(d)}),i}})}(x);for(let U=0;U<P.length;++U){const W=P[U],Ie=W.query,Ue=iI(n,W);n.listenProvider_.startListening(rp(Ie),Ds(n,Ie),Ue.hashFn,Ue.onComplete)}}}if(!A&&_.length>0&&!r)if(I){const x=null;n.listenProvider_.stopListening(rp(e),x)}else _.forEach(x=>{const P=n.queryToTagMap.get(us(x));n.listenProvider_.stopListening(rp(x),P)});!function AD(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=us(r),u=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(u)}}}(n,_)}return d}function wv(n,e,t){const r=e._path;let i=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,P)=>{const U=Bi(x,r);i=i||wu(P,U),u=u||ml(P)});let p,d=n.syncPointTree_.get(r);d?(u=u||ml(d),i=i||wu(d,Gt())):(d=new WE,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?p=!0:(p=!1,i=xt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,U)=>{const W=wu(U,Gt());W&&(i=i.updateImmediateChild(P,W))}));const _=ID(d,e);if(!_&&!e._queryParams.loadsAllData()){const x=us(e);(0,O.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=function SD(){return QE++}();n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let A=function KE(n,e,t,r,i,u){const d=gv(n,e,r,i,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function $E(n,e){n.eventRegistrations_.push(e)}(d,t),function ED(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(En,(u,d)=>{r.push(ih(u,d))}),t.isFullyInitialized()&&r.push(K_(t.getNode())),GE(n,r,t.getNode(),e)}(d,t)}(d,e,t,nv(n.pendingWriteTree_,r),i,p);if(!_&&!u){const x=yv(d,e);A=A.concat(function Iv(n,e,t){const r=e._path,i=Ds(n,e),u=iI(n,t),d=n.listenProvider_.startListening(rp(e),i,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!ml(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((I,A,x)=>{if(!Ut(I)&&A&&ml(A))return[hm(A).query];{let P=[];return A&&(P=P.concat(mv(A).map(U=>U.query))),Vr(x,(U,W)=>{P=P.concat(W)}),P}});for(let I=0;I<_.length;++I){const A=_[I];n.listenProvider_.stopListening(rp(A),Ds(n,A))}}return d}(n,e,x))}return A}function Ev(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(d,p)=>{const I=wu(p,Bi(d,e));if(I)return I});return rv(i,e,u,t,!0)}function Tc(n,e){return Fo(e,n.syncPointTree_,null,nv(n.pendingWriteTree_,Gt()))}function Fo(n,e,t,r){if(Ut(n.path))return rI(n,e,t,r);{const i=e.get(Gt());null==t&&null!=i&&(t=wu(i,Gt()));let u=[];const d=Lt(n.path),p=n.operationForChild(d),_=e.children.get(d);if(_&&p){const I=t?t.getImmediateChild(d):null,A=sm(r,d);u=u.concat(Fo(p,_,I,A))}return i&&(u=u.concat(dm(i,n,r,t))),u}}function rI(n,e,t,r){const i=e.get(Gt());null==t&&null!=i&&(t=wu(i,Gt()));let u=[];return e.children.inorderTraversal((d,p)=>{const _=t?t.getImmediateChild(d):null,I=sm(r,d),A=n.operationForChild(d);A&&(u=u.concat(rI(A,p,_,I)))}),i&&(u=u.concat(dm(i,n,r,t))),u}function iI(n,e){const t=e.query,r=Ds(n,t);return{hashFn:()=>(function ZE(n){return n.viewCache_.serverCache.getNode()}(e)||xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function CD(n,e,t){const r=As(n,t);if(r){const i=fm(r),u=i.path,d=i.queryId,p=Bi(u,e);return pm(n,u,new dh(fl(d),p))}return[]}(n,t._path,r):function _h(n,e){return Tc(n,new dh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function c1(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return vv(n,t,null,u)}}}}function Ds(n,e){const t=us(e);return n.queryToTagMap.get(t)}function us(n){return n._path.toString()+"$"+n._queryIdentifier}function As(n,e){return n.tagToQueryMap.get(e)}function fm(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new hn(n.substr(0,e))}}function pm(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),dm(r,t,nv(n.pendingWriteTree_,e),null)}function rp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Sr(){return(0,O.hu)(np,"Reference.ts has not been loaded"),np}())(n._repo,n._path):n}class Cc{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Cc(t)}node(){return this.node_}}class Tv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=An(this.path_,e);return new Tv(this.syncTree_,t)}node(){return Ev(this.syncTree_,this.path_)}}const oI=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?aI(n[".sv"],e,t):"object"==typeof n[".sv"]?uI(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},aI=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},uI=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},ip=function(n,e,t,r){return gm(e,new Tv(t,n),r)},Cv=function(n,e,t){return gm(n,new Cc(e),t)};function gm(n,e,t){const r=n.getPriority().val(),i=oI(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const d=n,p=oI(d.getValue(),e,t);return p!==d.getValue()||i!==d.getPriority().val()?new nh(p,Xn(i)):n}{const d=n;return u=d,i!==d.getPriority().val()&&(u=u.updatePriority(new nh(i))),d.forEachChild(En,(p,_)=>{const I=gm(_,e.getImmediateChild(p),t);I!==_&&(u=u.updateImmediateChild(p,I))}),u}}class mm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vh(n,e){let t=e instanceof hn?e:new hn(e),r=n,i=Lt(t);for(;null!==i;){const u=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new mm(i,r,u),t=fn(t),i=Lt(t)}return r}function Ta(n){return n.node.value}function ym(n,e){n.node.value=e,_m(n)}function bv(n){return n.node.childCount>0}function sp(n,e){Vr(n.node.children,(t,r)=>{e(new mm(t,n,r))})}function Dv(n,e,t,r){t&&!r&&e(n),sp(n,i=>{Dv(i,e,!0,r)}),t&&r&&e(n)}function wh(n){return new hn(null===n.parent?n.name:wh(n.parent)+"/"+n.name)}function _m(n){null!==n.parent&&function xD(n,e,t){const r=function lI(n){return void 0===Ta(n)&&!bv(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_m(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_m(n))}(n.parent,n.name,n)}const RD=/[\[\].#$\/\u0000-\u001F\u007F]/,MD=/[\[\].#$\u0000-\u001F\u007F]/,Av=10485760,vm=function(n){return"string"==typeof n&&0!==n.length&&!RD.test(n)},dI=function(n){return"string"==typeof n&&0!==n.length&&!MD.test(n)},op=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!kg(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Ca=function(n,e,t,r){r&&void 0===e||ap((0,O.gK)(n,"value"),e,t)},ap=function(n,e,t){const r=t instanceof hn?new pE(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ol(r));if("function"==typeof e)throw new Error(n+"contains a function "+ol(r)+" with contents = "+e.toString());if(kg(e))throw new Error(n+"contains "+e.toString()+" "+ol(r));if("string"==typeof e&&e.length>Av/3&&(0,O.ug)(e)>Av)throw new Error(n+"contains a string greater than "+Av+" utf8 bytes "+ol(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(Vr(e,(d,p)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(u=!0,!vm(d)))throw new Error(n+" contains an invalid key ("+d+") "+ol(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gE(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),B_(n)})(r,d),ap(n,p,r),function mE(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+ol(r)+" in addition to actual children.")}},hI=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const u=[];Vr(e,(d,p)=>{const _=new hn(d);if(ap(i,p,An(t,_)),".priority"===Yf(_)&&!op(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=pc(r);for(let d=0;d<u.length;d++)if((".priority"!==u[d]||d!==u.length-1)&&!vm(u[d]))throw new Error(n+"contains an invalid key ("+u[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(V_);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ro(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,u)},Sv=function(n,e,t){if(!t||void 0!==e){if(kg(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!op(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},up=function(n,e,t,r){if(!(r&&void 0===t||vm(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lp=function(n,e,t,r){if(!(r&&void 0===t||dI(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oo=function(n,e){if(".info"===Lt(e))throw new Error(n+" failed = Can't modify data under /.info/")},fI=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vm(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dI(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class pI{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cp(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!fE(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)}function wm(n,e,t){cp(n,t),xv(n,r=>fE(r,e))}function Ss(n,e,t){cp(n,t),xv(n,r=>ro(r,e)||ro(e,r))}function xv(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(gI(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function gI(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();nl&&cr("event: "+t.toString()),jf(r)}}}const Rv="repo_interrupt";class yI{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cl(),this.transactionQueueTree_=new mm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mv(n){const t=n.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Lo(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Mv(n)})}function vI(n,e,t,r,i){n.dataUpdateCount++;const u=new hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(i)if(r){const _=(0,O.UI)(t,I=>Xn(I));d=function bD(n,e,t,r){const i=As(n,r);if(i){const u=fm(i),d=u.path,p=u.queryId,_=Bi(d,e),I=In.fromObject(t);return pm(n,d,new wc(fl(p),_,I))}return[]}(n.serverSyncTree_,u,_,i)}else{const _=Xn(t);d=function tI(n,e,t,r){const i=As(n,r);if(null!=i){const u=fm(i),d=u.path,p=u.queryId,_=Bi(d,e);return pm(n,d,new pl(fl(p),_,t))}return[]}(n.serverSyncTree_,u,_,i)}else if(r){const _=(0,O.UI)(t,I=>Xn(I));d=function eI(n,e,t){const r=In.fromObject(t);return Tc(n,new wc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=Xn(t);d=yh(n.serverSyncTree_,u,_)}let p=u;d.length>0&&(p=Dc(n,u)),Ss(n.eventQueue_,p,d)}function wI(n,e){EI(n,"connected",e),!1===e&&function v1(n){Tn(n,"onDisconnectEvents");const e=Lo(n),t=cl();ah(n.onDisconnect_,Gt(),(i,u)=>{const d=ip(i,u,n.serverSyncTree_,e);dr(t,i,d)});let r=[];ah(t,Gt(),(i,u)=>{r=r.concat(yh(n.serverSyncTree_,i,u));const d=Ac(n,i);Dc(n,d)}),n.onDisconnect_=cl(),Ss(n.eventQueue_,Gt(),r)}(n)}function EI(n,e,t){const r=new hn("/.info/"+e),i=Xn(t);n.infoData_.updateSnapshot(r,i);const u=yh(n.infoSyncTree_,r,i);Ss(n.eventQueue_,r,u)}function Ih(n){return n.nextWriteId_++}function Em(n,e,t,r,i){Tn(n,"set",{path:e.toString(),value:t,priority:r});const u=Lo(n),d=Xn(t,r),p=Ev(n.serverSyncTree_,e),_=Cv(d,p,u),I=Ih(n),A=_v(n.serverSyncTree_,e,_,I,!0);cp(n.eventQueue_,A),n.server_.put(e.toString(),d.val(!0),(P,U)=>{const W="ok"===P;W||as("set at "+e+" failed: "+P);const Ie=yl(n.serverSyncTree_,I,!W);Ss(n.eventQueue_,e,Ie),bc(0,i,P,U)});const x=Ac(n,e);Dc(n,x),Ss(n.eventQueue_,x,[])}function vt(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&yu(n.onDisconnect_,e),bc(0,t,r,i)})}function TI(n,e,t,r){const i=Xn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(u,d)=>{"ok"===u&&dr(n.onDisconnect_,e,i),bc(0,r,u,d)})}function Nv(n,e,t){let r;r=".info"===Lt(e._path)?vv(n.infoSyncTree_,e,t):vv(n.serverSyncTree_,e,t),wm(n.eventQueue_,e._path,r)}function dp(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Rv)}function Tn(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cr(t,...e)}function bc(n,e,t,r){e&&jf(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let u=i;r&&(u+=": "+r);const d=new Error(u);d.code=i,e(d)}})}function Pv(n,e,t){return Ev(n.serverSyncTree_,e,t)||xt.EMPTY_NODE}function Cm(n,e=n.transactionQueueTree_){if(e||bm(n,e),Ta(e)){const t=AI(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function bI(n,e,t){const r=t.map(I=>I.currentWriteId),i=Pv(n,e,r);let u=i;const d=i.hash();for(let I=0;I<t.length;I++){const A=t[I];(0,O.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=Bi(e,A.path);u=u.updateChild(x,A.currentOutputSnapshotRaw)}const p=u.val(!0),_=e;n.server_.put(_.toString(),p,I=>{Tn(n,"transaction put response",{path:_.toString(),status:I});let A=[];if("ok"===I){const x=[];for(let P=0;P<t.length;P++)t[P].status=2,A=A.concat(yl(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&x.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();bm(n,vh(n.transactionQueueTree_,e)),Cm(n,n.transactionQueueTree_),Ss(n.eventQueue_,e,A);for(let P=0;P<x.length;P++)jf(x[P])}else{if("datastale"===I)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{as("transaction at "+_.toString()+" failed: "+I);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=I}Dc(n,e)}},d)}(n,wh(e),t)}else bv(e)&&sp(e,t=>{Cm(n,t)})}function Dc(n,e){const t=Ov(n,e),r=wh(t);return function DI(n,e,t){if(0===e.length)return;const r=[];let i=[];const d=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],I=Bi(t,_.path);let x,A=!1;if((0,O.hu)(null!==I,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)A=!0,x=_.abortReason,i=i.concat(yl(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)A=!0,x="maxretry",i=i.concat(yl(n.serverSyncTree_,_.currentWriteId,!0));else{const P=Pv(n,_.path,d);_.currentInputSnapshot=P;const U=e[p].update(P.val());if(void 0!==U){ap("transaction failed: Data returned ",U,_.path);let W=Xn(U);"object"==typeof U&&null!=U&&(0,O.r3)(U,".priority")||(W=W.updatePriority(P.getPriority()));const Ue=_.currentWriteId,ot=Lo(n),Mt=Cv(W,P,ot);_.currentOutputSnapshotRaw=W,_.currentOutputSnapshotResolved=Mt,_.currentWriteId=Ih(n),d.splice(d.indexOf(Ue),1),i=i.concat(_v(n.serverSyncTree_,_.path,Mt,_.currentWriteId,_.applyLocally)),i=i.concat(yl(n.serverSyncTree_,Ue,!0))}else A=!0,x="nodata",i=i.concat(yl(n.serverSyncTree_,_.currentWriteId,!0))}Ss(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===x?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(x),!1,null)))}bm(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)jf(r[p]);Cm(n,n.transactionQueueTree_)}(n,AI(n,t),r),r}function Ov(n,e){let t,r=n.transactionQueueTree_;for(t=Lt(e);null!==t&&void 0===Ta(r);)r=vh(r,t),t=Lt(e=fn(e));return r}function AI(n,e){const t=[];return SI(n,e,t),t.sort((r,i)=>r.order-i.order),t}function SI(n,e,t){const r=Ta(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);sp(e,i=>{SI(n,i,t)})}function bm(n,e){const t=Ta(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ym(e,t.length>0?t:void 0)}sp(e,r=>{bm(n,r)})}function Ac(n,e){const t=wh(Ov(n,e)),r=vh(n.transactionQueueTree_,e);return function cI(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{kv(n,i)}),kv(n,r),Dv(r,i=>{kv(n,i)}),t}function kv(n,e){const t=Ta(e);if(t){const r=[];let i=[],u=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,O.hu)(u===d-1,"All SENT items should be at beginning of queue."),u=d,t[d].status=3,t[d].abortReason="set"):((0,O.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),i=i.concat(yl(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===u?ym(e,void 0):t.length=u+1,Ss(n.eventQueue_,wh(e),i);for(let d=0;d<r.length;d++)jf(r[d])}}const Th=function(n,e){const t=xI(n),r=t.namespace;return"firebase.com"===t.domain&&no(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&no("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new R_(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new hn(t.pathString)}},xI=function(n){let e="",t="",r="",i="",u="",d=!0,p="https",_=443;if("string"==typeof n){let I=n.indexOf("//");I>=0&&(p=n.substring(0,I-1),n=n.substring(I+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function LD(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(u){}e+="/"+i}return e}(n.substring(A,x)));const P=function UD(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):as(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));I=e.indexOf(":"),I>=0?(d="https"===p||"wss"===p,_=parseInt(e.substring(I+1),10)):I=e.length;const U=e.slice(0,I);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),u=r}"ns"in P&&(u=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:d,scheme:p,pathString:i,namespace:u}};class Fv{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class Lv{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class RI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ch{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return vt(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){oo("OnDisconnect.remove",this._path);const e=new O.BH;return TI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){oo("OnDisconnect.set",this._path),Ca("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return TI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){oo("OnDisconnect.setWithPriority",this._path),Ca("OnDisconnect.setWithPriority",e,this._path,!1),Sv("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function kD(n,e,t,r,i){const u=Xn(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(d,p)=>{"ok"===d&&dr(n.onDisconnect_,e,u),bc(0,i,d,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){oo("OnDisconnect.update",this._path),hI("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function FD(n,e,t,r){if((0,O.xb)(t))return cr("onDisconnect().update() called with empty data.  Don't do anything."),void bc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,u)=>{"ok"===i&&Vr(t,(d,p)=>{const _=Xn(p);dr(n.onDisconnect_,An(e,d),_)}),bc(0,r,i,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Br{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ut(this._path)?null:Yf(this._path)}get ref(){return new xs(this._repo,this._path)}get _queryIdentifier(){const e=AE(this._queryParams),t=Lg(e);return"{}"===t?"default":t}get _queryObject(){return AE(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof Br))return!1;const t=this._repo===e._repo,r=fE(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Hb(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Dm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _l(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===va){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==gu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Mo)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===En){if(null!=e&&!op(e)||null!=t&&!op(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof ep||n.getIndex()===zg,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Am(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xs extends Br{constructor(e,t){super(e,t,new Yg,!1)}get parent(){const e=qg(this._path);return null===e?null:new xs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class vl{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new hn(e),r=wl(this.ref,e);return new vl(this._node.getChild(t),r,En)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new vl(i,wl(this.ref,r),En)))}hasChild(e){const t=new hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uv(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?wl(n._root,e):n._root}function MI(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=Th(e,n._repo.repoInfo_.nodeAdmin);fI("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&no("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Uv(n,t.path.toString())}function wl(n,e){return null===Lt((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lp("child","path",t,!1)):lp("child","path",e,!1),new xs(n._repo,An(n._path,e));var t}function NI(n,e){n=(0,O.m9)(n),oo("set",n._path),Ca("set",e,n._path,!1);const t=new O.BH;return Em(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function PI(n,e){hI("update",e,n._path,!1);const t=new O.BH;return function II(n,e,t,r){Tn(n,"update",{path:e.toString(),value:t});let i=!0;const u=Lo(n),d={};if(Vr(t,(p,_)=>{i=!1,d[p]=ip(An(e,p),Xn(_),n.serverSyncTree_,u)}),i)cr("update() called with empty data.  Don't do anything."),bc(0,r,"ok",void 0);else{const p=Ih(n),_=function XE(n,e,t,r){!function kE(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ev(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=In.fromObject(t);return Tc(n,new wc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,d,p);cp(n.eventQueue_,_),n.server_.merge(e.toString(),t,(I,A)=>{const x="ok"===I;x||as("update at "+e+" failed: "+I);const P=yl(n.serverSyncTree_,p,!x),U=P.length>0?Dc(n,e):e;Ss(n.eventQueue_,U,P),bc(0,r,I,A)}),Vr(t,I=>{const A=Ac(n,An(e,I));Dc(n,A)}),Ss(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Sm(n){return function _1(n,e){const t=function nI(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(I,A)=>{const x=Bi(I,t);r=r||wu(A,x)});let i=n.syncPointTree_.get(t);i?r=r||wu(i,Gt()):(i=new WE,n.syncPointTree_=n.syncPointTree_.set(t,i));const u=null!=r,d=u?new vu(r,!0,!1):null;return function dv(n){return Xg(n.viewCache_)}(gv(i,e,nv(n.pendingWriteTree_,e._path),u?d.getNode():xt.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Xn(r).withIndex(e._queryParams.getIndex()),u=yh(n.serverSyncTree_,e._path,i);return wm(n.eventQueue_,e._path,u),Promise.resolve(i)},r=>(Tn(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,O.m9)(n))._repo,n).then(e=>new vl(e,new xs(n._repo,n._path),n._queryParams.getIndex()))}class xm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Fv("value",this,new vl(e.snapshotNode,new xs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Lv(this,e,t):null}matches(e){return e instanceof xm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Lv(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=wl(new xs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Fv(e.type,this,new vl(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Rm&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function bh(n,e,t,r,i){let u;if("object"==typeof r&&(u=void 0,i=r),"function"==typeof r&&(u=r),i&&i.onlyOnce){const _=t,I=(A,x)=>{Nv(n._repo,n,p),_(A,x)};I.userCallback=t.userCallback,I.context=t.context,t=I}const d=new RI(t,u||void 0),p="value"===e?new xm(d):new Rm(e,d);return function Im(n,e,t){let r;r=".info"===Lt(e._path)?wv(n.infoSyncTree_,e,t):wv(n.serverSyncTree_,e,t),wm(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>Nv(n._repo,n,p)}function Sc(n,e,t,r){return bh(n,"value",e,t,r)}function OI(n,e,t,r){return bh(n,"child_added",e,t,r)}function kI(n,e,t,r){return bh(n,"child_changed",e,t,r)}function FI(n,e,t,r){return bh(n,"child_moved",e,t,r)}function LI(n,e,t,r){return bh(n,"child_removed",e,t,r)}function UI(n,e,t){let r=null;const i=t?new RI(t):null;"value"===e?r=new xm(i):e&&(r=new Rm(e,i)),Nv(n._repo,n,r)}class ao{}class VI extends ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ca("endAt",this._value,e._path,!0);const t=ul(e._queryParams,this._value,this._key);if(Am(t),_l(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Br(e._repo,e._path,t,e._orderByCalled)}}class Dh extends ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ca("endBefore",this._value,e._path,!1);const t=function rD(n,e,t){let r,i;return n.index_===va?("string"==typeof e&&(e=z_(e)),i=ul(n,e,t)):(r=null==t?gu:z_(t),i=ul(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Am(t),_l(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Br(e._repo,e._path,t,e._orderByCalled)}}class Vv extends ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ca("startAt",this._value,e._path,!0);const t=Q_(e._queryParams,this._value,this._key);if(Am(t),_l(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Br(e._repo,e._path,t,e._orderByCalled)}}class BI extends ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ca("startAfter",this._value,e._path,!1);const t=function Qg(n,e,t){let r;if(n.index_===va)"string"==typeof e&&(e=W_(e)),r=Q_(n,e,t);else{let i;i=null==t?Mo:W_(t),r=Q_(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Am(t),_l(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Br(e._repo,e._path,t,e._orderByCalled)}}class jI extends ao{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Br(e._repo,e._path,function tD(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Bv extends ao{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Br(e._repo,e._path,function nD(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ZI extends ao{constructor(e){super(),this._path=e}_apply(e){Dm(e,"orderByChild");const t=new hn(this._path);if(Ut(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ep(t),i=ll(e._queryParams,r);return _l(i),new Br(e._repo,e._path,i,!0)}}class GD extends ao{_apply(e){Dm(e,"orderByKey");const t=ll(e._queryParams,va);return _l(t),new Br(e._repo,e._path,t,!0)}}class zD extends ao{_apply(e){Dm(e,"orderByPriority");const t=ll(e._queryParams,En);return _l(t),new Br(e._repo,e._path,t,!0)}}class KD extends ao{_apply(e){Dm(e,"orderByValue");const t=ll(e._queryParams,zg);return _l(t),new Br(e._repo,e._path,t,!0)}}class YD extends ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ca("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VI(this._value,this._key)._apply(new Vv(this._value,this._key)._apply(e))}}function Uo(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function fv(n){(0,O.hu)(!cm,"__referenceConstructor has already been defined"),cm=n})(xs),function TD(n){(0,O.hu)(!np,"__referenceConstructor has already been defined"),np=n}(xs);const Zv={};function GI(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||no("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,I,d=Th(u,i),p=d.repoInfo;"undefined"!=typeof process&&(I=process.env.FIREBASE_DATABASE_EMULATOR_HOST),I?(_=!0,u=`http://${I}?ns=${p.namespace}`,d=Th(u,i),p=d.repoInfo):_=!d.repoInfo.secure;const A=i&&_?new Zf(Zf.OWNER):new D_(n.name,n.options,e);fI("Invalid Firebase Database URL",d),Ut(d.path)||no("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function zI(n,e,t,r){let i=Zv[e.name];i||(i={},Zv[e.name]=i);let u=i[n.toURLString()];return u&&no("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new yI(n,false,t,r),i[n.toURLString()]=u,u}(p,n,A,new rl(n.name,t));return new tA(x,n)}class tA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _I(n,e,t){if(n.stats_=fc(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new oh(n.repoInfo_,(r,i,u,d)=>{vI(n,r,i,u,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wI(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new gc(n.repoInfo_,e,(r,i,u,d)=>{vI(n,r,i,u,d)},r=>{wI(n,r)},r=>{!function Eh(n,e){Vr(e,(t,r)=>{EI(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Qd(n,e){const t=n.toString();return il[t]||(il[t]=e()),il[t]}(n.repoInfo_,()=>new ch(n.stats_,n.server_)),n.infoData_=new Ea,n.infoSyncTree_=new JE({startListening:(r,i,u,d)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=yh(n.infoSyncTree_,r._path,_),setTimeout(()=>{d("ok")},0)),p},stopListening:()=>{}}),EI(n,"connected",!1),n.serverSyncTree_=new JE({startListening:(r,i,u,d)=>(n.server_.listen(r,u,i,(p,_)=>{const I=d(p,_);Ss(n.eventQueue_,r._path,I)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xs(this._repo,Gt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function WI(n,e){const t=Zv[e];(!t||t[n.key]!==n)&&no(`Database ${e}(${n.repoInfo_}) has already been deleted.`),dp(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&no("Cannot call "+e+" on a deleted database.")}}function Hv(n,e){Vf(n,e)}const KI={".sv":"timestamp"};class aA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}gc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},gc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function qv(n){Uf(So.SDK_VERSION),(0,So._registerComponent)(new _a.wA("database",(e,{instanceIdentifier:t})=>GI(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,So.registerVersion)(E_,"0.12.5",n),(0,So.registerVersion)(E_,"0.12.5","esm2017")}();const lA=new yt.Yd("@firebase/database-compat"),Wv=function(n){lA.warn("FIREBASE WARNING: "+n)};class hp{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),u=>r(u)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,Wv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class dA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rs{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),lp("DataSnapshot.child","path",e,!1),new Rs(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),lp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Rs(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ms(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var u;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const d=hr.getCancelAndContextArgs_("Query.on",r,i),p=(I,A)=>{t.call(d.context,new Rs(this.database,I),A)};p.userCallback=t,p.context=d.context;const _=null===(u=d.cancel)||void 0===u?void 0:u.bind(d.context);switch(e){case"value":return Sc(this._delegate,p,_),t;case"child_added":return OI(this._delegate,p,_),t;case"child_removed":return LI(this._delegate,p,_),t;case"child_changed":return kI(this._delegate,p,_),t;case"child_moved":return FI(this._delegate,p,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,UI(this._delegate,e,i)}else UI(this._delegate,e)}get(){return Sm(this._delegate).then(e=>new Rs(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const u=hr.getCancelAndContextArgs_("Query.once",r,i),d=new O.BH,p=(I,A)=>{const x=new Rs(this.database,I);t&&t.call(u.context,x,A),d.resolve(x)};p.userCallback=t,p.context=u.context;const _=I=>{u.cancel&&u.cancel.call(u.context,I),d.reject(I)};switch(e){case"value":Sc(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":OI(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":LI(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":kI(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":FI(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new hr(this.database,Uo(this._delegate,function qD(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jI(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new hr(this.database,Uo(this._delegate,function $D(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Bv(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new hr(this.database,Uo(this._delegate,function HI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lp("orderByChild","path",n,!1),new ZI(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new hr(this.database,Uo(this._delegate,function WD(){return new GD}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new hr(this.database,Uo(this._delegate,function jv(){return new zD}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new hr(this.database,Uo(this._delegate,function qI(){return new KD}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new hr(this.database,Uo(this._delegate,function ZD(n=null,e){return up("startAt","key",e,!0),new Vv(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new hr(this.database,Uo(this._delegate,function HD(n,e){return up("startAfter","key",e,!0),new BI(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new hr(this.database,Uo(this._delegate,function BD(n,e){return up("endAt","key",e,!0),new VI(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new hr(this.database,Uo(this._delegate,function jD(n,e){return up("endBefore","key",e,!0),new Dh(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new hr(this.database,Uo(this._delegate,function QD(n,e){return up("equalTo","key",e,!0),new YD(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof hr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ms(this.database,new xs(this._delegate._repo,this._delegate._path))}}class Ms extends hr{constructor(e,t){super(e,new Br(t._repo,t._path,new Yg,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ms(this.database,wl(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ms(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Ms(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=NI(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,Wv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oo("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=PI(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function T1(n,e,t){if(oo("setWithPriority",n._path),Ca("setWithPriority",e,n._path,!1),Sv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return Em(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),u=>r(u)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function E1(n){return oo("remove",n._path),NI(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Gv(n,e,t){var r;if(n=(0,O.m9)(n),oo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new O.BH,p=Sc(n,()=>{});return function CI(n,e,t,r,i,u){Tn(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:T_(),applyLocally:u,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=Pv(n,e,void 0);d.currentInputSnapshot=p;const _=d.update(p.val());if(void 0===_)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{ap("transaction failed: Data returned ",_,d.path),d.status=0;const I=vh(n.transactionQueueTree_,e),A=Ta(I)||[];let x;A.push(d),ym(I,A),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(x=(0,O.DV)(_,".priority"),(0,O.hu)(op(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(Ev(n.serverSyncTree_,e)||xt.EMPTY_NODE).getPriority().val();const P=Lo(n),U=Xn(_,x),W=Cv(U,p,P);d.currentOutputSnapshotRaw=U,d.currentOutputSnapshotResolved=W,d.currentWriteId=Ih(n);const Ie=_v(n.serverSyncTree_,e,W,d.currentWriteId,d.applyLocally);Ss(n.eventQueue_,e,Ie),Cm(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,I,A)=>{let x=null;_?u.reject(_):(x=new vl(A,new xs(n._repo,n._path),En),u.resolve(new aA(I,x)))},p,i),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new dA(u.committed,new Rs(this.database,u.snapshot)));return t&&i.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function I1(n,e){n=(0,O.m9)(n),oo("setPriority",n._path),Sv("setPriority",e,!1);const t=new O.BH;return Em(n._repo,An(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function VD(n,e){n=(0,O.m9)(n),oo("push",n._path),Ca("push",e,n._path,!0);const t=Mv(n._repo),r=m1(t),i=wl(n,r),u=wl(n,r);let d;return d=null!=e?NI(u,e).then(()=>u):Promise.resolve(u),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,e),i=r.then(d=>new Ms(this.database,d));t&&i.then(()=>t(null),d=>t(d));const u=new Ms(this.database,r);return u.then=i.then.bind(i),u.catch=i.catch.bind(i,void 0),u}onDisconnect(){return oo("Reference.onDisconnect",this._delegate._path),new hp(new Ch(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Mm{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function rA(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&no("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let u;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&no('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Zf(Zf.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);u=new Zf(d)}!function XD(n,e,t,r){n.repoInfo_=new R_(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Ms){const t=MI(this._delegate,e.toString());return new Ms(this,t)}{const t=Uv(this._delegate,e);return new Ms(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=MI(this._delegate,e);return new Ms(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function iA(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),dp(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function sA(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function Tm(n){n.persistentConnection_&&n.persistentConnection_.resume(Rv)}(n._repo)}(this._delegate)}}Mm.ServerValue={TIMESTAMP:function $v(){return KI}(),increment:n=>function oA(n){return{".sv":{increment:n}}}(n)};var hA=Object.freeze({__proto__:null,initStandalone:function QI({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:u=!1}){Uf(t);const d=new _a.zt("auth-internal",new _a.H0("database-standalone"));return d.setComponent(new _a.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Mm(GI(n,d,void 0,e,u),n),namespace:i}}});const fA=Mm.ServerValue;!function pA(n){n.INTERNAL.registerComponent(new _a.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Mm(i,r)},"PUBLIC").setServiceProps({Reference:Ms,Query:hr,Database:Mm,DataSnapshot:Rs,enableLogging:Hv,INTERNAL:hA,ServerValue:fA}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(qw.Z);var Nm=k(5363),JI=k(6063);class XI extends $s.x{constructor(e=1/0,t=1/0,r=JI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!i&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const d=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)p=_;p&&r.splice(0,p+1)}}}function Pm(n,e,t){var r,i;let u,d=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,d=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,w_.B)({connector:()=>new XI(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}function fp(n,e){return(0,an.m)(e)?vn(()=>n,e):vn(()=>n)}var xc=k(9468);k(5867);const Kv=new Map,N1={activated:!1,tokenObservers:[]},rT={initialized:!1,enabled:!1};function _r(n){return Kv.get(n)||N1}function Vo(n,e){Kv.set(n,e)}function Om(){return rT}class TA{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function CA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ci=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Qv(n){if(!_r(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function Jv(n,e){return Xv.apply(this,arguments)}function Xv(){return(Xv=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,u)}catch(x){throw ci.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw ci.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(x){throw ci.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const I=1e3*Number(_[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+I,issuedAtTimeMillis:A}})).apply(this,arguments)}function AA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const wp="firebase-app-check-store";let Ns=null;function oT(){return Ns||(Ns=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ci.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wp,{keyPath:"compositeKey"})}}catch(t){e(ci.create("storage-open",{originalErrorMessage:t.message}))}}),Ns)}function Ah(){return(Ah=(0,ve.Z)(function*(n,e){const r=(yield oT()).transaction(wp,"readwrite"),u=r.objectStore(wp).put({compositeKey:n,value:e});return new Promise((d,p)=>{u.onsuccess=_=>{d()},r.onerror=_=>{var I;p(ci.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Sh=new yt.Yd("@firebase/app-check");function n0(n,e){return(0,O.hl)()?function Ep(n,e){return function aT(n,e){return Ah.apply(this,arguments)}(function uT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NA(){return Om().enabled}function Um(){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,ve.Z)(function*(){const n=Om();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const s0={error:"UNKNOWN_ERROR"};function o0(n){return O.US.encodeString(JSON.stringify(n),!1)}function Vm(n){return a0.apply(this,arguments)}function a0(){return(a0=(0,ve.Z)(function*(n,e=!1){const t=n.app;Qv(t);const r=_r(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Bm(_)&&(i=_)}if(!e&&i&&Bm(i))return{token:i.token};let p,d=!1;if(NA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Jv(AA(t,yield Um()),n.platformLoggerProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),d=!0);const _=yield r.exchangeTokenPromise;return yield n0(t,_),Vo(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Sh.warn(_.message):Sh.error(_),u=_}return i?(p={token:i.token},Vo(t,Object.assign(Object.assign({},r),{token:i})),yield n0(t,i)):p=dT(u),d&&h0(t,p),p})).apply(this,arguments)}function l0(n,e){const t=_r(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Vo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function c0(n){const{app:e}=n,t=_r(e);let r=t.tokenRefresher;r||(r=function d0(n){const{app:e}=n;return new TA((0,ve.Z)(function*(){let r;if(r=_r(e).token?yield Vm(n,!0):yield Vm(n),r.error)throw r.error}),()=>!0,()=>{const t=_r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Vo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function h0(n,e){const t=_r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Bm(n){return n.expireTimeMillis-Date.now()>0}function dT(n){return{token:o0(s0),error:n}}class hT{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=_r(this.app);for(const t of e)l0(this.app,t.next);return Promise.resolve()}}const bp="app-check-internal";!function ET(){(0,So._registerComponent)(new _a.wA("app-check",n=>function PA(n,e){return new hT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bp).initialize()})),(0,So._registerComponent)(new _a.wA(bp,n=>function fT(n){return{getToken:e=>Vm(n,e),addTokenListener:e=>function u0(n,e,t,r){const{app:i}=n,u=_r(i),d={next:t,error:r,type:e};if(Vo(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Bm(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),c0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>c0(n))}(n,"INTERNAL",e),removeTokenListener:e=>l0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,So.registerVersion)("@firebase/app-check","0.5.3")}();class Rh{constructor(){return(0,Mn.vb)("app-check")}}"undefined"!=typeof window&&window;var bT=k(127);const y0=new l.OlP("angularfire2.auth.use-emulator"),DT=new l.OlP("angularfire2.auth.settings"),$m=new l.OlP("angularfire2.auth.tenant-id"),AT=new l.OlP("angularfire2.auth.langugage-code"),ST=new l.OlP("angularfire2.auth.use-device-language"),xT=new l.OlP("angularfire.auth.persistence"),RT=(n,e,t,r,i,u,d,p)=>(0,Vi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),d)for(const[I,A]of Object.entries(d))_.settings[I]=A;return p&&_.setPersistence(p),_},[t,r,i,u,d,p]);let MT=(()=>{class n{constructor(t,r,i,u,d,p,_,I,A,x,P,U){const W=new $s.x,Ie=_t(void 0).pipe((0,Nm.Q)(d.outsideAngular),vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,wt.U)(()=>(0,Vi.on)(t,u,r)),(0,wt.U)(Ue=>RT(Ue,u,p,I,A,x,_,P)),Pm({bufferSize:1,refCount:!1}));if(Ua(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_t(null);else{Ie.pipe(Ks()).subscribe();const ot=Ie.pipe(vn(Ot=>Ot.getRedirectResult().then(Zn=>Zn,()=>null)),Mn.iC,Pm({bufferSize:1,refCount:!1})),Mt=Ie.pipe(vn(Ot=>new Xr.y(Zn=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(bu=>Zn.next(bu),bu=>Zn.error(bu),()=>Zn.complete()))})))),Jt=Ie.pipe(vn(Ot=>new Xr.y(Zn=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(bu=>Zn.next(bu),bu=>Zn.error(bu),()=>Zn.complete()))}))));this.authState=ot.pipe(fp(Mt),(0,xc.R)(d.outsideAngular),(0,Nm.Q)(d.insideAngular)),this.user=ot.pipe(fp(Jt),(0,xc.R)(d.outsideAngular),(0,Nm.Q)(d.insideAngular)),this.idToken=this.user.pipe(vn(Ot=>Ot?(0,_n.D)(Ot.getIdToken()):_t(null))),this.idTokenResult=this.user.pipe(vn(Ot=>Ot?(0,_n.D)(Ot.getIdTokenResult()):_t(null))),this.credential=(0,v_.T)(ot,W,this.authState.pipe(Ar(Ot=>!Ot))).pipe((0,wt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,xc.R)(d.outsideAngular),(0,Nm.Q)(d.insideAngular))}return(0,Vi.pX)(this,Ie,u,{spy:{apply:(Ue,ot,Mt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Mt.then(Jt=>W.next(Jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vi.Dh),l.LFG(Vi.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(y0,8),l.LFG(DT,8),l.LFG($m,8),l.LFG(AT,8),l.LFG(ST,8),l.LFG(xT,8),l.LFG(Rh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ap(n){return null==n}function KA(n){return"function"==typeof n.set}function Gm(n,e){return KA(e)?e:n.ref(e)}function Mc(n,e){if(function L1(n){return"string"==typeof n}(n))return e.stringCase();if(KA(n))return e.firebaseCase();if(function U1(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Mh(n,e,t="on",r=__.z){return new Xr.y(i=>{let u=null;return u=n[t](e,(d,p)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,wt.U)(i=>{const{snapshot:u,prevKey:d}=i;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:d,key:p}}),(0,w_.B)())}function NT(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function PT(n,e){const{payload:t,prevKey:r,key:i}=e,u=NT(n,i),d=function _0(n,e){if(Ap(e))return 0;{const t=NT(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const I={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,I],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(d,0,p),n}return n;default:return n}}function v0(n){return(Ap(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function w0(n,e,t){return function YA(n,e,t){return Mh(n,"value","once",t).pipe(vn(r=>{const i=[_t(r)];return e.forEach(u=>i.push(Mh(n,u,"on",t))),(0,v_.T)(...i).pipe(oi(PT,[]))}),Zw())}(n,e=v0(e),t)}function QA(n,e,t){const r=(e=v0(e)).map(i=>Mh(n,i,"on",t));return(0,v_.T)(...r)}function JA(n,e){return function(r,i){return Mc(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function V1(n){return function(t){return t?Mc(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function FT(n,e){return function(){return Mh(n,"value","on",e)}}const XA=new l.OlP("angularfire2.realtimeDatabaseURL"),j1=new l.OlP("angularfire2.database.use-emulator");let eS=(()=>{class n{constructor(t,r,i,u,d,p,_,I,A,x,P,U,W,Ie,Ue){this.schedulers=p;const ot=_,Mt=(0,Vi.on)(t,d,r);I&&RT(Mt,d,A,P,U,W,x,Ie),this.database=(0,Vi.cc)(`${Mt.name}.database.${i}`,"AngularFireDatabase",Mt.name,()=>{const Jt=d.runOutsideAngular(()=>Mt.database(i||void 0));return ot&&Jt.useEmulator(...ot),Jt},[ot])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Gm(this.database,t));let u=i;return r&&(u=r(i)),function B1(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:JA(r,"update"),set:JA(r,"set"),push:i=>r.push(i),remove:V1(r),snapshotChanges:i=>w0(n,i,t).pipe(Mn.iC),stateChanges:i=>QA(n,i,t).pipe(Mn.iC),auditTrail:i=>function OT(n,e,t){return function kT(n,e,t){return function Wm(n,e){return Mh(n,"value","on",e).pipe((0,wt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Db(...n){const e=(0,Dn.jO)(n);return(0,jt.e)((t,r)=>{const i=n.length,u=new Array(i);let d=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,la.Xf)(n[_]).subscribe(new Ln.Q(r,I=>{u[_]=I,!p&&!d[_]&&(d[_]=!0,(p=d.every(Gs.y))&&(d=null))},Ao.Z));t.subscribe(new Ln.Q(r,_=>{if(p){const I=[_,...u];r.next(e?e(...I):I)}}))})}(e),(0,wt.U)(([i,u])=>{const d=i.lastKeyToLoad,p=u.map(_=>_.key);return{actions:u,lastKeyToLoad:d,loadedKeys:p}}),function Hw(n){return(0,jt.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Ln.Q(t,u=>(r||(r=!n(u,i++)))&&t.next(u)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,wt.U)(i=>i.actions))}(n,QA(n,e).pipe(oi((i,u)=>[...i,u],[])),t)}(n,i,t).pipe(Mn.iC),valueChanges:(i,u)=>w0(n,i,t).pipe((0,wt.U)(p=>p.map(_=>u&&u.idField?Object.assign(Object.assign({},_.payload.val()),{[u.idField]:_.key}):_.payload.val())),Mn.iC)}}(u,this)}object(t){return function E0(n,e){return{query:n,snapshotChanges:()=>FT(n,e.schedulers.outsideAngular)().pipe(Mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>FT(n,e.schedulers.outsideAngular)().pipe(Mn.iC,(0,wt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Gm(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vi.Dh),l.LFG(Vi.xv,8),l.LFG(XA,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(j1,8),l.LFG(MT,8),l.LFG(y0,8),l.LFG(DT,8),l.LFG($m,8),l.LFG(AT,8),l.LFG(ST,8),l.LFG(xT,8),l.LFG(Rh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tS=(()=>{class n{constructor(t){this.db=t}getStory(){return this.db.list("stories").valueChanges()}getStorys(t){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(eS))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-FilterBar"]],decls:520,vars:0,consts:[[1,"position-absolute","top-1","end-0"],[1,"flex-shrink-0","p-3",2,"width","400px","background-color","rgb(206, 205, 205)"],["href","/",1,"d-flex","align-items-center","pb-3","mb-3","link-dark","text-decoration-none","border-bottom"],["width","30","height","24",1,"bi","me-2"],[0,"xlink","href","#bootstrap"],[1,"d-grid","gap-2","col-6","mx-auto"],["type","button",1,"btn","btn-outline-dark"],["aria-label","Default select example",1,"form-select"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseWidthExample","aria-expanded","false","aria-controls","collapseWidthExample",1,"btn","btn-grey"],["id","collapseWidthExample",1,"collapse"],[1,"list-group"],[1,"list-group-item","list-group-item-dark"],["type","checkbox","value","","aria-label","...",1,"form-check-input","me-1"],[1,"input-group","input-group-sm","mb-3"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","aria-label","Sizing example input","aria-describedby","inputGroup-sizing-sm",1,"form-control"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"a",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"use",4),l.qZA(),l.kcU(),l.TgZ(5,"div",5),l.TgZ(6,"button",6),l._uU(7,"Search and filter"),l.qZA(),l.qZA(),l.qZA(),l._uU(8," Sort By "),l.TgZ(9,"select",7),l.TgZ(10,"option",8),l._uU(11,"Author"),l.qZA(),l.TgZ(12,"option",9),l._uU(13,"Title"),l.qZA(),l.TgZ(14,"option",10),l._uU(15,"Date Posted"),l.qZA(),l.TgZ(16,"option",11),l._uU(17,"Date Updated"),l.qZA(),l.TgZ(18,"option",12),l._uU(19,"Word Count"),l.qZA(),l.TgZ(20,"option",13),l._uU(21,"Hits"),l.qZA(),l.TgZ(22,"option",14),l._uU(23,"Kudos"),l.qZA(),l.TgZ(24,"option",15),l._uU(25,"Comments"),l.qZA(),l.TgZ(26,"option",16),l._uU(27,"Bookmarks"),l.qZA(),l.qZA(),l._UZ(28,"p"),l.TgZ(29,"h6"),l._uU(30,"Include"),l.qZA(),l.TgZ(31,"p"),l.TgZ(32,"button",17),l._uU(33," Ratings "),l.qZA(),l.qZA(),l.TgZ(34,"div",18),l.TgZ(35,"ul",19),l.TgZ(36,"li",20),l._UZ(37,"input",21),l._uU(38," General Audiences (23950) "),l.qZA(),l.TgZ(39,"li",20),l._UZ(40,"input",21),l._uU(41," Teen And Up Audiences (14799) "),l.qZA(),l.TgZ(42,"li",20),l._UZ(43,"input",21),l._uU(44," Not Rated (2860) "),l.qZA(),l.TgZ(45,"li",20),l._UZ(46,"input",21),l._uU(47," Mature (2632) "),l.qZA(),l.TgZ(48,"li",20),l._UZ(49,"input",21),l._uU(50," Explicit (526) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"p"),l.TgZ(52,"button",17),l._uU(53," Warnings "),l.qZA(),l.qZA(),l.TgZ(54,"div",18),l.TgZ(55,"ul",19),l.TgZ(56,"li",20),l._UZ(57,"input",21),l._uU(58," No Archive Warnings Apply (30531) "),l.qZA(),l.TgZ(59,"li",20),l._UZ(60,"input",21),l._uU(61," Creator Chose Not To Use Archive Warnings (10479) "),l.qZA(),l.TgZ(62,"li",20),l._UZ(63,"input",21),l._uU(64," Major Character Death (3401) "),l.qZA(),l.TgZ(65,"li",20),l._UZ(66,"input",21),l._uU(67," Graphic Depictions Of Violence (2030) "),l.qZA(),l.TgZ(68,"li",20),l._UZ(69,"input",21),l._uU(70," Underage (403) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(71,"p"),l.TgZ(72,"button",17),l._uU(73," Catagories "),l.qZA(),l.qZA(),l.TgZ(74,"div",18),l.TgZ(75,"ul",19),l.TgZ(76,"li",20),l._UZ(77,"input",21),l._uU(78," Gen (19066) "),l.qZA(),l.TgZ(79,"li",20),l._UZ(80,"input",21),l._uU(81," F/M (1666) "),l.qZA(),l.TgZ(82,"li",20),l._UZ(83,"input",21),l._uU(84," M/M (1208) "),l.qZA(),l.TgZ(85,"li",20),l._UZ(86,"input",21),l._uU(87," F/F (196) "),l.qZA(),l.TgZ(88,"li",20),l._UZ(89,"input",21),l._uU(90," Other (191) "),l.qZA(),l.TgZ(91,"li",20),l._UZ(92,"input",21),l._uU(93," Multi (137) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(94,"p"),l.TgZ(95,"button",17),l._uU(96," Fandoms "),l.qZA(),l.qZA(),l.TgZ(97,"div",18),l.TgZ(98,"ul",19),l.TgZ(99,"li",20),l._UZ(100,"input",21),l._uU(101," Harry Potter - J. K. Rowling (18538) "),l.qZA(),l.TgZ(102,"li",20),l._UZ(103,"input",21),l._uU(104," Fantastic Beasts and Where to Find Them (Movies) (1338) "),l.qZA(),l.TgZ(105,"li",20),l._UZ(106,"input",21),l._uU(107," Harry Potter and the Cursed Child - Thorne & Rowling (545) "),l.qZA(),l.TgZ(108,"li",20),l._UZ(109,"input",21),l._uU(110," Marvel Cinematic Universe (463) "),l.qZA(),l.TgZ(111,"li",20),l._UZ(112,"input",21),l._uU(113," Sherlock (TV) (400) "),l.qZA(),l.TgZ(114,"li",20),l._UZ(115,"input",21),l._uU(116," Supernatural (343) "),l.qZA(),l.TgZ(117,"li",20),l._UZ(118,"input",21),l._uU(119," The Avengers (Marvel Movies) (306) "),l.qZA(),l.TgZ(120,"li",20),l._UZ(121,"input",21),l._uU(122," Buffy the Vampire Slayer (TV) (293) "),l.qZA(),l.TgZ(123,"li",20),l._UZ(124,"input",21),l._uU(125," Merlin (TV) (265) "),l.qZA(),l.TgZ(126,"li",20),l._UZ(127,"input",21),l._uU(128," Naruto (209) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(129,"p"),l.TgZ(130,"button",17),l._uU(131," Characters "),l.qZA(),l.qZA(),l.TgZ(132,"div",18),l.TgZ(133,"ul",19),l.TgZ(134,"li",20),l._UZ(135,"input",21),l._uU(136," Harry Potter (16701) "),l.qZA(),l.TgZ(137,"li",20),l._UZ(138,"input",21),l._uU(139," Hermione Granger (8516) "),l.qZA(),l.TgZ(140,"li",20),l._UZ(141,"input",21),l._uU(142," Severus Snape (7719) "),l.qZA(),l.TgZ(143,"li",20),l._UZ(144,"input",21),l._uU(145," Sirius Black (7097) "),l.qZA(),l.TgZ(146,"li",20),l._UZ(147,"input",21),l._uU(148," Ron Weasley (6374) "),l.qZA(),l.TgZ(149,"li",20),l._UZ(150,"input",21),l._uU(151," Remus Lupin (6081) "),l.qZA(),l.TgZ(152,"li",20),l._UZ(153,"input",21),l._uU(154," Draco Malfoy (6023) "),l.qZA(),l.TgZ(155,"li",20),l._UZ(156,"input",21),l._uU(157," James Potter (4420) "),l.qZA(),l.TgZ(158,"li",20),l._UZ(159,"input",21),l._uU(160," Albus Dumbledore (4399) "),l.qZA(),l.TgZ(161,"li",20),l._UZ(162,"input",21),l._uU(163," Lily Evans Potter (3770) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(164,"p"),l.TgZ(165,"button",17),l._uU(166," Relationships "),l.qZA(),l.qZA(),l.TgZ(167,"div",18),l.TgZ(168,"ul",19),l.TgZ(169,"li",20),l._UZ(170,"input",21),l._uU(171," James Potter/Lily Evans Potter (1598) "),l.qZA(),l.TgZ(172,"li",20),l._UZ(173,"input",21),l._uU(174," Sirius Black/Remus Lupin (1480) "),l.qZA(),l.TgZ(175,"li",20),l._UZ(176,"input",21),l._uU(177," Harry Potter/Ginny Weasley (1314) "),l.qZA(),l.TgZ(178,"li",20),l._UZ(179,"input",21),l._uU(180," Draco Malfoy/Harry Potter (1297) "),l.qZA(),l.TgZ(181,"li",20),l._UZ(182,"input",21),l._uU(183," Hermione Granger/Ron Weasley (1260) "),l.qZA(),l.TgZ(184,"li",20),l._UZ(185,"input",21),l._uU(186," Regulus Black & Sirius Black (576) "),l.qZA(),l.TgZ(187,"li",20),l._UZ(188,"input",21),l._uU(189," Hermione Granger & Harry Potter & Ron Weasley (572) "),l.qZA(),l.TgZ(190,"li",20),l._UZ(191,"input",21),l._uU(192," Harry Potter & Severus Snape (549) "),l.qZA(),l.TgZ(193,"li",20),l._UZ(194,"input",21),l._uU(195," Sirius Black & James Potter (498) "),l.qZA(),l.TgZ(196,"li",20),l._UZ(197,"input",21),l._uU(198," Sirius Black & Remus Lupin & Peter Pettigrew & James Potter (453) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(199,"p"),l.TgZ(200,"button",17),l._uU(201," Additional Tags "),l.qZA(),l.qZA(),l.TgZ(202,"div",18),l.TgZ(203,"ul",19),l.TgZ(204,"li",20),l._UZ(205,"input",21),l._uU(206," Angst (3816) "),l.qZA(),l.TgZ(207,"li",20),l._UZ(208,"input",21),l._uU(209," Friendship (2890) "),l.qZA(),l.TgZ(210,"li",20),l._UZ(211,"input",21),l._uU(212," Humor (2645) "),l.qZA(),l.TgZ(213,"li",20),l._UZ(214,"input",21),l._uU(215," Alternate Universe - Canon Divergence (2485) "),l.qZA(),l.TgZ(216,"li",20),l._UZ(217,"input",21),l._uU(218," Alternate Universe (2278) "),l.qZA(),l.TgZ(219,"li",20),l._UZ(220,"input",21),l._uU(221," Fluff (2233) "),l.qZA(),l.TgZ(222,"li",20),l._UZ(223,"input",21),l._uU(224," Drabble (1936) "),l.qZA(),l.TgZ(225,"li",20),l._UZ(226,"input",21),l._uU(227," Marauders Era (Harry Potter) (1806) "),l.qZA(),l.TgZ(228,"li",20),l._UZ(229,"input",21),l._uU(230," Crossover (1767) "),l.qZA(),l.TgZ(231,"li",20),l._UZ(232,"input",21),l._uU(233," One Shot (1720) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(234,"p"),l._uU(235," Other Tags to include\n"),l.qZA(),l.TgZ(236,"div",22),l._UZ(237,"span",23),l._UZ(238,"input",24),l.qZA(),l._UZ(239,"p"),l.TgZ(240,"h6"),l._uU(241,"Exclude"),l.qZA(),l.TgZ(242,"p"),l.TgZ(243,"button",17),l._uU(244," Ratings "),l.qZA(),l.qZA(),l.TgZ(245,"div",18),l.TgZ(246,"ul",19),l.TgZ(247,"li",20),l._UZ(248,"input",21),l._uU(249," General Audiences (23950) "),l.qZA(),l.TgZ(250,"li",20),l._UZ(251,"input",21),l._uU(252," Teen And Up Audiences (14799) "),l.qZA(),l.TgZ(253,"li",20),l._UZ(254,"input",21),l._uU(255," Not Rated (2860) "),l.qZA(),l.TgZ(256,"li",20),l._UZ(257,"input",21),l._uU(258," Mature (2632) "),l.qZA(),l.TgZ(259,"li",20),l._UZ(260,"input",21),l._uU(261," Explicit (526) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(262,"p"),l.TgZ(263,"button",17),l._uU(264," Warnings "),l.qZA(),l.qZA(),l.TgZ(265,"div",18),l.TgZ(266,"ul",19),l.TgZ(267,"li",20),l._UZ(268,"input",21),l._uU(269," No Archive Warnings Apply (30531) "),l.qZA(),l.TgZ(270,"li",20),l._UZ(271,"input",21),l._uU(272," Creator Chose Not To Use Archive Warnings (10479) "),l.qZA(),l.TgZ(273,"li",20),l._UZ(274,"input",21),l._uU(275," Major Character Death (3401) "),l.qZA(),l.TgZ(276,"li",20),l._UZ(277,"input",21),l._uU(278," Graphic Depictions Of Violence (2030) "),l.qZA(),l.TgZ(279,"li",20),l._UZ(280,"input",21),l._uU(281," Underage (403) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(282,"p"),l.TgZ(283,"button",17),l._uU(284," Catagories "),l.qZA(),l.qZA(),l.TgZ(285,"div",18),l.TgZ(286,"ul",19),l.TgZ(287,"li",20),l._UZ(288,"input",21),l._uU(289," Gen (19066) "),l.qZA(),l.TgZ(290,"li",20),l._UZ(291,"input",21),l._uU(292," F/M (1666) "),l.qZA(),l.TgZ(293,"li",20),l._UZ(294,"input",21),l._uU(295," M/M (1208) "),l.qZA(),l.TgZ(296,"li",20),l._UZ(297,"input",21),l._uU(298," F/F (196) "),l.qZA(),l.TgZ(299,"li",20),l._UZ(300,"input",21),l._uU(301," Other (191) "),l.qZA(),l.TgZ(302,"li",20),l._UZ(303,"input",21),l._uU(304," Multi (137) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(305,"p"),l.TgZ(306,"button",17),l._uU(307," Fandoms "),l.qZA(),l.qZA(),l.TgZ(308,"div",18),l.TgZ(309,"ul",19),l.TgZ(310,"li",20),l._UZ(311,"input",21),l._uU(312," Harry Potter - J. K. Rowling (18538) "),l.qZA(),l.TgZ(313,"li",20),l._UZ(314,"input",21),l._uU(315," Fantastic Beasts and Where to Find Them (Movies) (1338) "),l.qZA(),l.TgZ(316,"li",20),l._UZ(317,"input",21),l._uU(318," Harry Potter and the Cursed Child - Thorne & Rowling (545) "),l.qZA(),l.TgZ(319,"li",20),l._UZ(320,"input",21),l._uU(321," Marvel Cinematic Universe (463) "),l.qZA(),l.TgZ(322,"li",20),l._UZ(323,"input",21),l._uU(324," Sherlock (TV) (400) "),l.qZA(),l.TgZ(325,"li",20),l._UZ(326,"input",21),l._uU(327," Supernatural (343) "),l.qZA(),l.TgZ(328,"li",20),l._UZ(329,"input",21),l._uU(330," The Avengers (Marvel Movies) (306) "),l.qZA(),l.TgZ(331,"li",20),l._UZ(332,"input",21),l._uU(333," Buffy the Vampire Slayer (TV) (293) "),l.qZA(),l.TgZ(334,"li",20),l._UZ(335,"input",21),l._uU(336," Merlin (TV) (265) "),l.qZA(),l.TgZ(337,"li",20),l._UZ(338,"input",21),l._uU(339," Naruto (209) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(340,"p"),l.TgZ(341,"button",17),l._uU(342," Characters "),l.qZA(),l.qZA(),l.TgZ(343,"div",18),l.TgZ(344,"ul",19),l.TgZ(345,"li",20),l._UZ(346,"input",21),l._uU(347," Harry Potter (16701) "),l.qZA(),l.TgZ(348,"li",20),l._UZ(349,"input",21),l._uU(350," Hermione Granger (8516) "),l.qZA(),l.TgZ(351,"li",20),l._UZ(352,"input",21),l._uU(353," Severus Snape (7719) "),l.qZA(),l.TgZ(354,"li",20),l._UZ(355,"input",21),l._uU(356," Sirius Black (7097) "),l.qZA(),l.TgZ(357,"li",20),l._UZ(358,"input",21),l._uU(359," Ron Weasley (6374) "),l.qZA(),l.TgZ(360,"li",20),l._UZ(361,"input",21),l._uU(362," Remus Lupin (6081) "),l.qZA(),l.TgZ(363,"li",20),l._UZ(364,"input",21),l._uU(365," Draco Malfoy (6023) "),l.qZA(),l.TgZ(366,"li",20),l._UZ(367,"input",21),l._uU(368," James Potter (4420) "),l.qZA(),l.TgZ(369,"li",20),l._UZ(370,"input",21),l._uU(371," Albus Dumbledore (4399) "),l.qZA(),l.TgZ(372,"li",20),l._UZ(373,"input",21),l._uU(374," Lily Evans Potter (3770) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(375,"p"),l.TgZ(376,"button",17),l._uU(377," Relationships "),l.qZA(),l.qZA(),l.TgZ(378,"div",18),l.TgZ(379,"ul",19),l.TgZ(380,"li",20),l._UZ(381,"input",21),l._uU(382," James Potter/Lily Evans Potter (1598) "),l.qZA(),l.TgZ(383,"li",20),l._UZ(384,"input",21),l._uU(385," Sirius Black/Remus Lupin (1480) "),l.qZA(),l.TgZ(386,"li",20),l._UZ(387,"input",21),l._uU(388," Harry Potter/Ginny Weasley (1314) "),l.qZA(),l.TgZ(389,"li",20),l._UZ(390,"input",21),l._uU(391," Draco Malfoy/Harry Potter (1297) "),l.qZA(),l.TgZ(392,"li",20),l._UZ(393,"input",21),l._uU(394," Hermione Granger/Ron Weasley (1260) "),l.qZA(),l.TgZ(395,"li",20),l._UZ(396,"input",21),l._uU(397," Regulus Black & Sirius Black (576) "),l.qZA(),l.TgZ(398,"li",20),l._UZ(399,"input",21),l._uU(400," Hermione Granger & Harry Potter & Ron Weasley (572) "),l.qZA(),l.TgZ(401,"li",20),l._UZ(402,"input",21),l._uU(403," Harry Potter & Severus Snape (549) "),l.qZA(),l.TgZ(404,"li",20),l._UZ(405,"input",21),l._uU(406," Sirius Black & James Potter (498) "),l.qZA(),l.TgZ(407,"li",20),l._UZ(408,"input",21),l._uU(409," Sirius Black & Remus Lupin & Peter Pettigrew & James Potter (453) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(410,"p"),l.TgZ(411,"button",17),l._uU(412," Additional Tags "),l.qZA(),l.qZA(),l.TgZ(413,"div",18),l.TgZ(414,"ul",19),l.TgZ(415,"li",20),l._UZ(416,"input",21),l._uU(417," Angst (3816) "),l.qZA(),l.TgZ(418,"li",20),l._UZ(419,"input",21),l._uU(420," Friendship (2890) "),l.qZA(),l.TgZ(421,"li",20),l._UZ(422,"input",21),l._uU(423," Humor (2645) "),l.qZA(),l.TgZ(424,"li",20),l._UZ(425,"input",21),l._uU(426," Alternate Universe - Canon Divergence (2485) "),l.qZA(),l.TgZ(427,"li",20),l._UZ(428,"input",21),l._uU(429," Alternate Universe (2278) "),l.qZA(),l.TgZ(430,"li",20),l._UZ(431,"input",21),l._uU(432," Fluff (2233) "),l.qZA(),l.TgZ(433,"li",20),l._UZ(434,"input",21),l._uU(435," Drabble (1936) "),l.qZA(),l.TgZ(436,"li",20),l._UZ(437,"input",21),l._uU(438," Marauders Era (Harry Potter) (1806) "),l.qZA(),l.TgZ(439,"li",20),l._UZ(440,"input",21),l._uU(441," Crossover (1767) "),l.qZA(),l.TgZ(442,"li",20),l._UZ(443,"input",21),l._uU(444," One Shot (1720) "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(445,"p"),l._uU(446," Other Tags to exclude\n"),l.qZA(),l.TgZ(447,"div",22),l._UZ(448,"span",23),l._UZ(449,"input",24),l.qZA(),l._UZ(450,"p"),l.TgZ(451,"h6"),l._uU(452,"More Options"),l.qZA(),l.TgZ(453,"p"),l.TgZ(454,"button",17),l._uU(455," Crossovers "),l.qZA(),l.qZA(),l.TgZ(456,"div",18),l.TgZ(457,"ul",19),l.TgZ(458,"li",20),l._UZ(459,"input",21),l._uU(460," Include crossovers "),l.qZA(),l.TgZ(461,"li",20),l._UZ(462,"input",21),l._uU(463," Exclude crossovers "),l.qZA(),l.TgZ(464,"li",20),l._UZ(465,"input",21),l._uU(466," Show only crossovers "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(467,"p"),l.TgZ(468,"button",17),l._uU(469," Completion Status "),l.qZA(),l.qZA(),l.TgZ(470,"div",18),l.TgZ(471,"ul",19),l.TgZ(472,"li",20),l._UZ(473,"input",21),l._uU(474," All works "),l.qZA(),l.TgZ(475,"li",20),l._UZ(476,"input",21),l._uU(477,"\nComplete works only "),l.qZA(),l.TgZ(478,"li",20),l._UZ(479,"input",21),l._uU(480,"\nWorks in progress only "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(481,"p"),l.TgZ(482,"button",17),l._uU(483," Date Updated "),l.qZA(),l.qZA(),l.TgZ(484,"div",18),l.TgZ(485,"p"),l._uU(486," From "),l.qZA(),l.TgZ(487,"div",22),l._UZ(488,"span",23),l._UZ(489,"input",24),l.qZA(),l.TgZ(490,"p"),l._uU(491," To "),l.qZA(),l.TgZ(492,"div",22),l._UZ(493,"span",23),l._UZ(494,"input",24),l.qZA(),l.qZA(),l.TgZ(495,"div",18),l.TgZ(496,"p"),l._uU(497," search within Results "),l.qZA(),l.TgZ(498,"div",22),l._UZ(499,"span",23),l._UZ(500,"input",24),l.qZA(),l.qZA(),l.TgZ(501,"p"),l._uU(502," Language "),l.qZA(),l.TgZ(503,"select",7),l.TgZ(504,"option",8),l._uU(505,"Basa Jawa"),l.qZA(),l.TgZ(506,"option",9),l._uU(507,"Cymraeg"),l.qZA(),l.TgZ(508,"option",10),l._uU(509,"Spanish"),l.qZA(),l.TgZ(510,"option",11),l._uU(511,"English"),l.qZA(),l.TgZ(512,"option",12),l._uU(513,"French"),l.qZA(),l.TgZ(514,"option",13),l._uU(515,"Duch"),l.qZA(),l.qZA(),l._UZ(516,"p"),l.TgZ(517,"div",5),l.TgZ(518,"button",6),l._uU(519,"Search and filter"),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[""]}),n})(),nS=(()=>{class n{constructor(){this.img="/assets/ficLOGO.png",this.author="Hogwarts Letters and Magic Mirrors by yellita96",this.fandom="Harry Potter - J. K. Rowliowlinng",this.tags="No Archive Warnings Apply, Dudley Dursley/Original Female Character(s), Dudley Dursley, Harry Potter, Original Female Character(s), Post-Battle of Hogwarts",this.summery="Dudley's child gets a letter to Hogwarts cliche",this.date="20 May 2021",this.stats="Language: English Words: 738 Chapters: 1/1 Comments: 3 Kudos: 15 Bookmarks: 2 Hits: 197"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-StoryCard"]],inputs:{img:"img",author:"author",fandom:"fandom",tags:"tags",summery:"summery",date:"date",stats:"stats"},decls:16,vars:7,consts:[[1,"card",2,"width","80rem","height","13rem"],[1,"card-header"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"position-absolute","top-0","end-0"],[1,"h6"],[1,"card-body"],[1,"position-absolute","bottom-0","end-0"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"img",2),l._uU(3),l.TgZ(4,"div",3),l._uU(5),l.qZA(),l.TgZ(6,"p",4),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"div",5),l.TgZ(9,"p"),l.TgZ(10,"u"),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"p"),l._uU(13),l.qZA(),l.TgZ(14,"div",6),l._uU(15),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.s9C("src",r.img,l.LSH),l.xp6(1),l.hij(" ",r.author," "),l.xp6(2),l.Oqu(r.date),l.xp6(2),l.Oqu(r.fandom),l.xp6(4),l.Oqu(r.tags),l.xp6(2),l.hij(" ",r.summery," "),l.xp6(2),l.hij("",r.stats," "))},styles:[""]}),n})();function I0(n,e){if(1&n&&(l.TgZ(0,"div"),l.TgZ(1,"ao3-StoryCard",3),l._uU(2," loading... "),l.qZA(),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.s9C("img",t.img),l.s9C("author",t.author),l.s9C("tags",t.tags),l.s9C("fandom",t.fandom),l.s9C("summery",t.summery),l.s9C("date",t.date),l.s9C("stats",t.stats)}}let rS=(()=>{class n{constructor(t){for(var r of(this.storyService=t,this.Stories=[],o1))console.log(r),this.Stories.push(r)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(tS))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Story-Layout"]],decls:5,vars:1,consts:[[1,"container-fludid","d-flex"],[1,"d-flex","flex-column","bd-highlight","mb-3"],[4,"ngFor","ngForOf"],[1,"m-5",3,"img","author","tags","fandom","summery","date","stats"]],template:function(t,r){1&t&&(l.TgZ(0,"ao3-FilterBar"),l._uU(1," loading... "),l.qZA(),l.TgZ(2,"div",0),l.TgZ(3,"div",1),l.YNc(4,I0,3,7,"div",2),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngForOf",r.Stories))},directives:[Ps,Pn,nS],styles:[""]}),n})(),iS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Other-page"]],decls:1,vars:0,template:function(t,r){1&t&&l._uU(0,"This is Other Media")},styles:[""]}),n})(),T0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Book-and-Literature-page"]],decls:1,vars:0,template:function(t,r){1&t&&l._uU(0,"This is the Books and Lit Section")},styles:[""]}),n})();const UT=[{button:"0"},{button:"1"},{button:"2"},{button:"3"},{button:"4"},{button:"5"},{button:"6"},{button:"7"},{button:"8"},{button:"9"},{button:"A"},{button:"\xc1"},{button:"B"},{button:"C"},{button:"D"},{button:"E"},{button:"F"},{button:"G"},{button:"H"},{button:"I"},{button:"J"},{button:"K"},{button:"L"},{button:"M"},{button:"N"},{button:"O"},{button:"P"},{button:"Q"},{button:"R"},{button:"S"},{button:"T"},{button:"U"},{button:"V"},{button:"W"},{button:"X"},{button:"Y"},{button:"Z"},{button:"\u80ed"},{button:"\u8d64"}],VT=[{path:"",component:y_},{path:"All-Fandom",component:m_},{path:"homepage",component:y_},{path:"storypage",component:rS},{path:"Other",component:iS},{path:"BooksAndLiterture",component:T0},{path:"Movie",component:(()=>{class n{constructor(){for(var t of(this.moviebuttons=[],UT))console.log(t),this.moviebuttons.push(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Movies-page"]],decls:10,vars:0,consts:[[1,"row","justify-content-center"],[1,"col-10"],[1,"card"],[1,"card-header"],[1,"card-text"]],template:function(t,r){1&t&&(l._uU(0,"This is the Movie Page "),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l._uU(5," 0 "),l.qZA(),l.TgZ(6,"div",4),l._UZ(7,"p"),l._uU(8," 00 Schneider - Jagd auf Nihil Baxter (1994) (1) "),l._UZ(9,"p"),l.qZA(),l.qZA(),l.qZA(),l.qZA())},styles:[""]}),n})()},{path:"Musicandband",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ao3-Music-and-bands-page"]],decls:1,vars:0,template:function(t,r){1&t&&l._uU(0,"This is the Music and Band page")},styles:[""]}),n})()}];let BT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[La,uc.forRoot(VT)],uc]}),n})();class jT{}class ZT{}class Bo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===u.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jo{encodeKey(e){return C0(e)}encodeValue(e){return C0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const H1=/%(\d[a-f0-9])/gi,aS={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function C0(n){return encodeURIComponent(n).replace(H1,(e,t)=>{var r;return null!==(r=aS[t])&&void 0!==r?r:e})}function HT(n){return`${n}`}class El{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jo,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oS(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[d,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],_=t.get(d)||[];_.push(p),t.set(d,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new El({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class lS{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function b0(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function D0(n){return"undefined"!=typeof Blob&&n instanceof Blob}function qT(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Nh{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function q1(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Bo),this.context||(this.context=new lS),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new El,this.urlWithParams=t}serializeBody(){return null===this.body?null:b0(this.body)||D0(this.body)||qT(this.body)||function cS(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof El?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qT(this.body)?null:D0(this.body)?this.body.type||null:b0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof El?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let I=e.headers||this.headers,A=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(I=Object.keys(e.setHeaders).reduce((P,U)=>P.set(U,e.setHeaders[U]),I)),e.setParams&&(A=Object.keys(e.setParams).reduce((P,U)=>P.set(U,e.setParams[U]),A)),new Nh(r,i,d,{params:A,headers:I,context:x,reportProgress:_,responseType:u,withCredentials:p})}}var Nn=(()=>((Nn=Nn||{})[Nn.Sent=0]="Sent",Nn[Nn.UploadProgress=1]="UploadProgress",Nn[Nn.ResponseHeader=2]="ResponseHeader",Nn[Nn.DownloadProgress=3]="DownloadProgress",Nn[Nn.Response=4]="Response",Nn[Nn.User=5]="User",Nn))();class Sp{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zm extends Sp{constructor(e={}){super(e),this.type=Nn.ResponseHeader}clone(e={}){return new zm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Km extends Sp{constructor(e={}){super(e),this.type=Nn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Km({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class A0 extends Sp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ym(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dS=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Nh)u=t;else{let _,I;_=i.headers instanceof Bo?i.headers:new Bo(i.headers),i.params&&(I=i.params instanceof El?i.params:new El({fromObject:i.params})),u=new Nh(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:I,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=_t(u).pipe(ws(_=>this.handler.handle(_)));if(t instanceof Nh||"events"===i.observe)return d;const p=d.pipe(Ar(_=>_ instanceof Km));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,wt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,wt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new El).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ym(i,r))}post(t,r,i={}){return this.request("POST",t,Ym(i,r))}put(t,r,i={}){return this.request("PUT",t,Ym(i,r))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(jT))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class $T{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const hS=new l.OlP("HTTP_INTERCEPTORS");let $1=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const K1=/^\)\]\}',?\n/;let GT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Xr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,W)=>i.setRequestHeader(U,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const u=t.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const U=1223===i.status?204:i.status,W=i.statusText||"OK",Ie=new Bo(i.getAllResponseHeaders()),Ue=function Y1(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new zm({headers:Ie,status:U,statusText:W,url:Ue}),d},_=()=>{let{headers:U,status:W,statusText:Ie,url:Ue}=p(),ot=null;204!==W&&(ot=void 0===i.response?i.responseText:i.response),0===W&&(W=ot?200:0);let Mt=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof ot){const Jt=ot;ot=ot.replace(K1,"");try{ot=""!==ot?JSON.parse(ot):null}catch(Ot){ot=Jt,Mt&&(Mt=!1,ot={error:Ot,text:ot})}}Mt?(r.next(new Km({body:ot,headers:U,status:W,statusText:Ie,url:Ue||void 0})),r.complete()):r.error(new A0({error:ot,headers:U,status:W,statusText:Ie,url:Ue||void 0}))},I=U=>{const{url:W}=p(),Ie=new A0({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(Ie)};let A=!1;const x=U=>{A||(r.next(p()),A=!0);let W={type:Nn.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(W.total=U.total),"text"===t.responseType&&!!i.responseText&&(W.partialText=i.responseText),r.next(W)},P=U=>{let W={type:Nn.UploadProgress,loaded:U.loaded};U.lengthComputable&&(W.total=U.total),r.next(W)};return i.addEventListener("load",_),i.addEventListener("error",I),i.addEventListener("timeout",I),i.addEventListener("abort",I),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",P)),i.send(u),r.next({type:Nn.Sent}),()=>{i.removeEventListener("error",I),i.removeEventListener("abort",I),i.removeEventListener("load",_),i.removeEventListener("timeout",I),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(on))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ph=new l.OlP("XSRF_COOKIE_NAME"),S0=new l.OlP("XSRF_HEADER_NAME");class WT{}let zT=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=mo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(oe),l.LFG(l.Lbi),l.LFG(Ph))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Eu=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(WT),l.LFG(S0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),KT=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(hS,[]);this.chain=r.reduceRight((i,u)=>new $T(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ZT),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),pS=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Eu,useClass:$1}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ph,useValue:t.cookieName}:[],t.headerName?{provide:S0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Eu,{provide:hS,useExisting:Eu,multi:!0},{provide:WT,useClass:zT},{provide:Ph,useValue:"XSRF-TOKEN"},{provide:S0,useValue:"X-XSRF-TOKEN"}]}),n})(),x0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[dS,{provide:jT,useClass:KT},GT,{provide:ZT,useExisting:GT}],imports:[[pS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const R0_firebase={projectId:"archive-of-our-own-dbb92",appId:"1:912028900949:web:242f332cf6f786ffc17edc",databaseURL:"https://archive-of-our-own-dbb92-default-rtdb.firebaseio.com",storageBucket:"archive-of-our-own-dbb92.appspot.com",apiKey:"AIzaSyBEXoV7K8waUma7kozuhV5RHNOpKvqoKBo",authDomain:"archive-of-our-own-dbb92.firebaseapp.com",messagingSenderId:"912028900949",measurementId:"G-ZMTL1ZQK25"};function XT(){return(0,jt.e)((n,e)=>{let t,r=!1;n.subscribe(new Ln.Q(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var et,Q1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Il={},eC=eC||{},Rt=Q1||self;function M0(){}function Qm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var N0="closure_uid_"+(1e9*Math.random()>>>0),yS=0;function tC(n,e,t){return n.call.apply(n.bind,arguments)}function nC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function jr(n,e,t){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tC:nC).apply(null,arguments)}function Jm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[i].apply(r,d)}}function Iu(){this.s=this.s,this.o=this.o}var J1={};Iu.prototype.s=!1,Iu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function mS(n){return Object.prototype.hasOwnProperty.call(n,N0)&&n[N0]||(n[N0]=++yS)}(this);delete J1[n]}},Iu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const P0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Rp=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function rC(n){return Array.prototype.concat.apply([],arguments)}function O0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ey(n){return/^[\s\xa0]*$/.test(n)}var qi,vS=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hi(n,e){return-1!=n.indexOf(e)}function k0(n,e){return n<e?-1:n>e?1:0}e:{var iC=Rt.navigator;if(iC){var sC=iC.userAgent;if(sC){qi=sC;break e}}qi=""}function F0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function oC(n){const e={};for(const t in n)e[t]=n[t];return e}var aC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<aC.length;u++)t=aC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function uC(n){return uC[" "](n),n}uC[" "]=M0;var s,n,eM=Hi(qi,"Opera"),Mp=Hi(qi,"Trident")||Hi(qi,"MSIE"),lC=Hi(qi,"Edge"),cC=lC||Mp,ES=Hi(qi,"Gecko")&&!(Hi(qi.toLowerCase(),"webkit")&&!Hi(qi,"Edge"))&&!(Hi(qi,"Trident")||Hi(qi,"MSIE"))&&!Hi(qi,"Edge"),tM=Hi(qi.toLowerCase(),"webkit")&&!Hi(qi,"Edge");function IS(){var n=Rt.document;return n?n.documentMode:void 0}e:{var o="",a=(n=qi,ES?/rv:([^\);]+)(\)|;)/.exec(n):lC?/Edge\/([\d\.]+)/.exec(n):Mp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tM?/WebKit\/(\S+)/.exec(n):eM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(a&&(o=a?a[1]:""),Mp){var c=IS();if(null!=c&&c>parseFloat(o)){s=String(c);break e}}s=o}var h={};var T=Rt.document&&Mp&&(IS()||parseInt(s,10))||void 0,S=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",M0,e),Rt.removeEventListener("test",M0,e)}catch(t){}return n}();function M(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function L(n,e){if(M.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ES){e:{try{uC(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&L.Z.h.call(this)}}M.prototype.h=function(){this.defaultPrevented=!0},ri(L,M);var $={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),me=0;function Le(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++me,this.ca=this.fa=!1}function Ze(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Je(n){this.src=n,this.g={},this.h=0}function be(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=P0(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Ze(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dt(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Je.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=dt(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Le(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Vt="closure_lm_"+(1e6*Math.random()|0),tn={};function ls(n,e,t,r,i){if(r&&r.once)return ty(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ls(n,e[u],t,r,i);return null}return t=kp(t),n&&n[Y]?n.N(e,t,xp(r)?!!r.capture:!!r,i):Tl(n,e,t,!1,r,i)}function Tl(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var d=xp(i)?!!i.capture:!!i,p=Pp(n);if(p||(n[Vt]=p=new Je(n)),(t=p.add(e,t,r,d,u)).proxy)return t;if(r=function L0(){var e=U0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)S||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ry(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ty(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ty(n,e[u],t,r,i);return null}return t=kp(t),n&&n[Y]?n.O(e,t,xp(r)?!!r.capture:!!r,i):Tl(n,e,t,!0,r,i)}function ny(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)ny(n,e[u],t,r,i);else r=xp(r)?!!r.capture:!!r,t=kp(t),n&&n[Y]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dt(u=n.g[e],t,r,i))&&(Ze(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Pp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dt(e,t,r,i)),(t=-1<n?e[n]:null)&&Np(t))}function Np(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Y])be(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ry(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pp(e))?(be(t,n),0==t.h&&(t.src=null,e[Vt]=null)):Ze(n)}}}function ry(n){return n in tn?tn[n]:tn[n]="on"+n}function U0(n,e){if(n.ca)n=!0;else{e=new L(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Np(n),n=t.call(r,e)}return n}function Pp(n){return(n=n[Vt])instanceof Je?n:null}var Op="__closure_events_fn_"+(1e9*Math.random()>>>0);function kp(n){return"function"==typeof n?n:(n[Op]||(n[Op]=function(e){return n.handleEvent(e)}),n[Op])}function di(){Iu.call(this),this.i=new Je(this),this.P=this,this.I=null}function $i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new M(e,n);else if(e instanceof M)e.target=e.target||n;else{var i=e;wS(e=new M(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];i=dC(d,r,!0,e)&&i}if(i=dC(d=e.g=n,r,!0,e)&&i,i=dC(d,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=dC(d=e.g=t[u],r,!1,e)&&i}function dC(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var p=d.listener,_=d.ia||d.src;d.fa&&be(n.i,d),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}ri(di,Iu),di.prototype[Y]=!0,di.prototype.removeEventListener=function(n,e,t,r){ny(this,n,e,t,r)},di.prototype.M=function(){if(di.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ze(t[r]);delete n.g[e],n.h--}}this.I=null},di.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var TS=Rt.JSON.stringify;function hk(){var n=rM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bS,nM=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new pk,n=>n.reset());class pk{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gk(n){Rt.setTimeout(()=>{throw n},0)}function CS(n,e){bS||function mk(){var n=Rt.Promise.resolve(void 0);bS=function(){n.then(yk)}}(),DS||(bS(),DS=!0),rM.add(n,e)}var DS=!1,rM=new class fk{constructor(){this.h=this.g=null}add(e,t){const r=nM.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yk(){for(var n;n=hk();){try{n.h.call(n.g)}catch(t){gk(t)}var e=nM;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}DS=!1}function hC(n,e){di.call(this),this.h=n||1,this.g=e||Rt,this.j=jr(this.kb,this),this.l=Date.now()}function AS(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function SS(n,e,t){if("function"==typeof n)t&&(n=jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function iM(n){n.g=SS(()=>{n.g=null,n.i&&(n.i=!1,iM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(hC,di),(et=hC.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$i(this,"tick"),this.da&&(AS(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){hC.Z.M.call(this),AS(this),delete this.g};class _k extends Iu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iM(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function V0(n){Iu.call(this),this.h=n,this.g={}}ri(V0,Iu);var sM=[];function oM(n,e,t,r){Array.isArray(t)||(t&&(sM[0]=t.toString()),t=sM);for(var i=0;i<t.length;i++){var u=ls(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function aM(n){F0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Np(e)},n),n.g={}}function fC(){this.g=!0}function iy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ik(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<i.length;d++)i[d]=""}}}return TS(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}V0.prototype.M=function(){V0.Z.M.call(this),aM(this)},V0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fC.prototype.Aa=function(){this.g=!1},fC.prototype.info=function(){};var Fp={},uM=null;function pC(){return uM=uM||new di}function lM(n){M.call(this,Fp.Ma,n)}function B0(n){const e=pC();$i(e,new lM(e,n))}function cM(n,e){M.call(this,Fp.STAT_EVENT,n),this.stat=e}function Os(n){const e=pC();$i(e,new cM(e,n))}function dM(n,e){M.call(this,Fp.Na,n),this.size=e}function j0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}Fp.Ma="serverreachability",ri(lM,M),Fp.STAT_EVENT="statevent",ri(cM,M),Fp.Na="timingevent",ri(dM,M);var gC={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hM={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xS(){}function pM(){}xS.prototype.h=null;var NS,Z0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function RS(){M.call(this,"d")}function MS(){M.call(this,"c")}function mC(){}function H0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new V0(this),this.P=Tk,this.W=new hC(n=cC?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gM}function gM(){this.i=null,this.g="",this.h=!1}ri(RS,M),ri(MS,M),ri(mC,xS),mC.prototype.g=function(){return new XMLHttpRequest},mC.prototype.i=function(){return{}},NS=new mC;var Tk=45e3,PS={},yC={};function OS(n,e,t){n.K=1,n.v=IC(Nc(e)),n.s=t,n.U=!0,mM(n,null)}function mM(n,e){n.F=Date.now(),q0(n),n.A=Nc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),bM(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gM,n.g=zM(n.l,t?e:null,!n.s),0<n.O&&(n.L=new _k(jr(n.Ia,n,n.g),n.O)),oM(n.V,n.g,"readystatechange",n.gb),e=n.H?oC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),B0(1),function vk(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var d="",p=u.split("&"),_=0;_<p.length;_++){var I=p[_].split("=");if(1<I.length){var A=I[0];I=I[1];var x=A.split("_");d=2<=x.length&&"type"==x[1]?d+(A+"=")+I+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function yM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function _M(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ck(n,t),i==yC){4==e&&(n.o=4,Os(14),r=!1),iy(n.j,n.m,null,"[Incomplete Response]");break}if(i==PS){n.o=4,Os(15),iy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}iy(n.j,n.m,i,null),kS(n,i)}yM(n)&&i!=yC&&i!=PS&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Os(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),GS(e),e.L=!0,Os(11))):(iy(n.j,n.m,t,"[Invalid Chunked Response]"),Lp(n),$0(n))}function Ck(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?yC:(t=Number(e.substring(t,r)),isNaN(t)?PS:(r+=1)+t>e.length?yC:(e=e.substr(r,t),n.C=r+t,e))}function q0(n){n.Y=Date.now()+n.P,vM(n,n.P)}function vM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=j0(jr(n.eb,n),e)}function _C(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function $0(n){0==n.l.G||n.I||qM(n.l,n)}function Lp(n){_C(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,AS(n.W),aM(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function kS(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||US(t.i,n)))if(t.I=n.N,!n.J&&US(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=j0(jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;SC(t),DC(t)}$S(t),Os(18)}if(1>=SM(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else Bp(t,11)}else if((n.J||t.g==n)&&SC(t),!ey(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const A=I[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const P=I[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const W=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var u=r.i;!u.g&&(Hi(W,"spdy")||Hi(W,"quic")||Hi(W,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(VS(u,u.h),u.h=null))}if(r.D){const Ie=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(r.sa=Ie,er(r.F,r.D,Ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=WM(r,r.H?r.la:null,r.W),d.J){xM(r.i,d);var p=d,_=r.K;_&&p.setTimeout(_),p.B&&(_C(p),q0(p)),r.g=d}else ZM(r);0<t.l.length&&AC(t)}else"stop"!=I[0]&&"close"!=I[0]||Bp(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Bp(t,7):HS(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}B0(4)}catch(I){}}function FS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qm(n)||"string"==typeof n)Rp(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Qm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function bk(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Qm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function sy(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof sy)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function LS(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Up(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Up(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Up(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=H0.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Pc(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const A=Pc(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||cC||this.g&&(this.h.h||this.g.ga()||LM(this.g)))){this.I||4!=A||7==e||B0(8==e||0>=x?3:2),_C(this);var t=this.g.ba();this.N=t;t:if(yM(this)){var r=LM(this.g);n="";var i=r.length,u=4==Pc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Lp(this),$0(this);var d="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function wk(n,e,t,r,i,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ey(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Os(12),Lp(this),$0(this);break e}iy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,kS(this,t)}this.U?(_M(this,A,d),cC&&this.i&&3==A&&(oM(this.V,this.W,"tick",this.fb),this.W.start())):(iy(this.j,this.m,d,null),kS(this,d)),4==A&&Lp(this),this.i&&!this.I&&(4==A?qM(this.l,this):(this.i=!1,q0(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Os(12)):(this.o=0,Os(13)),Lp(this),$0(this)}}}catch(A){}},et.fb=function(){if(this.g){var n=Pc(this.g),e=this.g.ga();this.C<e.length&&(_C(this),_M(this,n,e),this.i&&4!=n&&q0(this))}},et.cancel=function(){this.I=!0,Lp(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ek(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(B0(3),Os(17)),Lp(this),this.o=2,$0(this)):vM(this,this.Y-n)},(et=sy.prototype).R=function(){LS(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return LS(this),this.g.concat()},et.get=function(n,e){return Up(this.h,n)?this.h[n]:e},et.set=function(n,e){Up(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var wM=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vp){this.g=void 0!==e?e:n.g,vC(this,n.j),this.s=n.s,wC(this,n.i),EC(this,n.m),this.l=n.l,e=n.h;var t=new z0;t.i=e.i,e.g&&(t.g=new sy(e.g),t.h=e.h),EM(this,t),this.o=n.o}else n&&(t=String(n).match(wM))?(this.g=!!e,vC(this,t[1]||"",!0),this.s=G0(t[2]||""),wC(this,t[3]||"",!0),EC(this,t[4]),this.l=G0(t[5]||"",!0),EM(this,t[6]||"",!0),this.o=G0(t[7]||"")):(this.g=!!e,this.h=new z0(null,this.g))}function Nc(n){return new Vp(n)}function vC(n,e,t){n.j=t?G0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wC(n,e,t){n.i=t?G0(e,!0):e}function EC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function EM(n,e,t){e instanceof z0?(n.h=e,function Ok(n,e){e&&!n.j&&(Oh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(TM(this,r),bM(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=W0(e,Nk)),n.h=new z0(e,n.g))}function er(n,e,t){n.h.set(e,t)}function IC(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function G0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function W0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xk),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xk(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(W0(e,IM,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(W0(e,IM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(W0(t,"/"==t.charAt(0)?Mk:Rk,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",W0(t,Pk)),n.join("")};var IM=/[#\/\?@]/g,Rk=/[#\?:]/g,Mk=/[#\?]/g,Nk=/[#\?@]/g,Pk=/#/g;function z0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Oh(n){n.g||(n.g=new sy,n.h=0,n.i&&function Dk(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function TM(n,e){Oh(n),e=oy(n,e),Up(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Up((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&LS(n)))}function CM(n,e){return Oh(n),e=oy(n,e),Up(n.g.h,e)}function bM(n,e,t){TM(n,e),0<t.length&&(n.i=null,n.g.set(oy(n,e),O0(t)),n.h+=t.length)}function oy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function DM(n){this.l=n||Fk,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=z0.prototype).add=function(n,e){Oh(this),this.i=null,n=oy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Oh(this),this.g.forEach(function(t,r){Rp(t,function(i){n.call(e,i,r,this)},this)},this)},et.T=function(){Oh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},et.R=function(n){Oh(this);var e=[];if("string"==typeof n)CM(this,n)&&(e=rC(e,this.g.get(oy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=rC(e,n[t])}return e},et.set=function(n,e){return Oh(this),this.i=null,CM(this,n=oy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=i;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Fk=10;function AM(n){return!!n.h||!!n.g&&n.g.size>=n.j}function SM(n){return n.h?1:n.g?n.g.size:0}function US(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function VS(n,e){n.g?n.g.add(e):n.h=e}function xM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function RM(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return O0(n.i)}function BS(){}function Lk(){this.g=new BS}function Uk(n,e,t){const r=t||"";try{FS(n,function(i,u){let d=i;xp(i)&&(d=TS(i)),e.push(r+u+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function TC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function K0(n){this.l=n.$b||null,this.j=n.ib||!1}function CC(n,e){di.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=jS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}DM.prototype.cancel=function(){if(this.i=RM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},BS.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},BS.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},ri(K0,xS),K0.prototype.g=function(){return new CC(this.l,this.j)},K0.prototype.i=function(n){return function(){return n}}({}),ri(CC,di);var jS=0;function MM(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Y0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Q0(n)}function Q0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=CC.prototype).open=function(n,e){if(this.readyState!=jS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Q0(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Y0(this)),this.readyState=jS},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Q0(this)),this.g&&(this.readyState=3,Q0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MM(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Y0(this):Q0(this),3==this.readyState&&MM(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Y0(this))},et.Ta=function(n){this.g&&(this.response=n,Y0(this))},et.ha=function(){this.g&&Y0(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(CC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Bk=Rt.JSON.parse;function Zr(n){di.call(this),this.headers=new sy,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=NM,this.K=this.L=!1}ri(Zr,di);var NM="",jk=/^https?$/i,Zk=["POST","PUT"];function qk(n){return"content-type"==n.toLowerCase()}function PM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,OM(n),bC(n)}function OM(n){n.D||(n.D=!0,$i(n,"complete"),$i(n,"error"))}function kM(n){if(n.h&&void 0!==eC&&(!n.C[1]||4!=Pc(n)||2!=n.ba()))if(n.v&&4==Pc(n))SS(n.Fa,0,n);else if($i(n,"readystatechange"),4==Pc(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(wM)[1]||null;if(!i&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;i=u.substr(0,u.length-1)}r=!jk.test(i?i.toLowerCase():"")}t=r}if(t)$i(n,"complete"),$i(n,"success");else{n.m=6;try{var d=2<Pc(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",OM(n)}}finally{bC(n)}}}function bC(n,e){if(n.g){FM(n);const t=n.g,r=n.C[0]?M0:null;n.g=null,n.C=null,e||$i(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function FM(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function Pc(n){return n.g?n.g.readyState:0}function LM(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case NM:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ZS(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function $k(n){let e="";return F0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function J0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UM(n){this.za=0,this.l=[],this.h=new fC,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=J0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=J0("baseRetryDelayMs",5e3,n),this.$a=J0("retryDelaySeedMs",1e4,n),this.Ya=J0("forwardChannelMaxRetries",2,n),this.ra=J0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new DM(n&&n.concurrentRequestLimit),this.Ca=new Lk,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function HS(n){if(VM(n),3==n.G){var e=n.V++,t=Nc(n.F);er(t,"SID",n.J),er(t,"RID",e),er(t,"TYPE","terminate"),X0(n,t),(e=new H0(n,n.h,e,void 0)).K=2,e.v=IC(Nc(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=zM(e.l,null),e.g.ea(e.v)),e.F=Date.now(),q0(e)}GM(n)}function DC(n){n.g&&(GS(n),n.g.cancel(),n.g=null)}function VM(n){DC(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),SC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function qS(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&AC(n)}function AC(n){AM(n.i)||n.m||(n.m=!0,CS(n.Ha,n),n.C=0)}function BM(n,e){var t;t=e?e.m:n.V++;const r=Nc(n.F);er(r,"SID",n.J),er(r,"RID",t),er(r,"AID",n.U),X0(n,r),n.o&&n.s&&ZS(r,n.o,n.s),t=new H0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=jM(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),VS(n.i,t),OS(t,r,e)}function X0(n,e){n.j&&FS({},function(t,r){er(e,r,t)})}function jM(n,e,t){t=Math.min(n.l.length,t);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=i[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let I=i[_].h;const A=i[_].g;if(I-=u,0>I)u=Math.max(0,i[_].h-100),p=!1;else try{Uk(A,d,"req"+I+"_")}catch(x){r&&r(A)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ZM(n){n.g||n.u||(n.Y=1,CS(n.Ga,n),n.A=0)}function $S(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=j0(jr(n.Ga,n),$M(n,n.A)),n.A++,0))}function GS(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function HM(n){n.g=new H0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Nc(n.oa);er(e,"RID","rpc"),er(e,"SID",n.J),er(e,"CI",n.N?"0":"1"),er(e,"AID",n.U),X0(n,e),er(e,"TYPE","xmlhttp"),n.o&&n.s&&ZS(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=IC(Nc(e)),t.s=null,t.U=!0,mM(t,n)}function SC(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function qM(n,e){var t=null;if(n.g==e){SC(n),GS(n),n.g=null;var r=2}else{if(!US(n.i,e))return;t=e.D,xM(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;$i(r=pC(),new dM(r,t,e,i)),AC(n)}else ZM(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Gk(n,e){return!(SM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=j0(jr(n.Ha,n,e),$M(n,n.C)),n.C++,0)))}(n,e)||2==r&&$S(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Bp(n,5);break;case 4:Bp(n,10);break;case 3:Bp(n,6);break;default:Bp(n,2)}}function $M(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Bp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=jr(n.jb,n);t||(t=new Vp("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||vC(t,"https"),IC(t)),function Vk(n,e){const t=new fC;if(Rt.Image){const r=new Image;r.onload=Jm(TC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jm(TC,t,r,"TestLoadImage: error",!1,e),r.onabort=Jm(TC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jm(TC,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Os(2);n.G=0,n.j&&n.j.va(e),GM(n),VM(n)}function GM(n){n.G=0,n.I=-1,n.j&&((0!=RM(n.i).length||0!=n.l.length)&&(n.i.i.length=0,O0(n.l),n.l.length=0),n.j.ua())}function WM(n,e,t){let r=function Ak(n){return n instanceof Vp?Nc(n):new Vp(n,void 0)}(t);if(""!=r.i)e&&wC(r,e+"."+r.i),EC(r,r.m);else{const i=Rt.location;r=function Sk(n,e,t,r){var i=new Vp(null,void 0);return n&&vC(i,n),e&&wC(i,e),t&&EC(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&F0(n.aa,function(i,u){er(r,u,i)}),t=n.sa,(e=n.D)&&t&&er(r,e,t),er(r,"VER",n.ma),X0(n,r),r}function zM(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zr(t&&n.Ba&&!n.qa?new K0({ib:!0}):n.qa)).L=n.H,e}function KM(){}function xC(){if(Mp&&!(10<=Number(T)))throw Error("Environmental error: no available transport.")}function Zo(n,e){di.call(this),this.g=new UM(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ey(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ey(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ay(this)}function YM(n){RS.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QM(){MS.call(this),this.status=1}function ay(n){this.g=n}(et=Zr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():NS.g(),this.C=function fM(n){return n.h||(n.h=n.i())}(this.u?this.u:NS),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void PM(this,u)}n=t||"";const i=new sy(this.headers);r&&FS(r,function(u,d){i.set(d,u)}),r=function _S(n){e:{var e=qk;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=P0(Zk,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FM(this),0<this.B&&((this.K=function Hk(n){return Mp&&function m(){return function X1(n){var e=h;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=vS(String(s)).split("."),t=vS("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",u=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=k0(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||k0(0==i[2].length,0==u[2].length)||k0(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=SS(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){PM(this,u)}},et.pa=function(){void 0!==eC&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$i(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$i(this,"complete"),$i(this,"abort"),bC(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bC(this,!0)),Zr.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?kM(this):this.cb())},et.cb=function(){kM(this)},et.ba=function(){try{return 2<Pc(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Bk(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=UM.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new H0(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=oC(u),wS(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jM(this,i,e),er(t=Nc(this.F),"RID",n),er(t,"CVER",22),this.D&&er(t,"X-HTTP-Session-Id",this.D),X0(this,t),this.o&&u&&ZS(t,this.o,u),VS(this.i,i),this.Ra&&er(t,"TYPE","init"),this.ja?(er(t,"$req",e),er(t,"SID","null"),i.$=!0,OS(i,t,null)):OS(i,t,e),this.G=2}}else 3==this.G&&(n?BM(this,n):0==this.l.length||AM(this.i)||BM(this))},et.Ga=function(){if(this.u=null,HM(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=j0(jr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Os(10),DC(this),HM(this))},et.ab=function(){null!=this.v&&(this.v=null,DC(this),$S(this),Os(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Os(2)):(this.h.info("Failed to ping google.com"),Os(1))},(et=KM.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},xC.prototype.g=function(n,e){return new Zo(n,e)},ri(Zo,di),Zo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),CS(jr(n.hb,n,e))),Os(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=WM(n,null,n.W),AC(n)},Zo.prototype.close=function(){HS(this.g)},Zo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,qS(this.g,e)}else this.v?((e={}).__data__=TS(n),qS(this.g,e)):qS(this.g,n)},Zo.prototype.M=function(){this.g.j=null,delete this.j,HS(this.g),delete this.g,Zo.Z.M.call(this)},ri(YM,RS),ri(QM,MS),ri(ay,KM),ay.prototype.xa=function(){$i(this.g,"a")},ay.prototype.wa=function(n){$i(this.g,new YM(n))},ay.prototype.va=function(n){$i(this.g,new QM(n))},ay.prototype.ua=function(){$i(this.g,"b")},xC.prototype.createWebChannel=xC.prototype.g,Zo.prototype.send=Zo.prototype.u,Zo.prototype.open=Zo.prototype.m,Zo.prototype.close=Zo.prototype.close,gC.NO_ERROR=0,gC.TIMEOUT=8,gC.HTTP_ERROR=6,hM.COMPLETE="complete",pM.EventType=Z0,Z0.OPEN="a",Z0.CLOSE="b",Z0.ERROR="c",Z0.MESSAGE="d",di.prototype.listen=di.prototype.N,Zr.prototype.listenOnce=Zr.prototype.O,Zr.prototype.getLastError=Zr.prototype.La,Zr.prototype.getLastErrorCode=Zr.prototype.Da,Zr.prototype.getStatus=Zr.prototype.ba,Zr.prototype.getResponseJson=Zr.prototype.Qa,Zr.prototype.getResponseText=Zr.prototype.ga,Zr.prototype.send=Zr.prototype.ea;var Wk=Il.createWebChannelTransport=function(){return new xC},zk=Il.getStatEventTarget=function(){return pC()},WS=Il.ErrorCode=gC,Kk=Il.EventType=hM,Yk=Il.Event=Fp,JM=Il.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Qk=Il.FetchXmlHttpFactory=K0,RC=Il.WebChannel=pM,Jk=Il.XhrIo=Zr;const XM="@firebase/firestore";class Gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let uy="9.6.7";const kh=new yt.Yd("@firebase/firestore");function zS(){return kh.logLevel}function Ve(n,...e){if(kh.logLevel<=yt.in.DEBUG){const t=e.map(KS);kh.debug(`Firestore (${uy}): ${n}`,...t)}}function Hr(n,...e){if(kh.logLevel<=yt.in.ERROR){const t=e.map(KS);kh.error(`Firestore (${uy}): ${n}`,...t)}}function ew(n,...e){if(kh.logLevel<=yt.in.WARN){const t=e.map(KS);kh.warn(`Firestore (${uy}): ${n}`,...t)}}function KS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${uy}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function Dt(n,e){n||ct()}function ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class eN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gi.UNAUTHENTICATED))}shutdown(){}}class nF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rF{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let d=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new hi,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=d;e.enqueueRetryable((0,ve.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new hi)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new eN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Gi(e)}}class iF{constructor(e,t,r){this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class sF{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new iF(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oF{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new tN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function aF(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ho.A=-1;class nN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aF(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function ly(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rN(n){return n+"\0"}class fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fi.fromMillis(Date.now())}static fromDate(e){return fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new fi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function iN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tw{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),d=t.get(i);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends tw{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const uF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends tw{construct(e,t,r){return new pi(e,t,r)}static isValidIdentifier(e){return uF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Pe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Pe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(d=!d,i++):"."!==p||d?(r+=p,i++):(u(),i++)}if(u(),d)throw new Pe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class cy{constructor(e){this.fields=e,e.sort(pi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ly(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ii(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const cF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fh(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=cF.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zp(n){return"string"==typeof n?ii.fromBase64String(n):ii.fromUint8Array(n)}function YS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oN(n){const e=n.mapValue.fields.__previous_value__;return YS(e)?oN(e):e}function nw(n){const e=Fh(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}class dF{constructor(e,t,r,i,u,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Hp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hp&&e.projectId===this.projectId&&e.database===this.database}}function qp(n){return null==n}function rw(n){return 0===n&&1/n==-1/0}function aN(n){return"number"==typeof n&&Number.isInteger(n)&&!rw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(pn.fromString(e))}static fromName(e){return new Xe(pn.fromString(e).popFirst(5))}static empty(){return new Xe(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new pn(e.slice()))}}const hF={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function $p(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YS(n)?4:10:ct()}function Tu(n,e){if(n===e)return!0;const t=$p(n);if(t!==$p(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nw(n).isEqual(nw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Fh(r.timestampValue),d=Fh(i.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Zp(n.bytesValue).isEqual(Zp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=vr(r.doubleValue),d=vr(i.doubleValue);return u===d?rw(u)===rw(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ly(n.arrayValue.values||[],e.arrayValue.values||[],Tu);case 10:return function(r,i){const u=r.mapValue.fields||{},d=i.mapValue.fields||{};if(iN(u)!==iN(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===d[p]||!Tu(u[p],d[p])))return!1;return!0}(n,e);default:return ct()}var i}function iw(n,e){return void 0!==(n.values||[]).find(t=>Tu(t,e))}function dy(n,e){if(n===e)return 0;const t=$p(n),r=$p(e);if(t!==r)return Wt(t,r);switch(t){case 0:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const d=vr(i.integerValue||i.doubleValue),p=vr(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return uN(n.timestampValue,e.timestampValue);case 4:return uN(nw(n),nw(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,u){const d=Zp(i),p=Zp(u);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const d=i.split("/"),p=u.split("/");for(let _=0;_<d.length&&_<p.length;_++){const I=Wt(d[_],p[_]);if(0!==I)return I}return Wt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const d=Wt(vr(i.latitude),vr(u.latitude));return 0!==d?d:Wt(vr(i.longitude),vr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const d=i.values||[],p=u.values||[];for(let _=0;_<d.length&&_<p.length;++_){const I=dy(d[_],p[_]);if(I)return I}return Wt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const d=i.fields||{},p=Object.keys(d),_=u.fields||{},I=Object.keys(_);p.sort(),I.sort();for(let A=0;A<p.length&&A<I.length;++A){const x=Wt(p[A],I[A]);if(0!==x)return x;const P=dy(d[p[A]],_[I[A]]);if(0!==P)return P}return Wt(p.length,I.length)}(n.mapValue,e.mapValue);default:throw ct()}}function uN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=Fh(n),r=Fh(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function hy(n){return QS(n)}function QS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zp(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const d of r.values||[])u?u=!1:i+=",",i+=QS(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const p of i)d?d=!1:u+=",",u+=`${p}:${QS(r.fields[p])}`;return u+"}"}(n.mapValue):ct();var e}function MC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function JS(n){return!!n&&"integerValue"in n}function NC(n){return!!n&&"arrayValue"in n}function lN(n){return!!n&&"nullValue"in n}function cN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PC(n){return!!n&&"mapValue"in n}function sw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sw(n.arrayValue.values[t]);return e}return Object.assign({},n)}class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!PC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sw(t)}setAll(e){let t=pi.emptyPath(),r={},i=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}d?r[p.lastSegment()]=sw(d):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());PC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];PC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jp(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new cs(sw(this.value))}}function dN(n){const e=[];return jp(n.fields,(t,r)=>{const i=new pi([t]);if(PC(r)){const u=dN(r.mapValue).fields;if(0===u.length)e.push(i);else for(const d of u)e.push(i.child(d))}else e.push(i)}),new cy(e)}class fr{constructor(e,t,r,i,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=d}static newInvalidDocument(e){return new fr(e,0,Et.min(),Et.min(),cs.empty(),0)}static newFoundDocument(e,t,r){return new fr(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new fr(e,2,t,Et.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,Et.min(),cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let XS=(()=>{class n{constructor(t,r,i,u){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=u}}return n.UNKNOWN_ID=-1,n})();class OC{constructor(e,t){this.fieldPath=e,this.kind=t}}class ow{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ow(0,kC.min())}}class kC{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kC(Et.min(),Xe.empty(),-1)}}class fF{constructor(e,t=null,r=[],i=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=d,this.endAt=p,this.P=null}}function hN(n,e=null,t=[],r=[],i=null,u=null,d=null){return new fF(n,e,t,r,i,u,d)}function aw(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+hy(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hy(r)).join(",")),e.P=t}return e.P}function FC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!IF(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Tu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gN(n.startAt,e.startAt)&&gN(n.endAt,e.endAt)}function LC(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ks extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new gF(e,t,r):"array-contains"===t?new _F(e,r):"in"===t?new vF(e,r):"not-in"===t?new wF(e,r):"array-contains-any"===t?new EF(e,r):new ks(e,t,r)}static v(e,t,r){return"in"===t?new mF(e,r):new yF(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(dy(t,this.value)):null!==t&&$p(this.value)===$p(t)&&this.V(dy(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gF extends ks{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.V(t)}}class mF extends ks{constructor(e,t){super(e,"in",t),this.keys=fN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yF extends ks{constructor(e,t){super(e,"not-in",t),this.keys=fN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class _F extends ks{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return NC(t)&&iw(t.arrayValue,this.value)}}class vF extends ks{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&iw(this.value.arrayValue,t)}}class wF extends ks{constructor(e,t){super(e,"not-in",t)}matches(e){if(iw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!iw(this.value.arrayValue,t)}}class EF extends ks{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!NC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>iw(this.value.arrayValue,r))}}class fy{constructor(e,t){this.position=e,this.inclusive=t}}class py{constructor(e,t="asc"){this.field=e,this.dir=t}}function IF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],d=n.position[i];if(r=u.field.isKeyField()?Xe.comparator(Xe.fromName(d.referenceValue),t.key):dy(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function gN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tu(n.position[t],e.position[t]))return!1;return!0}class Oc{constructor(e,t=null,r=[],i=[],u=null,d="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function mN(n,e,t,r,i,u,d,p){return new Oc(n,e,t,r,i,u,d,p)}function gy(n){return new Oc(n)}function UC(n){return!qp(n.limit)&&"F"===n.limitType}function VC(n){return!qp(n.limit)&&"L"===n.limitType}function ex(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function tx(n){for(const e of n.filters)if(e.S())return e.field;return null}function nx(n){return null!==n.collectionGroup}function my(n){const e=ze(n);if(null===e.D){e.D=[];const t=tx(e),r=ex(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new py(t)),e.D.push(new py(pi.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new py(pi.keyField(),u))}}}return e.D}function ba(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=hN(e.path,e.collectionGroup,my(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of my(e))t.push(new py(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new fy(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new fy(e.startAt.position,!e.startAt.inclusive):null;e.C=hN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function yN(n,e,t){return new Oc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uw(n,e){return FC(ba(n),ba(e))&&n.limitType===e.limitType}function _N(n){return`${aw(ba(n))}|lt:${n.limitType}`}function rx(n){return`Query(target=${function pF(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${hy(r.value)}`;var r}).join(", ")}]`),qp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>hy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>hy(t)).join(",")),`Target(${e})`}(ba(n))}; limitType=${n.limitType})`}function ix(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,d){const p=pN(i,u,d);return i.inclusive?p<=0:p<0}(t.startAt,my(t),r)||t.endAt&&!function(i,u,d){const p=pN(i,u,d);return i.inclusive?p>=0:p>0}(t.endAt,my(t),r)));var t,r}function vN(n){return(e,t)=>{let r=!1;for(const i of my(n)){const u=TF(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function TF(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,u,d){const p=u.data.field(i),_=d.data.field(i);return null!==p&&null!==_?dy(p,_):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function wN(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rw(e)?"-0":e}}function EN(n){return{integerValue:""+n}}function IN(n,e){return aN(e)?EN(e):wN(n,e)}class BC{constructor(){this._=void 0}}function CF(n,e,t){return n instanceof yy?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Gp?CN(n,e):n instanceof Wp?bN(n,e):function(r,i){const u=TN(r,i),d=DN(u)+DN(r.k);return JS(u)&&JS(r.k)?EN(d):wN(r.O,d)}(n,e)}function bF(n,e,t){return n instanceof Gp?CN(n,e):n instanceof Wp?bN(n,e):t}function TN(n,e){return n instanceof _y?JS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yy extends BC{}class Gp extends BC{constructor(e){super(),this.elements=e}}function CN(n,e){const t=AN(e);for(const r of n.elements)t.some(i=>Tu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wp extends BC{constructor(e){super(),this.elements=e}}function bN(n,e){let t=AN(e);for(const r of n.elements)t=t.filter(i=>!Tu(i,r));return{arrayValue:{values:t}}}class _y extends BC{constructor(e,t){super(),this.O=e,this.k=t}}function DN(n){return vr(n.integerValue||n.doubleValue)}function AN(n){return NC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class lw{constructor(e,t){this.field=e,this.transform=t}}class AF{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZC{}function SF(n,e,t){n instanceof cw?function(r,i,u){const d=r.value.clone(),p=MN(r.fieldTransforms,i,u.transformResults);d.setAll(p),i.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof zp?function(r,i,u){if(!jC(r.precondition,i))return void i.convertToUnknownDocument(u.version);const d=MN(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(RN(r)),p.setAll(d),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sx(n,e,t){var i;n instanceof cw?function(r,i,u){if(!jC(r.precondition,i))return;const d=r.value.clone(),p=NN(r.fieldTransforms,u,i);d.setAll(p),i.convertToFoundDocument(xN(i),d).setHasLocalMutations()}(n,e,t):n instanceof zp?function(r,i,u){if(!jC(r.precondition,i))return;const d=NN(r.fieldTransforms,u,i),p=i.data;p.setAll(RN(r)),p.setAll(d),i.convertToFoundDocument(xN(i),p).setHasLocalMutations()}(n,e,t):jC(n.precondition,i=e)&&i.convertToNoDocument(Et.min())}function xF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=TN(r.transform,i||null);null!=u&&(null==t&&(t=cs.empty()),t.set(r.field,u))}return t||null}function SN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ly(t,r,(i,u)=>function DF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Gp&&r instanceof Gp||t instanceof Wp&&r instanceof Wp?ly(t.elements,r.elements,Tu):t instanceof _y&&r instanceof _y?Tu(t.k,r.k):t instanceof yy&&r instanceof yy);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function xN(n){return n.isFoundDocument()?n.version:Et.min()}class cw extends ZC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class zp extends ZC{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function RN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MN(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],d=u.transform,p=e.data.field(u.field);r.set(u.field,bF(d,p,t[i]))}return r}function NN(n,e,t){const r=new Map;for(const i of n){const u=i.transform,d=t.data.field(i.field);r.set(i.field,CF(u,d,e))}return r}class dw extends ZC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ox extends ZC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class RF{constructor(e){this.count=e}}var $r,nn;function PN(n){switch(n){default:return ct();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function ON(n){if(void 0===n)return Hr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case $r.OK:return ce.OK;case $r.CANCELLED:return ce.CANCELLED;case $r.UNKNOWN:return ce.UNKNOWN;case $r.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case $r.INTERNAL:return ce.INTERNAL;case $r.UNAVAILABLE:return ce.UNAVAILABLE;case $r.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case $r.NOT_FOUND:return ce.NOT_FOUND;case $r.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case $r.ABORTED:return ce.ABORTED;case $r.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case $r.DATA_LOSS:return ce.DATA_LOSS;default:return ct()}}(nn=$r||($r={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class xr{constructor(e,t){this.comparator=e,this.root=t||Wi.EMPTY}insert(e,t){return new xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wi.BLACK,null,null))}remove(e){return new xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new HC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new HC(this.root,e,this.comparator,!1)}getReverseIterator(){return new HC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new HC(this.root,e,this.comparator,!0)}}class HC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wi{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Wi.RED,this.left=null!=i?i:Wi.EMPTY,this.right=null!=u?u:Wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Wi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Wi.EMPTY=null,Wi.RED=!0,Wi.BLACK=!1,Wi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kN(this.data.getIterator())}getIteratorFrom(e){return new kN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tr(this.comparator);return t.data=e,t}}class kN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vy(n){return n.hasNext()?n.getNext():void 0}const MF=new xr(Xe.comparator);function Da(){return MF}const NF=new xr(Xe.comparator);function ax(){return NF}const PF=new xr(Xe.comparator),OF=new tr(Xe.comparator);function yn(...n){let e=OF;for(const t of n)e=e.add(t);return e}const kF=new tr(Wt);function qC(){return kF}class hw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,fw.createSynthesizedTargetChangeForCurrentChange(e,t)),new hw(Et.min(),r,qC(),Da(),yn())}}class fw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fw(ii.EMPTY_BYTE_STRING,t,yn(),yn(),yn())}}class $C{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class FN{constructor(e,t){this.targetId=e,this.F=t}}class LN{constructor(e,t,r=ii.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UN{constructor(){this.B=0,this.L=BN(),this.U=ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=yn(),t=yn(),r=yn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new fw(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=BN()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class FF{constructor(e){this.nt=e,this.st=new Map,this.it=Da(),this.rt=VN(),this.ot=new tr(Wt)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const u=i.target;if(LC(u))if(0===r){const d=new Xe(u.path);this.at(t,d,fr.newNoDocument(d,Et.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const p=this.wt(d);if(p){if(u.current&&LC(p.target)){const _=new Xe(p.target.path);null!==this.it.get(_)||this.It(d,_)||this.at(d,_,fr.newNoDocument(_,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=yn();this.rt.forEach((u,d)=>{let p=!0;d.forEachWhile(_=>{const I=this.wt(_);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const i=new hw(e,t,this.ot,this.it,r);return this.it=Da(),this.rt=VN(),this.ot=new tr(Wt),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new UN,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new tr(Wt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new UN),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function VN(){return new xr(Xe.comparator)}function BN(){return new xr(Xe.comparator)}const LF={asc:"ASCENDING",desc:"DESCENDING"},UF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VF{constructor(e,t){this.databaseId=e,this.N=t}}function pw(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jN(n,e){return n.N?e.toBase64():e.toUint8Array()}function BF(n,e){return pw(n,e.toTimestamp())}function gi(n){return Dt(!!n),Et.fromTimestamp(function(e){const t=Fh(e);return new fi(t.seconds,t.nanos)}(n))}function ux(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZN(n){const e=pn.fromString(n);return Dt(QN(e)),e}function gw(n,e){return ux(n.databaseId,e.path)}function Cl(n,e){const t=ZN(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(qN(t))}function lx(n,e){return ux(n.databaseId,e)}function HN(n){const e=ZN(n);return 4===e.length?pn.emptyPath():qN(e)}function mw(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qN(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $N(n,e,t){return{name:gw(n,e),fields:t.value.mapValue.fields}}function GN(n,e,t){const r=Cl(n,e.name),i=gi(e.updateTime),u=new cs({mapValue:{fields:e.fields}}),d=fr.newFoundDocument(r,i,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function yw(n,e){let t;if(e instanceof cw)t={update:$N(n,e.key,e.value)};else if(e instanceof dw)t={delete:gw(n,e.key)};else if(e instanceof zp)t={update:$N(n,e.key,e.data),updateMask:KF(e.fieldMask)};else{if(!(e instanceof ox))return ct();t={verify:gw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const d=u.transform;if(d instanceof yy)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Gp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Wp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof _y)return{fieldPath:u.field.canonicalString(),increment:d.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:BF(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function cx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qr.updateTime(gi(i.updateTime)):void 0!==i.exists?qr.exists(i.exists):qr.none():qr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,d){let p=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),p=new yy):"appendMissingElements"in d?p=new Gp(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new Wp(d.removeAllFromArray.values||[]):"increment"in d?p=new _y(u,d.increment):ct();const _=pi.fromServerFormat(d.fieldPath);return new lw(_,p)}(n,i)):[];var i;if(e.update){const i=Cl(n,e.update.name),u=new cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new cy((e.updateMask.fieldPaths||[]).map(I=>pi.fromServerFormat(I)));return new zp(i,u,d,t,r)}return new cw(i,u,t,r)}if(e.delete){const i=Cl(n,e.delete);return new dw(i,t)}if(e.verify){const i=Cl(n,e.verify);return new ox(i,t)}return ct()}function WN(n,e){return{documents:[lx(n,e.path)]}}function zN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=lx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const I=_.map(A=>function(x){if("=="===x.op){if(cN(x.value))return{unaryFilter:{field:wy(x.field),op:"IS_NAN"}};if(lN(x.value))return{unaryFilter:{field:wy(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(cN(x.value))return{unaryFilter:{field:wy(x.field),op:"IS_NOT_NAN"}};if(lN(x.value))return{unaryFilter:{field:wy(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wy(x.field),op:GF(x.op),value:x.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:wy((A=I).field),direction:$F(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(I=e.limit,n.N||qp(I)?I:{value:I});var I,p,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function KN(n){let e=HN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=YN(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new py(Ey((x=A).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(A){let x;return x="object"==typeof A?A.value:A,qp(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new fy((A=t.startAt).values||[],!!A.before));let I=null;return t.endAt&&(I=function(A){return new fy(A.values||[],!A.before)}(t.endAt)),mN(e,i,d,u,p,"F",_,I)}function YN(n){return n?void 0!==n.unaryFilter?[zF(n)]:void 0!==n.fieldFilter?[WF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>YN(e)).reduce((e,t)=>e.concat(t)):ct():[]}function $F(n){return LF[n]}function GF(n){return UF[n]}function wy(n){return{fieldPath:n.canonicalString()}}function Ey(n){return pi.fromServerFormat(n.fieldPath)}function WF(n){return ks.create(Ey(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function zF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ey(n.unaryFilter.field);return ks.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ey(n.unaryFilter.field);return ks.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ey(n.unaryFilter.field);return ks.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ey(n.unaryFilter.field);return ks.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function KF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JN(e)),e=YF(n.get(t),e);return JN(e)}function YF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function JN(n){return n+"\x01\x01"}function bl(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&ct(),n.charAt(d+1)){case"\x01":const p=n.substring(u,d);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,d),i+="\0";break;case"\x11":i+=n.substring(u,d+1);break;default:ct()}u=d+2}return new pn(r)}class QF{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class qo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}qo.store="owner",qo.key="owner";class Lh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Lh.store="mutationQueues",Lh.keyPath="userId";class Bn{constructor(e,t,r,i,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=u}}Bn.store="mutations",Bn.keyPath="batchId",Bn.userMutationsIndex="userMutationsIndex",Bn.userMutationsKeyPath=["userId","batchId"];class ds{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,mi(t)]}static key(e,t,r){return[e,mi(t),r]}}ds.store="documentMutations",ds.PLACEHOLDER=new ds;class JF{constructor(e,t){this.path=e,this.readTime=t}}class XF{constructor(e,t){this.path=e,this.version=t}}class wr{constructor(e,t,r,i,u,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=u,this.parentPath=d}}wr.store="remoteDocuments",wr.readTimeIndex="readTimeIndex",wr.readTimeIndexPath="readTime",wr.collectionReadTimeIndex="collectionReadTimeIndex",wr.collectionReadTimeIndexPath=["parentPath","readTime"];class Dl{constructor(e){this.byteSize=e}}Dl.store="remoteDocumentGlobal",Dl.key="remoteDocumentGlobalKey";class uo{constructor(e,t,r,i,u,d,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=d,this.query=p}}uo.store="targets",uo.keyPath="targetId",uo.queryTargetsIndexName="queryTargetsIndex",uo.queryTargetsKeyPath=["canonicalId","targetId"];class zi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}zi.store="targetDocuments",zi.keyPath=["targetId","path"],zi.documentTargetsIndex="documentTargetsIndex",zi.documentTargetsKeyPath=["path","targetId"];class $o{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}$o.key="targetGlobalKey",$o.store="targetGlobal";class Kp{constructor(e,t){this.collectionId=e,this.parent=t}}Kp.store="collectionParents",Kp.keyPath=["collectionId","parent"];class kc{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}kc.store="clientMetadata",kc.keyPath="clientId";class Iy{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Iy.store="bundles",Iy.keyPath="bundleId";class Ty{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Ty.store="namedQueries",Ty.keyPath="name";class Go{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Go.store="indexConfiguration",Go.keyPath="indexId",Go.collectionGroupIndex="collectionGroupIndex",Go.collectionGroupIndexPath="collectionGroup";class Aa{constructor(e,t,r,i,u,d){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=u,this.largestBatchId=d}}Aa.store="indexState",Aa.keyPath=["indexId","uid"],Aa.sequenceNumberIndex="sequenceNumberIndex",Aa.sequenceNumberIndexPath=["uid","sequenceNumber"];class Sa{constructor(e,t,r,i,u){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=u}}Sa.store="indexEntries",Sa.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Sa.documentKeyIndex="documentKeyIndex",Sa.documentKeyIndexPath=["indexId","uid","documentKey"];class yi{constructor(e,t,r,i,u,d){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=u,this.overlayMutation=d}}yi.store="documentOverlays",yi.keyPath=["userId","collectionPath","documentId"],yi.collectionPathOverlayIndex="collectionPathOverlayIndex",yi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],yi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",yi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const XN=[Lh.store,Bn.store,ds.store,wr.store,uo.store,qo.store,$o.store,zi.store,kc.store,Dl.store,Kp.store,Iy.store,Ty.store],eP=[...XN,yi.store],eL=[...eP,Go.store,Aa.store,Sa.store],tP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,u=0,d=!1;e.forEach(p=>{++i,p.next(()=>{++u,d&&u===i&&t()},_=>r(_))}),d=!0,u===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class GC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new hi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new _w(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=dx(r.target.error);this.At.reject(new _w(e,i))}}static open(e,t,r,i){try{return new GC(t,e.transaction(i,r))}catch(u){throw new _w(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nL(t)}}class Cu{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Cu.vt((0,O.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Qp(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,O.hl)())return!1;if(Cu.St())return!0;const e=(0,O.z$)(),t=Cu.vt(e),r=0<t&&t<10,i=Cu.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{i(new _w(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const p=d.target.error;i("VersionError"===p.name?new Pe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Pe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new _w(e,p))},u.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.xt(e);const _=GC.open(u.db,e,d?"readonly":"readwrite",r),I=i(_).next(A=>(_.Pt(),A)).catch(A=>(_.abort(A),ge.reject(A))).toPromise();return I.catch(()=>{}),yield _.Rt,I}catch(_){const I="FirebaseError"!==_.name&&p<3;if(Ve("SimpleDb","Transaction failed with error:",_.message,"Retrying:",I),u.close(),!I)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tL{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Qp(this.$t.delete())}}class _w extends Pe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yp(n){return"IndexedDbTransactionError"===n.name}class nL{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qp(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Qp(this.store.add(e))}get(e){return Qp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Qp(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Qp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(d,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ge((u,d)=>{i.onerror=p=>{d(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,d,p)=>p.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=u=>{const d=dx(u.target.error);i(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ge((i,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void i();const _=new tL(p),I=t(p.primaryKey,p.value,_);if(I instanceof ge){const A=I.catch(x=>(_.done(),ge.reject(x)));r.push(A)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qp(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=dx(r.target.error);t(i)}})}let rP=!1;function dx(n){const e=Cu.vt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rP||(rP=!0,setTimeout(()=>{throw r},0)),r}}return n}class iP extends nP{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function _i(n,e){const t=ze(n);return Cu.Nt(t.zt,e)}class hx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&SF(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&sx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&sx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&ly(this.mutations,e.mutations,(t,r)=>SN(t,r))&&ly(this.baseMutations,e.baseMutations,(t,r)=>SN(t,r))}}class fx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=PF;const u=e.mutations;for(let d=0;d<u.length;d++)i=i.insert(u[d].key,r[d].version);return new fx(e,t,r,i)}}class px{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uh{constructor(e,t,r,i,u=Et.min(),d=Et.min(),p=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new Uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sP{constructor(e){this.Ht=e}}function oP(n,e){let t;if(e.document)t=GN(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Xp(e.noDocument.readTime);t=fr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=Xp(e.unknownDocument.version);t=fr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(mx(e.readTime)),t}function aP(n,e){const t=gx(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:gw(d=n.Ht,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:pw(d,p.version.toTimestamp())};return new wr(null,null,i,e.hasCommittedMutations,t,r)}var d,p;if(e.isNoDocument()){const i=e.key.path.toArray(),u=Jp(e.version),d=e.hasCommittedMutations;return new wr(null,new JF(i,u),null,d,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),u=Jp(e.version);return new wr(new XF(i,u),null,null,!0,t,r)}return ct()}function gx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mx(n){const e=new fi(n[0],n[1]);return Et.fromTimestamp(e)}function Jp(n){const e=n.toTimestamp();return new QF(e.seconds,e.nanoseconds)}function Xp(n){const e=new fi(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Cy(n,e){const t=(e.baseMutations||[]).map(u=>cx(n.Ht,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>cx(n.Ht,u)),i=fi.fromMillis(e.localWriteTimeMs);return new hx(e.batchId,i,t,r)}function vw(n){const e=Xp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xp(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=ba(gy(HN(i.documents[0])))):r=ba(KN(n.query)),new Uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ii.fromBase64String(n.resumeToken))}function uP(n,e){const t=Jp(e.snapshotVersion),r=Jp(e.lastLimboFreeSnapshotVersion);let i;i=LC(e.target)?WN(n.Ht,e.target):zN(n.Ht,e.target);const u=e.resumeToken.toBase64();return new uo(e.targetId,aw(e.target),t,u,e.sequenceNumber,r,i)}function yx(n){const e=KN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yN(e,e.limit,"L"):e}function _x(n,e){return new px(e.largestBatchId,cx(n.Ht,e.overlayMutation))}function lP(n,e){const t=e.path.lastSegment();return[n,mi(e.path.popLast()),t]}class rL{getBundleMetadata(e,t){return cP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Xp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cP(e).put({bundleId:(r=t).id,createTime:Jp(gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:yx(i.bundledQuery),readTime:Xp(i.readTime)};var i})}saveNamedQuery(e,t){return dP(e).put({name:(r=t).name,readTime:Jp(gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cP(n){return _i(n,Iy.store)}function dP(n){return _i(n,Ty.store)}class vx{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new vx(e,t.uid||"")}getOverlay(e,t){return ww(e).get(lP(this.userId,t)).next(r=>r?_x(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(u=>{const d=new px(t,u);i.push(this.Yt(e,d))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(mi(d.getCollectionPath())));const u=[];return i.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(ww(e).Gt(yi.collectionPathOverlayIndex,p))}),ge.waitFor(u)}getOverlaysForCollection(e,t,r){const i=new Map,u=mi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ww(e).qt(yi.collectionPathOverlayIndex,d).next(p=>{for(const _ of p){const I=_x(this.O,_);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=new Map;let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ww(e).Qt({index:yi.collectionGroupOverlayIndex,range:p},(_,I,A)=>{const x=_x(this.O,I);u.size<i||x.largestBatchId===d?(u.set(x.getKey(),x),d=x.largestBatchId):A.done()}).next(()=>u)}Yt(e,t){return ww(e).put(function(r,i,u){const[d,p,_]=lP(i,u.mutation.key);return new yi(i,p,_,u.mutation.key.getCollectionGroup(),u.largestBatchId,yw(r.Ht,u.mutation))}(this.O,this.userId,t))}}function ww(n){return _i(n,yi.store)}class WC{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),rw(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Zp(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Tu(e,hF)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):ct()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Xe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function iL(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function hP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=iL(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}WC.le=new WC;class sL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=hP(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=hP(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oL{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class aL{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class fP{constructor(){this.Se=new sL,this.De=new oL(this.Se),this.Ce=new aL(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class wx{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function Ex(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=pP(n.arrayValue,e.arrayValue),0!==t?t:pP(n.directionalValue,e.directionalValue)))}function pP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uL{constructor(){this.xe=new Ix}addToCollectionParentIndex(e,t){return this.xe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t,r){return ge.resolve(yn())}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Ix{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tr(pn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tr(pn.comparator)).toArray()}}class lL{constructor(e){this.user=e,this.ke=new Ix,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const u={collectionId:r,parent:mi(i)};return gP(e).put(u)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rN(t),""],!1,!0);return gP(e).qt(i).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(bl(d.parent))}return r})}addFieldIndex(e,t){const r=KC(e),i=new Go((u=t).indexId,u.collectionGroup,u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind]));var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=KC(e),i=YC(e),u=zC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return ge.resolve(yn())}getFieldIndex(e,t){return ge.resolve(null)}Oe(e,t){const r=new fP;for(const i of e.fields.filter(d=>2!==d.kind)){const u=t.data.field(i.fieldPath);if(null==u)return null;const d=r.Ne(i.kind);WC.le.Xt(u,d)}return r.Ve()}Me(e){const t=new fP;return WC.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=KC(e),i=YC(e);return(t?r.qt(Go.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return ge.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{d.push(function(I,A){const x=A?new ow(A.sequenceNumber,new kC(Xp(A.readTime),new Xe(bl(A.documentKey)),A.largestBatchId)):ow.empty(),P=I.fields.map(([U,W])=>new OC(pi.fromServerFormat(U),W));return new XS(I.indexId,I.collectionGroup,P,x)}(p,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=KC(e),u=YC(e);return this.$e(e).next(d=>i.qt(Go.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(p=>ge.forEach(p,_=>{return u.put(new Aa(_.indexId,this.user.uid||"",d,Jp((P=r).readTime),mi(P.documentKey.path),P.largestBatchId));var P})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,u)=>{const d=r.get(i.collectionGroup);return(d?ge.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ge.forEach(p,_=>this.Fe(e,i,_).next(I=>{const A=this.Be(u,_);return I.isEqual(A)?ge.resolve():this.Le(e,u,I,A)}))))})}Ue(e,t,r){return zC(e).put(new Sa(r.indexId,this.uid,r.arrayValue,r.directionalValue,mi(t.key.path)))}qe(e,t,r){return zC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,mi(t.key.path)])}Fe(e,t,r){const i=zC(e);let u=new tr(Ex);return i.Qt({index:Sa.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,mi(t.path)])},(d,p)=>{u=u.add(new wx(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}Be(e,t){let r=new tr(Ex);const i=this.Oe(t,e);if(null==i)return r;const u=t.fields.find(p=>2===p.kind);if(null!=u){const d=e.data.field(u.fieldPath);if(NC(d))for(const p of d.arrayValue.values||[])r=r.add(new wx(t.indexId,e.key,this.Me(p),i))}else r=r.add(new wx(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,_,I,A){const x=d.getIterator(),P=p.getIterator();let U=vy(x),W=vy(P);for(;U||W;){let Ie=!1,Ue=!1;if(U&&W){const ot=_(U,W);ot<0?Ue=!0:ot>0&&(Ie=!0)}else null!=U?Ue=!0:Ie=!0;Ie?(I(W),W=vy(P)):Ue?(A(U),U=vy(x)):(U=vy(x),W=vy(P))}}(r,i,Ex,d=>{u.push(this.Ue(e,t,d))},d=>{u.push(this.qe(e,t,d))}),ge.waitFor(u)}$e(e){let t=1;return YC(e).Qt({index:Aa.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}}function gP(n){return _i(n,Kp.store)}function zC(n){return _i(n,Sa.store)}function KC(n){return _i(n,Go.store)}function YC(n){return _i(n,Aa.store)}const mP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yP(n,e,t){const r=n.store(Bn.store),i=n.store(ds.store),u=[],d=IDBKeyRange.only(t.batchId);let p=0;const _=r.Qt({range:d},(A,x,P)=>(p++,P.delete()));u.push(_.next(()=>{Dt(1===p)}));const I=[];for(const A of t.mutations){const x=ds.key(e,A.key.path,t.batchId);u.push(i.delete(x)),I.push(A.key)}return ge.waitFor(u).next(()=>I)}function QC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class Tx{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Tx(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vh(e).Qt({index:Bn.userMutationsIndex,range:r},(i,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=by(e),d=Vh(e);return d.add({}).next(p=>{Dt("number"==typeof p);const _=new hx(p,t,r,i),I=function(P,U,W){const Ie=W.baseMutations.map(ot=>yw(P.Ht,ot)),Ue=W.mutations.map(ot=>yw(P.Ht,ot));return new Bn(U,W.batchId,W.localWriteTime.toMillis(),Ie,Ue)}(this.O,this.userId,_),A=[];let x=new tr((P,U)=>Wt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=ds.key(this.userId,P.key.path,p);x=x.add(P.key.path.popLast()),A.push(d.put(I)),A.push(u.put(U,ds.PLACEHOLDER))}return x.forEach(P=>{A.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Ke[p]=_.keys()}),ge.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Vh(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Cy(this.O,r)):null)}Ge(e,t){return this.Ke[t]?ge.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vh(e).Qt({index:Bn.userMutationsIndex,range:i},(d,p,_)=>{p.userId===this.userId&&(Dt(p.batchId>=r),u=Cy(this.O,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vh(e).Qt({index:Bn.userMutationsIndex,range:t,reverse:!0},(i,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vh(e).qt(Bn.userMutationsIndex,t).next(r=>r.map(i=>Cy(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ds.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return by(e).Qt({range:i},(d,p,_)=>{const[I,A,x]=d,P=bl(A);if(I===this.userId&&t.path.isEqual(P))return Vh(e).get(x).next(U=>{if(!U)throw ct();Dt(U.userId===this.userId),u.push(Cy(this.O,U))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Wt);const i=[];return t.forEach(u=>{const d=ds.prefixForPath(this.userId,u.path),p=IDBKeyRange.lowerBound(d),_=by(e).Qt({range:p},(I,A,x)=>{const[P,U,W]=I,Ie=bl(U);P===this.userId&&u.path.isEqual(Ie)?r=r.add(W):x.done()});i.push(_)}),ge.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=ds.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(u);let p=new tr(Wt);return by(e).Qt({range:d},(_,I,A)=>{const[x,P,U]=_,W=bl(P);x===this.userId&&r.isPrefixOf(W)?W.length===i&&(p=p.add(U)):A.done()}).next(()=>this.je(e,p))}je(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Vh(e).get(u).next(d=>{if(null===d)throw ct();Dt(d.userId===this.userId),r.push(Cy(this.O,d))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yP(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(ds.prefixForUser(this.userId)),i=[];return by(e).Qt({range:r},(u,d,p)=>{if(u[0]===this.userId){const _=bl(u[1]);i.push(_)}else p.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return _P(e,this.userId,t)}We(e){return vP(e).get(this.userId).next(t=>t||new Lh(this.userId,-1,""))}}function _P(n,e,t){const r=ds.prefixForPath(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return by(n).Qt({range:u,jt:!0},(p,_,I)=>{const[A,x,P]=p;A===e&&x===i&&(d=!0),I.done()}).next(()=>d)}function Vh(n){return _i(n,Bn.store)}function by(n){return _i(n,ds.store)}function vP(n){return _i(n,Lh.store)}class eg{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new eg(0)}static Je(){return new eg(-1)}}class cL{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new eg(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>Et.fromTimestamp(new fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dy(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Dy(e).Qt((d,p)=>{const _=vw(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ge.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Dy(e).Qt((r,i)=>{const u=vw(i);t(u)})}Ye(e){return wP(e).get($o.key).next(t=>(Dt(null!==t),t))}Xe(e,t){return wP(e).put($o.key,t)}Ze(e,t){return Dy(e).put(uP(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=aw(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Dy(e).Qt({range:i,index:uo.queryTargetsIndexName},(d,p,_)=>{const I=vw(p);FC(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Bh(e);return t.forEach(d=>{const p=mi(d.path);i.push(u.put(new zi(r,p))),i.push(this.referenceDelegate.addReference(e,r,d))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bh(e);return ge.forEach(t,u=>{const d=mi(u.path);return ge.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Bh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bh(e);let u=yn();return i.Qt({range:r,jt:!0},(d,p,_)=>{const I=bl(d[1]),A=new Xe(I);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=mi(t.path),i=IDBKeyRange.bound([r],[rN(r)],!1,!0);let u=0;return Bh(e).Qt({index:zi.documentTargetsIndex,jt:!0,range:i},([d,p],_,I)=>{0!==d&&(u++,I.done())}).next(()=>u>0)}Tt(e,t){return Dy(e).get(t).next(r=>r?vw(r):null)}}function Dy(n){return _i(n,uo.store)}function wP(n){return _i(n,$o.store)}function Bh(n){return _i(n,zi.store)}function tg(n){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==tP)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Cx.apply(this,arguments)}function EP([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class dL{constructor(e){this.en=e,this.buffer=new tr(EP),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hL{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Yp(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield tg(i)}yield t.un(e)}))}}class fL{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Ho.A);const r=new dL(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(mP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mP):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,u,d,p,_,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,d=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),zS()<=yt.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${i} in `+(p-d)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(I-_)+`ms\nTotal Duration: ${I-A}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class pL{constructor(e,t){this.db=e,this.garbageCollector=new fL(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return JC(e,r)}removeReference(e,t,r){return JC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return JC(e,t)}wn(e,t){return function(r,i){let u=!1;return vP(r).Wt(d=>_P(r,d,i).next(p=>(p&&(u=!0),ge.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this._n(e,(d,p)=>{if(p<=t){const _=this.wn(e,d).next(I=>{if(!I)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),Bh(e).delete([0,mi(d.path)])))});i.push(_)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return JC(e,t)}_n(e,t){const r=Bh(e);let i,u=Ho.A;return r.Qt({index:zi.documentTargetsIndex},([d,p],{path:_,sequenceNumber:I})=>{0===d?(u!==Ho.A&&t(new Xe(bl(i)),u),u=I,i=_):u=Ho.A}).next(()=>{u!==Ho.A&&t(new Xe(bl(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function JC(n,e){return Bh(n).put((r=n.currentSequenceNumber,new zi(0,mi(e.path),r)));var r}class Ay{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){jp(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return sN(this.inner)}}class IP{constructor(){this.changes=new Ay(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gL{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jh(e).put(XC(t),r)}removeEntry(e,t){const r=jh(e),i=XC(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return jh(e).get(XC(t)).next(r=>this.gn(t,r))}yn(e,t){return jh(e).get(XC(t)).next(r=>({document:this.gn(t,r),size:QC(r)}))}getEntries(e,t){let r=Da();return this.pn(e,t,(i,u)=>{const d=this.gn(i,u);r=r.insert(i,d)}).next(()=>r)}In(e,t){let r=Da(),i=new xr(Xe.comparator);return this.pn(e,t,(u,d)=>{const p=this.gn(u,d);r=r.insert(u,p),i=i.insert(u,QC(d))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return ge.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let d=u.getNext();return jh(e).Qt({range:i},(p,_,I)=>{const A=Xe.fromSegments(p);for(;d&&Xe.comparator(d,A)<0;)r(d,null),d=u.getNext();d&&d.isEqual(A)&&(r(d,_),d=u.hasNext()?u.getNext():null),d?I.Ut(d.path.toArray()):I.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAll(e,t,r){let i=Da();const u=t.length+1,d={};if(r.isEqual(Et.min())){const p=t.toArray();d.range=IDBKeyRange.lowerBound(p)}else{const p=t.toArray(),_=gx(r);d.range=IDBKeyRange.lowerBound([p,_],!0),d.index=wr.collectionReadTimeIndex}return jh(e).Qt(d,(p,_,I)=>{if(p.length!==u)return;const A=this.gn(Xe.fromSegments(p),_);t.isPrefixOf(A.key.path)?i=i.insert(A.key,A):I.done()}).next(()=>i)}newChangeBuffer(e){return new mL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TP(e).get(Dl.key).next(t=>(Dt(!!t),t))}mn(e,t){return TP(e).put(Dl.key,t)}gn(e,t){if(t){const r=oP(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return fr.newInvalidDocument(e)}}class mL extends IP{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Ay(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new tr((u,d)=>Wt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const p=this.An.get(u);if(d.isValidDocument()){const _=aP(this.Tn.O,d);i=i.add(u.path.popLast()),r+=QC(_)-p,t.push(this.Tn.addEntry(e,u,_))}else if(r-=p,this.trackRemovals){const _=aP(this.Tn.O,d.convertToNoDocument(Et.min()));t.push(this.Tn.addEntry(e,u,_))}else t.push(this.Tn.removeEntry(e,u))}),i.forEach(u=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Tn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((u,d)=>{this.An.set(u,d)}),r))}}function TP(n){return _i(n,Dl.store)}function jh(n){return _i(n,wr.store)}function XC(n){return n.path.toArray()}class yL{constructor(e){this.O=e}kt(e,t,r,i){const u=new GC("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(qo.store),(p=e).createObjectStore(Lh.store,{keyPath:Lh.keyPath}),p.createObjectStore(Bn.store,{keyPath:Bn.keyPath,autoIncrement:!0}).createIndex(Bn.userMutationsIndex,Bn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(ds.store),CP(e),function(p){p.createObjectStore(wr.store)}(e));let d=ge.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(zi.store),p.deleteObjectStore(uo.store),p.deleteObjectStore($o.store)}(e),CP(e)),d=d.next(()=>function(p){const _=p.store($o.store),I=new $o(0,0,Et.min().toTimestamp(),0);return _.put($o.key,I)}(u))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(p,_){return _.store(Bn.store).qt().next(I=>{p.deleteObjectStore(Bn.store),p.createObjectStore(Bn.store,{keyPath:Bn.keyPath,autoIncrement:!0}).createIndex(Bn.userMutationsIndex,Bn.userMutationsKeyPath,{unique:!0});const A=_.store(Bn.store),x=I.map(P=>A.put(P));return ge.waitFor(x)})}(e,u))),d=d.next(()=>{!function(p){p.createObjectStore(kc.store,{keyPath:kc.keyPath})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Rn(u))),r<6&&i>=6&&(d=d.next(()=>(function(p){p.createObjectStore(Dl.store)}(e),this.Pn(u)))),r<7&&i>=7&&(d=d.next(()=>this.bn(u))),r<8&&i>=8&&(d=d.next(()=>this.vn(e,u))),r<9&&i>=9&&(d=d.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const _=p.objectStore(wr.store);_.createIndex(wr.readTimeIndex,wr.readTimeIndexPath,{unique:!1}),_.createIndex(wr.collectionReadTimeIndex,wr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Vn(u))),r<11&&i>=11&&(d=d.next(()=>{(function(p){p.createObjectStore(Iy.store,{keyPath:Iy.keyPath})})(e),function(p){p.createObjectStore(Ty.store,{keyPath:Ty.keyPath})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(p){const _=p.createObjectStore(yi.store,{keyPath:yi.keyPath});_.createIndex(yi.collectionPathOverlayIndex,yi.collectionPathOverlayIndexPath,{unique:!1}),_.createIndex(yi.collectionGroupOverlayIndex,yi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>{!function(p){p.createObjectStore(Go.store,{keyPath:Go.keyPath,autoIncrement:!0}).createIndex(Go.collectionGroupIndex,Go.collectionGroupIndexPath,{unique:!1}),p.createObjectStore(Aa.store,{keyPath:Aa.keyPath}).createIndex(Aa.sequenceNumberIndex,Aa.sequenceNumberIndexPath,{unique:!1}),p.createObjectStore(Sa.store,{keyPath:Sa.keyPath}).createIndex(Sa.documentKeyIndex,Sa.documentKeyIndexPath,{unique:!1})}(e)})),d}Pn(e){let t=0;return e.store(wr.store).Qt((r,i)=>{t+=QC(i)}).next(()=>{const r=new Dl(t);return e.store(Dl.store).put(Dl.key,r)})}Rn(e){const t=e.store(Lh.store),r=e.store(Bn.store);return t.qt().next(i=>ge.forEach(i,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt(Bn.userMutationsIndex,d).next(p=>ge.forEach(p,_=>{Dt(_.userId===u.userId);const I=Cy(this.O,_);return yP(e,u.userId,I).next(()=>{})}))}))}bn(e){const t=e.store(zi.store),r=e.store(wr.store);return e.store($o.store).get($o.key).next(i=>{const u=[];return r.Qt((d,p)=>{const _=new pn(d),I=[0,mi(_)];u.push(t.get(I).next(A=>A?ge.resolve():t.put(new zi(0,mi(_),i.highestListenSequenceNumber))))}).next(()=>ge.waitFor(u))})}vn(e,t){e.createObjectStore(Kp.store,{keyPath:Kp.keyPath});const r=t.store(Kp.store),i=new Ix,u=d=>{if(i.add(d)){const p=d.lastSegment(),_=d.popLast();return r.put({collectionId:p,parent:mi(_)})}};return t.store(wr.store).Qt({jt:!0},(d,p)=>{const _=new pn(d);return u(_.popLast())}).next(()=>t.store(ds.store).Qt({jt:!0},([d,p,_],I)=>{const A=bl(p);return u(A.popLast())}))}Vn(e){const t=e.store(uo.store);return t.Qt((r,i)=>{const u=vw(i),d=uP(this.O,u);return t.put(d)})}}function CP(n){n.createObjectStore(zi.store,{keyPath:zi.keyPath}).createIndex(zi.documentTargetsIndex,zi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(uo.store,{keyPath:uo.keyPath}).createIndex(uo.queryTargetsIndexName,uo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore($o.store)}const bx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dx{constructor(e,t,r,i,u,d,p,_,I,A,x=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=u,this.window=d,this.document=p,this.Dn=I,this.Cn=A,this.schemaVersion=x,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=P=>Promise.resolve(),!Dx.Vt())throw new Pe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pL(this,i),this.Bn=t+"main",this.O=new sP(_),this.Ln=new Cu(this.Bn,this.schemaVersion,new yL(this.O)),this.Un=new cL(this.referenceDelegate,this.O),this.qn=new gL(this.O),this.Kn=new rL,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===A&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ce.FAILED_PRECONDITION,bx);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Ho(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eb(e).put(new kc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(Yp(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Ew(e).get(qo.key).next(t=>ge.resolve(this.ts(t)))}es(e){return eb(e).delete(this.clientId)}ns(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_i(r,kc.store);return i.qt().next(u=>{const d=e.rs(u,18e5),p=u.filter(_=>-1===d.indexOf(_));return ge.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ge.resolve(!0):Ew(e).get(qo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Pe(ce.FAILED_PRECONDITION,bx);return!1}}return!(!this.networkEnabled||!this.inForeground)||eb(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[qo.store,kc.store],t=>{const r=new iP(t,Ho.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>eb(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return Tx.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new lL(e)}getDocumentOverlayCache(e){return vx.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=13===(d=this.schemaVersion)?eL:12===d?eP:11===d?XN:void ct();var d;let p;return this.Ln.runTransaction(e,i,u,_=>(p=new iP(_,this.Nn?this.Nn.next():Ho.A),"readwrite-primary"===t?this.Jn(p).next(I=>!!I||this.Yn(p)).next(I=>{if(!I)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Pe(ce.FAILED_PRECONDITION,tP);return r(p)}).next(I=>this.Zn(p).next(()=>I)):this._s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}_s(e){return Ew(e).get(qo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ce.FAILED_PRECONDITION,bx)})}Zn(e){const t=new qo(this.clientId,this.allowTabSynchronization,Date.now());return Ew(e).put(qo.key,t)}static Vt(){return Cu.Vt()}Xn(e){const t=Ew(e);return t.get(qo.key).next(r=>this.ts(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete(qo.key)):ge.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ew(n){return _i(n,qo.store)}function eb(n){return _i(n,kc.store)}function Ax(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _L{constructor(e,t){this.progress=e,this.ws=t}}class vL{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):nx(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Xe(t)).next(r=>{let i=ax();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let u=ax();return this.indexManager.getCollectionParents(e,i).next(d=>ge.forEach(d,p=>{const _=(I=t,A=p.child(i),new Oc(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.bs(e,_,r).next(I=>{I.forEach((A,x)=>{u=u.insert(A,x)})})}).next(()=>u))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(u=>(i=u,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const p of d.mutations){const _=p.key;let I=i.get(_);null==I&&(I=fr.newInvalidDocument(_),i=i.insert(_,I)),sx(p,I,d.localWriteTime),I.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,d)=>{ix(t,d)||(i=i.remove(u))}),i))}}class Sx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=yn(),i=yn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Sx(e,t.fromCache,r,i)}}class bP{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.Ns(e,t):this.Cs.Es(e,i).next(u=>{const d=this.xs(t,u);return(UC(t)||VC(t))&&this.ks(t.limitType,d,i,r)?this.Ns(e,t):(zS()<=yt.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rx(t)),this.Cs.As(e,t,r).next(p=>(d.forEach(_=>{p=p.insert(_.key,_)}),p)))});var u}xs(e,t){let r=new tr(vN(e));return t.forEach((i,u)=>{ix(e,u)&&(r=r.add(u))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Ns(e,t){return zS()<=yt.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",rx(t)),this.Cs.As(e,t,Et.min())}}class wL{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new xr(Wt),this.$s=new Ay(u=>aw(u),FC),this.Fs=Et.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new vL(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function DP(n,e,t,r){return new wL(n,e,t,r)}function AP(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,ve.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(u=>(i=u,t.Ls(e),t.gs.getAllMutationBatches(r))).next(u=>{const d=[],p=[];let _=yn();for(const I of i){d.push(I.batchId);for(const A of I.mutations)_=_.add(A.key)}for(const I of u){p.push(I.batchId);for(const A of I.mutations)_=_.add(A.key)}return t.Us.Es(r,_).next(I=>({qs:I,removedBatchIds:d,addedBatchIds:p}))})})}),xx.apply(this,arguments)}function EL(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,_,I){const A=_.batch,x=A.keys();let P=ge.resolve();return x.forEach(U=>{P=P.next(()=>I.getEntry(p,U)).next(W=>{const Ie=_.docVersions.get(U);Dt(null!==Ie),W.version.compareTo(Ie)<0&&(A.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),I.addEntry(W)))})}),P.next(()=>d.gs.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function SP(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function IL(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach((I,A)=>{const x=i.get(A);if(!x)return;p.push(t.Un.removeMatchingKeys(u,I.removedDocuments,A).next(()=>t.Un.addMatchingKeys(u,I.addedDocuments,A)));let P=x.withSequenceNumber(u.currentSequenceNumber);var U,W,Ie;e.targetMismatches.has(A)?P=P.withResumeToken(ii.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):I.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(I.resumeToken,r)),i=i.insert(A,P),W=P,Ie=I,(0===(U=x).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&p.push(t.Un.updateTargetData(u,P))});let _=Da();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),p.push(xP(u,d,e.documentUpdates).next(I=>{_=I})),!r.isEqual(Et.min())){const I=t.Un.getLastRemoteSnapshotVersion(u).next(A=>t.Un.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(I)}return ge.waitFor(p).next(()=>d.apply(u)).next(()=>t.Us.Ts(u,_)).next(()=>_)}).then(u=>(t.Ms=i,u))}function xP(n,e,t){let r=yn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Da();return t.forEach((d,p)=>{const _=i.get(d);p.isNoDocument()&&p.version.isEqual(Et.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):Ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),u})}function TL(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Sy(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(u=>u?(i=u,ge.resolve(i)):t.Un.allocateTargetId(r).next(d=>(i=new Uh(e,d,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function xy(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=r.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Yp(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),Rx.apply(this,arguments)}function tb(n,e,t){const r=ze(n);let i=Et.min(),u=yn();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,_,I){const A=ze(p),x=A.$s.get(I);return void 0!==x?ge.resolve(A.Ms.get(x)):A.Un.getTargetData(_,I)}(r,d,ba(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(d,p.targetId).next(_=>{u=_})}).next(()=>r.Os.As(d,e,t?i:Et.min(),t?u:yn())).next(p=>({documents:p,Ks:u})))}function RP(n,e){const t=ze(n),r=ze(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Tt(u,e).next(d=>d?d.target:null))}function MP(n){const e=ze(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,u){const d=ze(r);let p=Da(),_=gx(u);const I=jh(i),A=IDBKeyRange.lowerBound(_,!0);return I.Qt({index:wr.readTimeIndex,range:A},(x,P)=>{const U=oP(d.O,P);p=p.insert(U.key,U),_=P.readTime}).next(()=>({ws:p,readTime:mx(_)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function Mx(){return Mx=(0,ve.Z)(function*(n){const e=ze(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=jh(r);let u=Et.min();return i.Qt({index:wr.readTimeIndex,reverse:!0},(d,p,_)=>{p.readTime&&(u=mx(p.readTime)),_.done()}).next(()=>u)}(t)).then(t=>{e.Fs=t})}),Mx.apply(this,arguments)}function Nx(){return Nx=(0,ve.Z)(function*(n,e,t,r){const i=ze(n);let u=yn(),d=Da();for(const I of t){const A=e.Gs(I.metadata.name);I.document&&(u=u.add(A));const x=e.js(I);x.setReadTime(e.Qs(I.metadata.readTime)),d=d.insert(A,x)}const p=i.Bs.newChangeBuffer({trackRemovals:!0}),_=yield Sy(i,(I=r,ba(gy(pn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>xP(I,p,d).next(A=>(p.apply(I),A)).next(A=>i.Un.removeMatchingKeysForTargetId(I,_.targetId).next(()=>i.Un.addMatchingKeys(I,u,_.targetId)).next(()=>i.Us.Ts(I,A)).next(()=>A)))}),Nx.apply(this,arguments)}function DL(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,ve.Z)(function*(n,e,t=yn()){const r=yield Sy(n,ba(yx(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const d=gi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.Kn.saveNamedQuery(u,e);const p=r.withResumeToken(ii.EMPTY_BYTE_STRING,d);return i.Ms=i.Ms.insert(p.targetId,p),i.Un.updateTargetData(u,p).next(()=>i.Un.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Un.addMatchingKeys(u,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(u,e))})}),Px.apply(this,arguments)}class AL{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ge.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:gi(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:yx(r.bundledQuery),readTime:gi(r.readTime)}),ge.resolve();var r}}class SL{constructor(){this.overlays=new xr(Xe.comparator),this.Hs=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Hs.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,u=t.length+1,d=new Xe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const _=p.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new xr((I,A)=>I-A);const d=this.overlays.getIterator();for(;d.hasNext();){const I=d.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let A=u.get(I.largestBatchId);null===A&&(A=new Map,u=u.insert(I.largestBatchId,A)),A.set(I.getKey(),I)}}const p=new Map,_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,A)=>p.set(A,I)),!(p.size>=i)););return ge.resolve(p)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new px(t,r));let u=this.Hs.get(t);void 0===u&&(u=new Set,this.Hs.set(t,u)),u.add(r.key)}}class Ox{constructor(){this.Js=new tr(vi.Ys),this.Xs=new tr(vi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new vi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new vi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Xe(new pn([])),r=new vi(t,e),i=new vi(t,e+1),u=[];return this.Xs.forEachInRange([r,i],d=>{this.ei(d),u.push(d.key)}),u}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Xe(new pn([])),r=new vi(t,e),i=new vi(t,e+1);let u=yn();return this.Xs.forEachInRange([r,i],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new vi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Xe.comparator(e.key,t.key)||Wt(e.oi,t.oi)}static Zs(e,t){return Wt(e.oi,t.oi)||Xe.comparator(e.key,t.key)}}class xL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new tr(vi.Ys)}checkEmpty(e){return ge.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const u=this.ci;this.ci++;const d=new hx(u,t,r,i);this.gs.push(d);for(const p of i)this.ui=this.ui.add(new vi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,t){return ge.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),u=i<0?0:i;return ge.resolve(this.gs.length>u?this.gs[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ge.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.ui.forEachInRange([r,i],d=>{const p=this.ai(d.oi);u.push(p)}),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tr(Wt);return t.forEach(i=>{const u=new vi(i,0),d=new vi(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([u,d],p=>{r=r.add(p.oi)})}),ge.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Xe.isDocumentKey(u)||(u=u.child(""));const d=new vi(new Xe(u),0);let p=new tr(Wt);return this.ui.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(p=p.add(_.oi)),!0)},d),ge.resolve(this.li(p))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return ge.forEach(t.mutations,i=>{const u=new vi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new vi(t,0),i=this.ui.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ge.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class RL{constructor(e){this.di=e,this.docs=new xr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,d=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Da();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():fr.newInvalidDocument(i))}),ge.resolve(r)}getAll(e,t,r){let i=Da();const u=new Xe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||_.readTime.compareTo(r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ge.resolve(i)}_i(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ML(this)}getSize(e){return ge.resolve(this.size)}}class ML extends IP{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class NL{constructor(e){this.persistence=e,this.wi=new Ay(t=>aw(t),FC),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.mi=0,this.gi=new Ox,this.targetCount=0,this.yi=eg.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),ge.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new eg(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Ze(t),ge.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.wi.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.wi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ge.waitFor(u).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(d=>{u.push(i.markPotentiallyOrphaned(e,d))}),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.gi.containsKey(t))}}class PL{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Ho(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new NL(this),this.indexManager=new uL,this.qn=new RL(r=>this.referenceDelegate.Ii(r)),this.O=new sP(t),this.Kn=new AL(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new xL(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new OL(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(u=>this.referenceDelegate.Ti(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ai(e,t){return ge.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class OL extends nP{constructor(e){super(),this.currentSequenceNumber=e}}class kx{constructor(e){this.persistence=e,this.Ri=new Ox,this.Pi=null}static bi(e){return new kx(e)}get vi(){if(this.Pi)return this.Pi;throw ct()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.vi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.vi,r=>{const i=Xe.fromPath(r);return this.Vi(e,i).next(u=>{u||t.removeEntry(i,Et.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function NP(n,e){return`firestore_clients_${n}_${e}`}function PP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fx(n,e){return`firestore_targets_${n}_${e}`}class nb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let u,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(u=new Pe(i.error.code,i.error.message))),d?new nb(e,t,i.state,u):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Pe(r.error.code,r.error.message))),u?new Iw(e,r.state,i):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=qC();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=aN(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return i?new rb(e,u):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lx{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lx(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ux{constructor(){this.activeTargetIds=qC()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vx{constructor(e,t,r,i,u){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new xr(Wt),this.started=!1,this.$i=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Fi=NP(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new Ux),this.Li=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const u=e.getItem(NP(e.persistenceKey,i));if(u){const d=rb.Si(i,u);d&&(e.Mi=e.Mi.insert(d.clientId,d))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fx(this.persistenceKey,e));if(r){const i=Iw.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(u){let d=Ho.A;if(null!=u)try{const p=JSON.parse(u);Dt("number"==typeof p),d=p}catch(p){Hr("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==Ho.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new nb(this.currentUser,e,t,r),u=PP(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Di())}Ji(e){const t=PP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=Fx(this.persistenceKey,e),u=new Iw(e,t,r);this.setItem(i,u.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return rb.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return nb.Si(new Gi(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Iw.Si(i,t)}Qi(e){return Lx.Si(e)}rr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),u=this.zi(r),d=[],p=[];return u.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.dr(d,p).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=qC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class OP{constructor(){this._r=new Ux,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Ux,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class kL{mr(e){}shutdown(){}}class kP{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const FL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class LL{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class UL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,u){const d=this.$r(e,t);Ve("RestConnection","Sending: ",d,r);const p={};return this.Fr(p,i,u),this.Br(e,d,p,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw ew("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}Lr(e,t,r,i,u){return this.Mr(e,t,r,i,u)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+uy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}$r(e,t){return`${this.kr}/v1/${t}:${FL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((u,d)=>{const p=new Jk;p.listenOnce(Kk.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case WS.NO_ERROR:const I=p.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(I)),u(I);break;case WS.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Pe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case WS.HTTP_ERROR:const A=p.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const P=function(U){const W=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(W)>=0?W:ce.UNKNOWN}(x.status);d(new Pe(P,x.message))}else d(new Pe(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Pe(ce.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Wk(),d=zk(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new Qk({})),this.Fr(p.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Ve("Connection","Creating WebChannel: "+_,p);const I=u.createWebChannel(_,p);let A=!1,x=!1;const P=new LL({Ar:W=>{x?Ve("Connection","Not sending because WebChannel is closed:",W):(A||(Ve("Connection","Opening WebChannel transport."),I.open(),A=!0),Ve("Connection","WebChannel sending:",W),I.send(W))},Rr:()=>I.close()}),U=(W,Ie,Ue)=>{W.listen(Ie,ot=>{try{Ue(ot)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return U(I,RC.EventType.OPEN,()=>{x||Ve("Connection","WebChannel transport opened.")}),U(I,RC.EventType.CLOSE,()=>{x||(x=!0,Ve("Connection","WebChannel transport closed"),P.Cr())}),U(I,RC.EventType.ERROR,W=>{x||(x=!0,ew("Connection","WebChannel transport errored:",W),P.Cr(new Pe(ce.UNAVAILABLE,"The operation could not be completed")))}),U(I,RC.EventType.MESSAGE,W=>{var Ie;if(!x){const Ue=W.data[0];Dt(!!Ue);const ot=Ue,Mt=ot.error||(null===(Ie=ot[0])||void 0===Ie?void 0:Ie.error);if(Mt){Ve("Connection","WebChannel received error:",Mt);const Jt=Mt.status;let Ot=function(bu){const wb=$r[bu];if(void 0!==wb)return ON(wb)}(Jt),Zn=Mt.message;void 0===Ot&&(Ot=ce.INTERNAL,Zn="Unknown error status: "+Jt+" with message "+Mt.message),x=!0,P.Cr(new Pe(Ot,Zn)),I.close()}else Ve("Connection","WebChannel received:",Ue),P.Nr(Ue)}}),U(d,Yk.STAT_EVENT,W=>{W.stat===JM.PROXY?Ve("Connection","Detected buffering proxy"):W.stat===JM.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.Dr()},0),P}}function FP(){return"undefined"!=typeof window?window:null}function ib(){return"undefined"!=typeof document?document:null}function Tw(n){return new VF(n,!0)}class Bx{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=u,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class LP{constructor(e,t,r,i,u,d,p,_){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Bx(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,ve.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,ve.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Pe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,ve.Z)(function*(){e.state=0,e.start()}))}Io(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VL extends LP{constructor(e,t,r,i,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.O=u}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function ZF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ct(),i=e.targetChange.targetIds||[],u=function(_,I){return _.N?(Dt(void 0===I||"string"==typeof I),ii.fromBase64String(I||"")):(Dt(void 0===I||I instanceof Uint8Array),ii.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(_){const I=void 0===_.code?ce.UNKNOWN:ON(_.code);return new Pe(I,_.message||"")}(d);t=new LN(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Cl(n,r.document.name),u=gi(r.document.updateTime),d=new cs({mapValue:{fields:r.document.fields}}),p=fr.newFoundDocument(i,u,d);t=new $C(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Cl(n,r.document),u=r.readTime?gi(r.readTime):Et.min(),d=fr.newNoDocument(i,u);t=new $C([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=Cl(n,r.document);t=new $C([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,u=new RF(r.count||0);t=new FN(r.targetId,u)}}var _;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return Et.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?gi(u.readTime):Et.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=mw(this.O),t.addTarget=function(i,u){let d;const p=u.target;return d=LC(p)?{documents:WN(i,p)}:{query:zN(i,p)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=jN(i,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=pw(i,u.snapshotVersion.toTimestamp())),d}(this.O,e);const r=function qF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=mw(this.O),t.removeTarget=e,this.fo(t)}}class BL extends LP{constructor(e,t,r,i,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.O=u,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function HF(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let u=gi(r.updateTime?r.updateTime:i);return u.isEqual(Et.min())&&(u=gi(i)),new AF(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.Vo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=mw(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yw(this.O,r))};this.fo(t)}}class jL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Pe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.eo.Mr(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(ce.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.eo.Lr(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(ce.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class ZL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Hr(t),this.Oo=!1):Ve("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class HL{constructor(e,t,r,i,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=u,this.jo.mr(p=>{r.enqueueAndForget((0,ve.Z)(function*(){var _;Zh(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ve.Z)(function*(I){const A=ze(I);A.Ko.add(4),yield Ry(A),A.Qo.set("Unknown"),A.Ko.delete(4),yield Cw(A)}),function(I){return _.apply(this,arguments)})(d))}))}),this.Qo=new ZL(r,i)}}function Cw(n){return jx.apply(this,arguments)}function jx(){return jx=(0,ve.Z)(function*(n){if(Zh(n))for(const e of n.Go)yield e(!0)}),jx.apply(this,arguments)}function Ry(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,ve.Z)(function*(n){for(const e of n.Go)yield e(!1)}),Zx.apply(this,arguments)}function sb(n,e){const t=ze(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),$x(t)?qx(t):Ny(t).co()&&Hx(t,e))}function bw(n,e){const t=ze(n),r=Ny(t);t.qo.delete(e),r.co()&&UP(t,e),0===t.qo.size&&(r.co()?r.ho():Zh(t)&&t.Qo.set("Unknown"))}function Hx(n,e){n.Wo.Z(e.targetId),Ny(n).Ao(e)}function UP(n,e){n.Wo.Z(e),Ny(n).Ro(e)}function qx(n){n.Wo=new FF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Ny(n).start(),n.Qo.Mo()}function $x(n){return Zh(n)&&!Ny(n).oo()&&n.qo.size>0}function Zh(n){return 0===ze(n).Ko.size}function VP(n){n.Wo=void 0}function qL(n){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,ve.Z)(function*(n){n.qo.forEach((e,t)=>{Hx(n,e)})}),Gx.apply(this,arguments)}function $L(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,ve.Z)(function*(n,e){VP(n),$x(n)?(n.Qo.Bo(e),qx(n)):n.Qo.set("Unknown")}),Wx.apply(this,arguments)}function GL(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,ve.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof LN&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const d=u.cause;for(const p of u.targetIds)i.qo.has(p)&&(yield i.remoteSyncer.rejectListen(p,d),i.qo.delete(p),i.Wo.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ob(n,r)}else if(e instanceof $C?n.Wo.ct(e):e instanceof FN?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(Et.min()))try{const r=yield SP(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const d=i.Wo.yt(u);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const I=i.qo.get(_);I&&i.qo.set(_,I.withResumeToken(p.resumeToken,u))}}),d.targetMismatches.forEach(p=>{const _=i.qo.get(p);if(!_)return;i.qo.set(p,_.withResumeToken(ii.EMPTY_BYTE_STRING,_.snapshotVersion)),UP(i,p);const I=new Uh(_.target,p,1,_.sequenceNumber);Hx(i,I)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield ob(n,r)}var r}),zx.apply(this,arguments)}function ob(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,ve.Z)(function*(n,e,t){if(!Yp(e))throw e;n.Ko.add(1),yield Ry(n),n.Qo.set("Offline"),t||(t=()=>SP(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Cw(n)}))}),Kx.apply(this,arguments)}function BP(n,e){return e().catch(t=>ob(n,t,e))}function My(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,ve.Z)(function*(n){const e=ze(n),t=Hh(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;WL(e);)try{const i=yield TL(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,zL(e,i)}catch(i){yield ob(e,i)}jP(e)&&ZP(e)}),Yx.apply(this,arguments)}function WL(n){return Zh(n)&&n.Uo.length<10}function zL(n,e){n.Uo.push(e);const t=Hh(n);t.co()&&t.bo&&t.vo(e.mutations)}function jP(n){return Zh(n)&&!Hh(n).oo()&&n.Uo.length>0}function ZP(n){Hh(n).start()}function KL(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ve.Z)(function*(n){Hh(n).Do()}),Qx.apply(this,arguments)}function YL(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,ve.Z)(function*(n){const e=Hh(n);for(const t of n.Uo)e.vo(t.mutations)}),Jx.apply(this,arguments)}function QL(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ve.Z)(function*(n,e,t){const r=n.Uo.shift(),i=fx.from(r,e,t);yield BP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield My(n)}),Xx.apply(this,arguments)}function JL(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,ve.Z)(function*(n,e){var t;e&&Hh(n).bo&&(yield(t=(0,ve.Z)(function*(r,i){if(PN(u=i.code)&&u!==ce.ABORTED){const d=r.Uo.shift();Hh(r).ao(),yield BP(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield My(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),jP(n)&&ZP(n)}),eR.apply(this,arguments)}function HP(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,ve.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Zh(t);t.Ko.add(3),yield Ry(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Cw(t)}),tR.apply(this,arguments)}function nR(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,ve.Z)(function*(n,e){const t=ze(n);e?(t.Ko.delete(2),yield Cw(t)):e||(t.Ko.add(2),yield Ry(t),t.Qo.set("Unknown"))}),rR.apply(this,arguments)}function Ny(n){return n.zo||(n.zo=function(e,t,r){const i=ze(e);return i.No(),new VL(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:qL.bind(null,n),vr:$L.bind(null,n),To:GL.bind(null,n)}),n.Go.push(function(){var e=(0,ve.Z)(function*(t){t?(n.zo.ao(),$x(n)?qx(n):n.Qo.set("Unknown")):(yield n.zo.stop(),VP(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Hh(n){return n.Ho||(n.Ho=function(e,t,r){const i=ze(e);return i.No(),new BL(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:KL.bind(null,n),vr:JL.bind(null,n),So:YL.bind(null,n),Vo:QL.bind(null,n)}),n.Go.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Ho.ao(),yield My(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class iR{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,u){const d=Date.now()+r,p=new iR(e,t,d,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),Yp(n))return new Pe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Oy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=ax(),this.sortedSet=new xr(this.comparator)}static emptySet(e){return new Oy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Oy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qP{constructor(){this.Jo=new xr(Xe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):ct():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class ky{constructor(e,t,r,i,u,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new ky(e,t,Oy.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class XL{constructor(){this.Xo=void 0,this.listeners=[]}}class e2{constructor(){this.queries=new Ay(e=>_N(e),uw),this.onlineState="Unknown",this.Zo=new Set}}function sR(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new XL),i)try{u.Xo=yield t.onListen(r)}catch(d){const p=Py(d,`Initialization of query '${rx(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.tc(t.onlineState),u.Xo&&e.ec(u.Xo)&&lR(t)}),oR.apply(this,arguments)}function aR(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),uR.apply(this,arguments)}function t2(n,e){const t=ze(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const p of d.listeners)p.ec(i)&&(r=!0);d.Xo=i}}r&&lR(t)}function n2(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function lR(n){n.Zo.forEach(e=>{e.next()})}class cR{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ky(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=ky.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class r2{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class $P{constructor(e){this.O=e}Gs(e){return Cl(this.O,e)}js(e){return e.metadata.exists?GN(this.O,e.document,!1):fr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return gi(e)}}class i2{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=GP(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new $P(this.O);for(const i of e)if(i.metadata.queries){const u=r.Gs(i.metadata.name);for(const d of i.metadata.queries){const p=(t.get(d)||yn()).add(u);t.set(d,p)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function bL(n,e,t,r){return Nx.apply(this,arguments)}(e.localStore,new $P(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield DL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new _L(Object.assign({},e.progress),t)})()}}function GP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WP{constructor(e){this.key=e}}class zP{constructor(e){this.key=e}}class KP{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=yn(),this.mutatedKeys=yn(),this.mc=vN(e),this.gc=new Oy(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new qP,i=t?t.gc:this.gc;let u=t?t.mutatedKeys:this.mutatedKeys,d=i,p=!1;const _=UC(this.query)&&i.size===this.query.limit?i.last():null,I=VC(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const P=i.get(A),U=ix(this.query,x)?x:null,W=!!P&&this.mutatedKeys.has(P.key),Ie=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ue=!1;P&&U?P.data.isEqual(U.data)?W!==Ie&&(r.track({type:3,doc:U}),Ue=!0):this.Tc(P,U)||(r.track({type:2,doc:U}),Ue=!0,(_&&this.mc(U,_)>0||I&&this.mc(U,I)<0)&&(p=!0)):!P&&U?(r.track({type:0,doc:U}),Ue=!0):P&&!U&&(r.track({type:1,doc:P}),Ue=!0,(_||I)&&(p=!0)),Ue&&(U?(d=d.add(U),u=Ie?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),UC(this.query)||VC(this.query))for(;d.size>this.query.limit;){const A=UC(this.query)?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{gc:d,Ec:r,ks:p,mutatedKeys:u}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const u=e.Ec.Yo();u.sort((I,A)=>function(x,P){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return U(x)-U(P)}(I.type,A.type)||this.mc(I.doc,A.doc)),this.Ac(r);const d=t?this.Rc():[],p=0===this.wc.size&&this.current?1:0,_=p!==this._c;return this._c=p,0!==u.length||_?{snapshot:new ky(this.query,e.gc,i,u,e.mutatedKeys,0===p,_,!1),Pc:d}:{Pc:d}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new qP,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=yn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new zP(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new WP(r))}),t}vc(e){this.dc=e.Ks,this.wc=yn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return ky.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class s2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o2{constructor(e){this.key=e,this.Sc=!1}}class a2{constructor(e,t,r,i,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Dc={},this.Cc=new Ay(p=>_N(p),uw),this.Nc=new Map,this.xc=new Set,this.kc=new xr(Xe.comparator),this.Oc=new Map,this.Mc=new Ox,this.$c={},this.Fc=new Map,this.Bc=eg.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function u2(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,ve.Z)(function*(n,e){const t=OR(n);let r,i;const u=t.Cc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Vc();else{const d=yield Sy(t.localStore,ba(e));t.isPrimaryClient&&sb(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield hR(t,e,r,"current"===p)}return i}),dR.apply(this,arguments)}function hR(n,e,t,r){return fR.apply(this,arguments)}function fR(){return fR=(0,ve.Z)(function*(n,e,t,r){n.Uc=(A,x,P)=>{return(U=(0,ve.Z)(function*(W,Ie,Ue,ot){let Mt=Ie.view.Ic(Ue);Mt.ks&&(Mt=yield tb(W.localStore,Ie.query,!1).then(({documents:Zn})=>Ie.view.Ic(Zn,Mt)));const Jt=ot&&ot.targetChanges.get(Ie.targetId),Ot=Ie.view.applyChanges(Mt,W.isPrimaryClient,Jt);return TR(W,Ie.targetId,Ot.Pc),Ot.snapshot}),function(W,Ie,Ue,ot){return U.apply(this,arguments)})(n,A,x,P);var U};const i=yield tb(n.localStore,e,!0),u=new KP(e,i.Ks),d=u.Ic(i.documents),p=fw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(d,n.isPrimaryClient,p);TR(n,t,_.Pc);const I=new s2(e,t,u);return n.Cc.set(e,I),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),_.snapshot}),fR.apply(this,arguments)}function l2(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,ve.Z)(function*(n,e){const t=ze(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(u=>!uw(u,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bw(t.remoteStore,r.targetId),Fy(t,r.targetId)}).catch(tg))):(Fy(t,r.targetId),yield xy(t.localStore,r.targetId,!0))}),pR.apply(this,arguments)}function gR(){return gR=(0,ve.Z)(function*(n,e,t){const r=kR(n);try{const i=yield function(u,d){const p=ze(u),_=fi.now(),I=d.reduce((x,P)=>x.add(P.key),yn());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.Us.Es(x,I).next(P=>{A=P;const U=[];for(const W of d){const Ie=xF(W,A.get(W.key));null!=Ie&&U.push(new zp(W.key,Ie,dN(Ie.value.mapValue),qr.exists(!0)))}return p.gs.addMutationBatch(x,_,U,d)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,p){let _=u.$c[u.currentUser.toKey()];_||(_=new xr(Wt)),_=_.insert(d,p),u.$c[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Fc(r,i.changes),yield My(r.remoteStore)}catch(i){const u=Py(i,"Failed to persist write");t.reject(u)}}),gR.apply(this,arguments)}function YP(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,ve.Z)(function*(n,e){const t=ze(n);try{const r=yield IL(t.localStore,e);e.targetChanges.forEach((i,u)=>{const d=t.Oc.get(u);d&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Sc=!0:i.modifiedDocuments.size>0?Dt(d.Sc):i.removedDocuments.size>0&&(Dt(d.Sc),d.Sc=!1))}),yield Fc(t,r,e)}catch(r){yield tg(r)}}),mR.apply(this,arguments)}function QP(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((u,d)=>{const p=d.view.tc(e);p.snapshot&&i.push(p.snapshot)}),function(u,d){const p=ze(u);p.onlineState=d;let _=!1;p.queries.forEach((I,A)=>{for(const x of A.listeners)x.tc(d)&&(_=!0)}),_&&lR(p)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function d2(n,e,t){return yR.apply(this,arguments)}function yR(){return yR=(0,ve.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),u=i&&i.key;if(u){let d=new xr(Xe.comparator);d=d.insert(u,fr.newNoDocument(u,Et.min()));const p=yn().add(u),_=new hw(Et.min(),new Map,new tr(Wt),d,p);yield YP(r,_),r.kc=r.kc.remove(u),r.Oc.delete(e),CR(r)}else yield xy(r.localStore,e,!1).then(()=>Fy(r,e,t)).catch(tg)}),yR.apply(this,arguments)}function h2(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield EL(t.localStore,e);IR(t,r,null),ER(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fc(t,i)}catch(i){yield tg(i)}}),_R.apply(this,arguments)}function f2(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,ve.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(u,d){const p=ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return p.gs.lookupMutationBatch(_,d).next(A=>(Dt(null!==A),I=A.keys(),p.gs.removeMutationBatch(_,A))).next(()=>p.gs.performConsistencyCheck(_)).next(()=>p.Us.Es(_,I))})}(r.localStore,e);IR(r,e,t),ER(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(r,i)}catch(i){yield tg(i)}}),vR.apply(this,arguments)}function wR(){return wR=(0,ve.Z)(function*(n,e){const t=ze(n);Zh(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.gs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=Py(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wR.apply(this,arguments)}function ER(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function IR(n,e,t){const r=ze(n);let i=r.$c[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||JP(n,r)})}function JP(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(bw(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),CR(n))}function TR(n,e,t){for(const r of t)r instanceof WP?(n.Mc.addReference(r.key,e),g2(n,r)):r instanceof zP?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||JP(n,r.key)):ct()}function g2(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.xc.add(r),CR(n))}function CR(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Xe(pn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new o2(t)),n.kc=n.kc.insert(t,r),sb(n.remoteStore,new Uh(ba(gy(t.path)),r,2,Ho.A))}}function Fc(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=[],u=[],d=[];var p;r.Cc.isEmpty()||(r.Cc.forEach((p,_)=>{d.push(r.Uc(_,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I.fromCache?"not-current":"current"),i.push(I);const A=Sx.Ss(_.targetId,I);u.push(A)}}))}),yield Promise.all(d),r.Dc.To(i),yield(p=(0,ve.Z)(function*(_,I){const A=ze(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ge.forEach(I,P=>ge.forEach(P.vs,U=>A.persistence.referenceDelegate.addReference(x,P.targetId,U)).next(()=>ge.forEach(P.Vs,U=>A.persistence.referenceDelegate.removeReference(x,P.targetId,U)))))}catch(x){if(!Yp(x))throw x;Ve("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const P=x.targetId;if(!x.fromCache){const U=A.Ms.get(P),Ie=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);A.Ms=A.Ms.insert(P,Ie)}}}),function(_,I){return p.apply(this,arguments)})(r.localStore,u))}),bR.apply(this,arguments)}function m2(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,ve.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield AP(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(d=>{d.forEach(p=>{p.reject(new Pe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fc(t,r.qs)}var i}),DR.apply(this,arguments)}function y2(n,e){const t=ze(n),r=t.Oc.get(e);if(r&&r.Sc)return yn().add(r.key);{let i=yn();const u=t.Nc.get(e);if(!u)return i;for(const d of u){const p=t.Cc.get(d);i=i.unionWith(p.view.yc)}return i}}function _2(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ve.Z)(function*(n,e){const t=ze(n),r=yield tb(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&TR(t,e.targetId,i.Pc),i}),AR.apply(this,arguments)}function v2(n){return SR.apply(this,arguments)}function SR(){return SR=(0,ve.Z)(function*(n){const e=ze(n);return MP(e.localStore).then(t=>Fc(e,t))}),SR.apply(this,arguments)}function w2(n,e,t,r){return xR.apply(this,arguments)}function xR(){return xR=(0,ve.Z)(function*(n,e,t,r){const i=ze(n),u=yield function(d,p){const _=ze(d),I=ze(_.gs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Ge(A,p).next(x=>x?_.Us.Es(A,x):ge.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield My(i.remoteStore):"acknowledged"===t||"rejected"===t?(IR(i,e,r||null),ER(i,e),p=e,ze(ze(i.localStore).gs).Qe(p)):ct(),yield Fc(i,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),xR.apply(this,arguments)}function RR(){return RR=(0,ve.Z)(function*(n,e){const t=ze(n);if(OR(t),kR(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XP(t,r.toArray());t.Lc=!0,yield nR(t.remoteStore,!0);for(const u of i)sb(t.remoteStore,u)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Fy(t,d),xy(t.localStore,d,!0))),bw(t.remoteStore,d)}),yield i,yield XP(t,r),function(u){const d=ze(u);d.Oc.forEach((p,_)=>{bw(d.remoteStore,_)}),d.Mc.ii(),d.Oc=new Map,d.kc=new xr(Xe.comparator)}(t),t.Lc=!1,yield nR(t.remoteStore,!1)}}),RR.apply(this,arguments)}function XP(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=[],u=[];for(const d of e){let p;const _=r.Nc.get(d);if(_&&0!==_.length){p=yield Sy(r.localStore,ba(_[0]));for(const I of _){const A=r.Cc.get(I),x=yield _2(r,A);x.snapshot&&u.push(x.snapshot)}}else{const I=yield RP(r.localStore,d);p=yield Sy(r.localStore,I),yield hR(r,eO(I),d,!1)}i.push(p)}return r.Dc.To(u),i}),MR.apply(this,arguments)}function eO(n){return mN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function I2(n){const e=ze(n);return ze(ze(e.localStore).persistence).ds()}function T2(n,e,t,r){return NR.apply(this,arguments)}function NR(){return NR=(0,ve.Z)(function*(n,e,t,r){const i=ze(n);if(i.Lc)Ve("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const u=yield MP(i.localStore),d=hw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fc(i,u,d);break}case"rejected":yield xy(i.localStore,e,!0),Fy(i,e,r);break;default:ct()}}),NR.apply(this,arguments)}function C2(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,ve.Z)(function*(n,e,t){const r=OR(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const u=yield RP(r.localStore,i),d=yield Sy(r.localStore,u);yield hR(r,eO(u),d.targetId,!1),sb(r.remoteStore,d)}for(const i of t)r.Nc.has(i)&&(yield xy(r.localStore,i,!1).then(()=>{bw(r.remoteStore,i),Fy(r,i)}).catch(tg))}}),PR.apply(this,arguments)}function OR(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d2.bind(null,e),e.Dc.To=t2.bind(null,e.eventManager),e.Dc.qc=n2.bind(null,e.eventManager),e}function kR(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f2.bind(null,e),e}class tO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.O=Tw(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return DP(this.persistence,new bP,e.initialUser,this.O)}jc(e){return new PL(kx.bi,this.O)}Gc(e){return new OP}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nO extends tO{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield function CL(n){return Mx.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield kR(r.zc.syncEngine),yield My(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return DP(this.persistence,new bP,e.initialUser,this.O)}Qc(e){return new hL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new Dx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FP(),ib(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new OP}}class D2 extends nO{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof Vx&&(r.sharedClientState.syncEngine={hr:w2.bind(null,i),lr:T2.bind(null,i),dr:C2.bind(null,i),ds:I2.bind(null,i),ar:v2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var u=(0,ve.Z)(function*(d){yield function E2(n,e){return RR.apply(this,arguments)}(r.zc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Gc(e){const t=FP();if(!Vx.Vt(t))throw new Pe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class FR{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>QP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=m2.bind(null,r.syncEngine),yield nR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e2}createDatastore(e){const t=Tw(e.databaseInfo.databaseId),r=new UL(e.databaseInfo);return new jL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>QP(this.syncEngine,p,0),d=kP.Vt()?new kP:new kL,new HL(t,r,i,u,d);var t,r,i,u,d}createSyncEngine(e,t){return function(r,i,u,d,p,_,I){const A=new a2(r,i,u,d,p,_);return I&&(A.Lc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=ze(t);Ve("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Ry(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rO(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class A2{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new hi,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const u=yield e.nu(i);return new r2(JSON.parse(u),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,ve.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class S2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,d){const p=ze(u),_=mw(p.O)+"/documents",I={documents:d.map(U=>gw(p.O,U))},A=yield p.Lr("BatchGetDocuments",_,I),x=new Map;A.forEach(U=>{const W=function jF(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Cl(t,r.found.name),u=gi(r.found.updateTime),d=new cs({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(i,u,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Cl(t,r.missing),u=gi(r.readTime);return fr.newNoDocument(i,u)}(n,e):ct()}(p.O,U);x.set(W.key.toString(),W)});const P=[];return d.forEach(U=>{const W=x.get(U.toString());Dt(!!W),P.push(W)}),P}),function(u,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Xe.fromPath(i);e.mutations.push(new ox(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const d=ze(i),p=mw(d.O)+"/documents",_={writes:u.map(I=>yw(d.O,I))};yield d.Mr("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?qr.updateTime(t):qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Pe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qr.updateTime(t)}return qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x2{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new Bx(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,ve.Z)(function*(){const t=new S2(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.uu(u)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!qp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!PN(t)}return!1}}class R2{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gi.UNAUTHENTICATED,this.clientId=nN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(p){Ve("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Py(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function iO(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield AP(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),LR.apply(this,arguments)}function sO(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VR(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>HP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>HP(e.remoteStore,u)),n.onlineComponents=e}),UR.apply(this,arguments)}function VR(n){return BR.apply(this,arguments)}function BR(){return BR=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield iO(n,new tO)),n.offlineComponents}),BR.apply(this,arguments)}function ub(n){return jR.apply(this,arguments)}function jR(){return jR=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield sO(n,new FR)),n.onlineComponents}),jR.apply(this,arguments)}function oO(n){return VR(n).then(e=>e.persistence)}function ZR(n){return VR(n).then(e=>e.localStore)}function aO(n){return ub(n).then(e=>e.remoteStore)}function HR(n){return ub(n).then(e=>e.syncEngine)}function Ly(n){return qR.apply(this,arguments)}function qR(){return qR=(0,ve.Z)(function*(n){const e=yield ub(n),t=e.eventManager;return t.onListen=u2.bind(null,e.syncEngine),t.onUnlisten=l2.bind(null,e.syncEngine),t}),qR.apply(this,arguments)}function uO(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,d,p,_){const I=new ab({next:x=>{u.enqueueAndForget(()=>aR(i,A));const P=x.docs.has(d);!P&&x.fromCache?_.reject(new Pe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&p&&"server"===p.source?_.reject(new Pe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new cR(gy(d.path),I,{includeMetadataChanges:!0,uc:!0});return sR(i,A)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}function lO(n,e,t={}){const r=new hi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,d,p,_){const I=new ab({next:x=>{u.enqueueAndForget(()=>aR(i,A)),x.fromCache&&"server"===p.source?_.reject(new Pe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new cR(d,I,{includeMetadataChanges:!0,uc:!0});return sR(i,A)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}const cO=new Map;function $R(n,e,t){if(!t)throw new Pe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dO(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hO(n){if(!Xe.isDocumentKey(n))throw new Pe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fO(n){if(Xe.isDocumentKey(n))throw new Pe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lb(n);throw new Pe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pO(n,e){if(e<=0)throw new Pe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gO({}),this._settingsFrozen=!1,e instanceof Hp?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tF;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new sF(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cO.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),cO.delete(e),t.terminate())}(this),Promise.resolve()}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Al extends hs{constructor(e,t,r){super(e,t,gy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Xe(e))}withConverter(e){return new Al(this.firestore,e,this._path)}}function mO(n,e,...t){if(n=(0,O.m9)(n),$R("collection","path",e),n instanceof Dw){const r=pn.fromString(e,...t);return fO(r),new Al(n,null,r)}{if(!(n instanceof jn||n instanceof Al))throw new Pe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return fO(r),new Al(n.firestore,null,r)}}function cb(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=nN.R()),$R("doc","path",e),n instanceof Dw){const r=pn.fromString(e,...t);return hO(r),new jn(n,null,new Xe(r))}{if(!(n instanceof jn||n instanceof Al))throw new Pe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return hO(r),new jn(n.firestore,n instanceof Al?n.converter:null,new Xe(r))}}function yO(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof jn||n instanceof Al)&&(e instanceof jn||e instanceof Al)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _O(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof hs&&e instanceof hs&&n.firestore===e.firestore&&uw(n._query,e._query)&&n.converter===e.converter}class j2{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Bx(this,"async_queue_retry"),this.yu=()=>{const t=ib();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=ib();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=ib();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new hi;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,ve.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!Yp(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=iR.createAndSchedule(this,e,t,r,u=>this.Tu(u));return this.du.push(i),i}pu(){this._u&&ct()}verifyOperationInProgress(){}Au(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function GR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Z2{constructor(){this._progressObserver={},this._taskCompletionResolver=new hi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends Dw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new j2,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vO(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||vO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dF(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new R2(n._authCredentials,n._appCheckCredentials,n._queue,r)}function wO(n,e,t){const r=new hi;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield iO(n,t),yield sO(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function EO(n){if(n._initialized||n._terminated)throw new Pe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(ii.fromBase64String(e))}catch(t){throw new Pe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sl(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ng{constructor(e){this._methodName=e}}class db{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const J2=/^__.*__$/;class X2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zp(e,this.data,this.fieldMask,t,this.fieldTransforms):new cw(e,this.data,t,this.fieldTransforms)}}class IO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class hb{constructor(e,t,r,i,u,d){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===u&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new hb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return gb(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(TO(this.Vu)&&J2.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class eU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Tw(e)}Fu(e,t,r,i=!1){return new hb({Vu:e,methodName:t,$u:r,path:pi.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function rg(n){const e=n._freezeSettings(),t=Tw(n._databaseId);return new eU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fb(n,e,t,r,i,u={}){const d=n.Fu(u.merge||u.mergeFields?2:0,e,t,i);YR("Data must be an object, but it was:",d,r);const p=DO(r,d);let _,I;if(u.merge)_=new cy(d.fieldMask),I=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const x of u.mergeFields){const P=QR(e,x,t);if(!d.contains(P))throw new Pe(ce.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);SO(A,P)||A.push(P)}_=new cy(A),I=d.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,I=d.fieldTransforms;return new X2(new cs(p),_,I)}class Aw extends ng{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Aw}}function CO(n,e,t){return new hb({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class WR extends ng{_toFieldTransform(e){return new lw(e.path,new yy)}isEqual(e){return e instanceof WR}}class tU extends ng{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=CO(this,e,!0),r=this.Bu.map(u=>ig(u,t)),i=new Gp(r);return new lw(e.path,i)}isEqual(e){return this===e}}class nU extends ng{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=CO(this,e,!0),r=this.Bu.map(u=>ig(u,t)),i=new Wp(r);return new lw(e.path,i)}isEqual(e){return this===e}}class rU extends ng{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new _y(e.O,IN(e.O,this.Lu));return new lw(e.path,t)}isEqual(e){return this===e}}function zR(n,e,t,r){const i=n.Fu(1,e,t);YR("Data must be an object, but it was:",i,r);const u=[],d=cs.empty();jp(r,(_,I)=>{const A=pb(e,_,t);I=(0,O.m9)(I);const x=i.xu(A);if(I instanceof Aw)u.push(A);else{const P=ig(I,x);null!=P&&(u.push(A),d.set(A,P))}});const p=new cy(u);return new IO(d,p,i.fieldTransforms)}function KR(n,e,t,r,i,u){const d=n.Fu(1,e,t),p=[QR(e,r,t)],_=[i];if(u.length%2!=0)throw new Pe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)p.push(QR(e,u[P])),_.push(u[P+1]);const I=[],A=cs.empty();for(let P=p.length-1;P>=0;--P)if(!SO(I,p[P])){const U=p[P];let W=_[P];W=(0,O.m9)(W);const Ie=d.xu(U);if(W instanceof Aw)I.push(U);else{const Ue=ig(W,Ie);null!=Ue&&(I.push(U),A.set(U,Ue))}}const x=new cy(I);return new IO(A,x,d.fieldTransforms)}function bO(n,e,t,r=!1){return ig(t,n.Fu(r?4:3,e))}function ig(n,e){if(AO(n=(0,O.m9)(n)))return YR("Unsupported field value:",e,n),DO(n,e);if(n instanceof ng)return function(t,r){if(!TO(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const d of t){let p=ig(d,r.ku(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return IN(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=fi.fromDate(t);return{timestampValue:pw(r.O,i)}}if(t instanceof fi){const i=new fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pw(r.O,i)}}if(t instanceof db)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sl)return{bytesValue:jN(r.O,t._byteString)};if(t instanceof jn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.Ou(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ux(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${lb(t)}`)}(n,e)}function DO(n,e){const t={};return sN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jp(n,(r,i)=>{const u=ig(i,e.Du(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function AO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof db||n instanceof Sl||n instanceof jn||n instanceof ng)}function YR(n,e,t){if(!AO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lb(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function QR(n,e,t){if((e=(0,O.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return pb(n,e);throw gb("Field path arguments must be of type string or ",n,!1,void 0,t)}const iU=new RegExp("[~\\*/\\[\\]]");function pb(n,e,t){if(e.search(iU)>=0)throw gb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch(r){throw gb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gb(n,e,t,r,i){const u=r&&!r.isEmpty(),d=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Pe(ce.INVALID_ARGUMENT,p+n+_)}function SO(n,e){return n.some(t=>t.isEqual(e))}class Sw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sU extends Sw{data(){return super.data()}}function mb(n,e){return"string"==typeof e?pb(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}class sg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uc extends Sw{constructor(e,t,r,i,u,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xw extends Uc{data(e={}){return super.data(e)}}class qh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xw(this._firestore,this._userDataWriter,r.key,r,new sg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new xw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new sg(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const p=new xw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new sg(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:oU(d.type),doc:p,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function xO(n,e){return n instanceof Uc&&e instanceof Uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qh&&e instanceof qh&&n._firestore===e._firestore&&_O(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function RO(n){if(VC(n)&&0===n.explicitOrderBy.length)throw new Pe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rw{}function $h(n,...e){for(const t of e)n=t._apply(n);return n}class aU extends Rw{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=rg(e.firestore),r=function(i,u,d,p,_,I,A){let x;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Pe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){FO(A,I);const U=[];for(const W of A)U.push(kO(p,i,W));x={arrayValue:{values:U}}}else x=kO(p,i,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||FO(A,I),x=bO(d,"where",A,"in"===I||"not-in"===I);const P=ks.create(_,I,x);return function(U,W){if(W.S()){const Ue=tx(U);if(null!==Ue&&!Ue.isEqual(W.field))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${W.field.toString()}'`);const ot=ex(U);null!==ot&&LO(0,W.field,ot)}const Ie=function(Ue,ot){for(const Mt of Ue.filters)if(ot.indexOf(Mt.op)>=0)return Mt.op;return null}(U,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==Ie)throw new Pe(ce.INVALID_ARGUMENT,Ie===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${Ie.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new hs(e.firestore,e.converter,function(i,u){const d=i.filters.concat([u]);return new Oc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class lU extends Rw{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Pe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new py(i,u);return function(p,_){if(null===ex(p)){const I=tx(p);null!==I&&LO(0,I,_.field)}}(r,d),d}(e._query,this.Uu,this.Gu);return new hs(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Oc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MO extends Rw{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new hs(e.firestore,e.converter,yN(e._query,this.ju,this.Qu))}}class NO extends Rw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=OO(e,this.type,this.Wu,this.zu);return new hs(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PO extends Rw{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=OO(e,this.type,this.Wu,this.zu);return new hs(e.firestore,e.converter,(i=t,new Oc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function OO(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof Sw)return function(i,u,d,p,_){if(!p)throw new Pe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const I=[];for(const A of my(i))if(A.field.isKeyField())I.push(MC(u,p.key));else{const x=p.data.field(A.field);if(YS(x))throw new Pe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=A.field.canonicalString();throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}I.push(x)}return new fy(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rg(n.firestore);return function(u,d,p,_,I,A){const x=u.explicitOrderBy;if(I.length>x.length)throw new Pe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<I.length;U++){const W=I[U];if(x[U].field.isKeyField()){if("string"!=typeof W)throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof W}`);if(!nx(u)&&-1!==W.indexOf("/"))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${W}' contains a slash.`);const Ie=u.path.child(pn.fromString(W));if(!Xe.isDocumentKey(Ie))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const Ue=new Xe(Ie);P.push(MC(d,Ue))}else{const Ie=bO(p,_,W);P.push(Ie)}}return new fy(P,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kO(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Pe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(e)&&-1!==t.indexOf("/"))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Xe.isDocumentKey(r))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return MC(n,new Xe(r))}if(t instanceof jn)return MC(n,t._key);throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lb(t)}.`)}function FO(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LO(n,e,t){if(!t.isEqual(e))throw new Pe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class JR{convertValue(e,t="none"){switch($p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return jp(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new db(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nw(e));default:return null}}convertTimestamp(e){const t=Fh(e);return new fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Dt(QN(r));const i=new Hp(r.get(1),r.get(3)),u=new Xe(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function yb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yU extends JR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class UO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rg(e)}set(e,t,r){this._verifyNotCommitted();const i=Gh(e,this._firestore),u=yb(i.converter,t,r),d=fb(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,qr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Gh(e,this._firestore);let d;return d="string"==typeof(t=(0,O.m9)(t))||t instanceof Lc?KR(this._dataReader,"WriteBatch.update",u._key,t,r,i):zR(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gh(e,this._firestore);return this._mutations=this._mutations.concat(new dw(t._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gh(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Pe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class og extends JR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function VO(n,e,t){n=Qt(n,jn);const r=Qt(n.firestore,nr),i=yb(n.converter,e,t);return Uy(r,[fb(rg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qr.none())])}function BO(n,e,t,...r){n=Qt(n,jn);const i=Qt(n.firestore,nr),u=rg(i);let d;return d="string"==typeof(e=(0,O.m9)(e))||e instanceof Lc?KR(u,"updateDoc",n._key,e,t,r):zR(u,"updateDoc",n._key,e),Uy(i,[d.toMutation(n._key,qr.exists(!0))])}function jO(n,...e){var t,r,i;n=(0,O.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||GR(e[d])||(u=e[d],d++);const p={includeMetadataChanges:u.includeMetadataChanges};if(GR(e[d])){const x=e[d];e[d]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[d+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,I,A;if(n instanceof jn)I=Qt(n.firestore,nr),A=gy(n._key.path),_={next:x=>{e[d]&&e[d](XR(I,n,x))},error:e[d+1],complete:e[d+2]};else{const x=Qt(n,hs);I=Qt(x.firestore,nr),A=x._query;const P=new og(I);_={next:U=>{e[d]&&e[d](new qh(I,P,x,U))},error:e[d+1],complete:e[d+2]},RO(n._query)}return function(x,P,U,W){const Ie=new ab(W),Ue=new cR(P,Ie,U);return x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return sR(yield Ly(x),Ue)})),()=>{Ie.Jc(),x.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return aR(yield Ly(x),Ue)}))}}(Gr(I),A,p,_)}function Uy(n,e){return function(t,r){const i=new hi;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function c2(n,e,t){return gR.apply(this,arguments)}(yield HR(t),r,i)})),i.promise}(Gr(n),e)}function XR(n,e,t){const r=t.docs.get(e._key),i=new og(n);return new Uc(n,i,e._key,r,new sg(t.hasPendingWrites,t.fromCache),e.converter)}class AU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rg(e)}get(e){const t=Gh(e,this._firestore),r=new yU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const u=i[0];if(u.isFoundDocument())return new Sw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Sw(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Gh(e,this._firestore),u=yb(i.converter,t,r),d=fb(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const u=Gh(e,this._firestore);let d;return d="string"==typeof(t=(0,O.m9)(t))||t instanceof Lc?KR(this._dataReader,"Transaction.update",u._key,t,r,i):zR(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gh(e,this._firestore),r=new og(this._firestore);return super.get(e).then(i=>new Uc(this._firestore,r,t._key,i._document,new sg(!1,!1),t.converter))}}function e1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HO(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function qO(){if(!function lF(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){uy=So.SDK_VERSION,(0,So._registerComponent)(new _a.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new nr(i,new rF(t.getProvider("auth-internal")),new oF(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,So.registerVersion)(XM,"3.4.5",n),(0,So.registerVersion)(XM,"3.4.5","esm2017")}();class Mw{constructor(e){this._delegate=e}static fromBase64String(e){return qO(),new Mw(Sl.fromBase64String(e))}static fromUint8Array(e){return HO(),new Mw(Sl.fromUint8Array(e))}toBase64(){return qO(),this._delegate.toBase64()}toUint8Array(){return HO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function t1(n){return function FU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LU{enableIndexedDbPersistence(e,t){return function q2(n,e){EO(n=Qt(n,nr));const t=Gr(n),r=n._freezeSettings(),i=new FR;return wO(t,i,new nO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $2(n){EO(n=Qt(n,nr));const e=Gr(n),t=n._freezeSettings(),r=new FR;return wO(e,r,new D2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function G2(n){if(n._initialized&&!n._terminated)throw new Pe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Cu.Vt())return Promise.resolve();const i=r+"main";yield Cu.delete(i)}),function(r){return t.apply(this,arguments)})(Ax(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $O{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ew("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function V2(n,e,t,r={}){var i;const u=(n=Qt(n,Dw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ew("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Gi.MOCK_USER;else{d=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Gi(_)}n._authCredentials=new nF(new eN(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function z2(n){return function M2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield oO(n),t=yield aO(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.Ko.delete(0),Cw(i)}(t)}))}(Gr(n=Qt(n,nr)))}(this._delegate)}disableNetwork(){return function K2(n){return function N2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield oO(n),t=yield aO(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=ze(i);u.Ko.add(0),yield Ry(u),u.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=Qt(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function W2(n){return function(e){const t=new hi;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function p2(n,e){return wR.apply(this,arguments)}(yield HR(e),t)})),t.promise}(Gr(n=Qt(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function DU(n,e){return function k2(n,e){const t=new ab(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Ly(n),i=t,ze(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Ly(n),i=t,void ze(r).Zo.delete(i);var r,i}))}}(Gr(n=Qt(n,nr)),GR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vy(this,mO(this._delegate,e))}catch(t){throw Fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new xa(this,cb(this._delegate,e))}catch(t){throw Fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function B2(n,e){if(n=Qt(n,Dw),$R("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(t=e,new Oc(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SU(n,e){return function F2(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,ub(i).then(u=>u.datastore));var i;new x2(n.asyncQueue,r,e,t).run()})),t.promise}(Gr(n=Qt(n,nr)),t=>e(new AU(n,t)))}(this._delegate,t=>e(new GO(this,t)))}batch(){return Gr(this._delegate),new WO(new UO(this._delegate,e=>Uy(this._delegate,e)))}loadBundle(e){return function Y2(n,e){const t=Gr(n=Qt(n,nr)),r=new Z2;return function L2(n,e,t,r){const i=function(u,d){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return rO(_,I);if(_ instanceof ArrayBuffer)return rO(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new A2(_,d);var _}(t,Tw(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function b2(n,e,t){const r=ze(n);var i;(i=(0,ve.Z)(function*(u,d,p){try{const _=yield d.getMetadata();if(yield function(P,U){const W=ze(P),Ie=gi(U.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",Ue=>W.Kn.getBundleMetadata(Ue,U.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Ie)>=0)}(u.localStore,_))return yield d.close(),void p._completeWith((P=_,{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}));p._updateProgress(GP(_));const I=new i2(_,u.localStore,d.O);let A=yield d.Kc();for(;A;){const P=yield I.lc(A);P&&p._updateProgress(P),A=yield d.Kc()}const x=yield I.complete();yield Fc(u,x.ws,void 0),yield function(P,U){const W=ze(P);return W.persistence.runTransaction("Save bundle","readwrite",Ie=>W.Kn.saveBundleMetadata(Ie,U))}(u.localStore,_),p._completeWith(x.progress)}catch(_){ew("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_)}var P}),function(u,d,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield HR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Q2(n,e){return function U2(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Kn.getNamedQuery(u,r))}(yield ZR(n),e)}))}(Gr(n=Qt(n,nr)),e).then(t=>t?new hs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class _b extends JR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mw(new Sl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xa.forKey(t,this.firestore,null)}}class GO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _b(e)}get(e){const t=ug(e);return this._delegate.get(t).then(r=>new Nw(this._firestore,new Uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ug(e);return r?(e1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=ug(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}}class WO{constructor(e){this._delegate=e}set(e,t,r){const i=ug(e);return r?(e1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=ug(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ag{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ag.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new ag(e,new _b(e),t),i.set(t,u)),u}}ag.INSTANCES=new WeakMap;class xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _b(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xa(t,new jn(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new xa(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vy(this.firestore,mO(this._delegate,e))}catch(t){throw Fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof jn&&yO(this._delegate,e)}set(e,t){t=e1("DocumentReference.set",t);try{return t?VO(this._delegate,e,t):VO(this._delegate,e)}catch(r){throw Fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?BO(this._delegate,e):BO(this._delegate,e,t,...r)}catch(i){throw Fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CU(n){return Uy(Qt(n.firestore,nr),[new dw(n._key,qr.none())])}(this._delegate)}onSnapshot(...e){const t=zO(e),r=KO(e,i=>new Nw(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vU(n){n=Qt(n,jn);const e=Qt(n.firestore,nr),t=Gr(e),r=new og(e);return function P2(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,d){try{const p=yield function(_,I){const A=ze(_);return A.persistence.runTransaction("read document","readonly",x=>A.Us.ys(x,I))}(i,u);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Pe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Py(p,`Failed to get document '${u} from cache`);d.reject(_)}}),function(i,u,d){return r.apply(this,arguments)})(yield ZR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Uc(e,r,n._key,i,new sg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function wU(n){n=Qt(n,jn);const e=Qt(n.firestore,nr);return uO(Gr(e),n._key,{source:"server"}).then(t=>XR(e,n,t))}(this._delegate):function _U(n){n=Qt(n,jn);const e=Qt(n.firestore,nr);return uO(Gr(e),n._key).then(t=>XR(e,n,t))}(this._delegate),t.then(r=>new Nw(this.firestore,new Uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xa(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function Fs(n,e,t){return n.message=n.message.replace(e,t),n}function zO(n){for(const e of n)if("object"==typeof e&&!t1(e))return e;return{}}function KO(n,e){var t,r;let i;return i=t1(n[0])?n[0]:t1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Nw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xO(this._delegate,e._delegate)}}class Pw extends Nw{data(e){const t=this._delegate.data(e);return function eF(n,e){n||ct()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _b(e)}where(e,t,r){try{return new Ls(this.firestore,$h(this._delegate,function uU(n,e,t){const r=e,i=mb("where",n);return new aU(i,r,t)}(e,t,r)))}catch(i){throw Fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,$h(this._delegate,function cU(n,e="asc"){const t=e,r=mb("orderBy",n);return new lU(r,t)}(e,t)))}catch(r){throw Fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,$h(this._delegate,function dU(n){return pO("limit",n),new MO("limit",n,"F")}(e)))}catch(t){throw Fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,$h(this._delegate,function hU(n){return pO("limitToLast",n),new MO("limitToLast",n,"L")}(e)))}catch(t){throw Fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,$h(this._delegate,function fU(...n){return new NO("startAt",n,!0)}(...e)))}catch(t){throw Fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,$h(this._delegate,function pU(...n){return new NO("startAfter",n,!1)}(...e)))}catch(t){throw Fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,$h(this._delegate,function gU(...n){return new PO("endBefore",n,!1)}(...e)))}catch(t){throw Fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,$h(this._delegate,function mU(...n){return new PO("endAt",n,!0)}(...e)))}catch(t){throw Fs(t,"endAt()","Query.endAt()")}}isEqual(e){return _O(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function IU(n){n=Qt(n,hs);const e=Qt(n.firestore,nr),t=Gr(e),r=new og(e);return function O2(n,e){const t=new hi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,d){try{const p=yield tb(i,u,!0),_=new KP(u,p.Ks),I=_.Ic(p.documents),A=_.applyChanges(I,!1);d.resolve(A.snapshot)}catch(p){const _=Py(p,`Failed to execute query '${u} against cache`);d.reject(_)}}),function(i,u,d){return r.apply(this,arguments)})(yield ZR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function TU(n){n=Qt(n,hs);const e=Qt(n.firestore,nr),t=Gr(e),r=new og(e);return lO(t,n._query,{source:"server"}).then(i=>new qh(e,r,n,i))}(this._delegate):function EU(n){n=Qt(n,hs);const e=Qt(n.firestore,nr),t=Gr(e),r=new og(e);return RO(n._query),lO(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate),t.then(r=>new n1(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=zO(e),r=KO(e,i=>new n1(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jO(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}class VU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class n1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pw(this._firestore,r))})}isEqual(e){return xO(this._delegate,e._delegate)}}class Vy extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xa(this.firestore,e):null}doc(e){try{return new xa(this.firestore,void 0===e?cb(this._delegate):cb(this._delegate,e))}catch(t){throw Fs(t,"doc()","CollectionReference.doc()")}}add(e){return function bU(n,e){const t=Qt(n.firestore,nr),r=cb(n),i=yb(n.converter,e);return Uy(t,[fb(rg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xa(this.firestore,t))}isEqual(e){return yO(this._delegate,e._delegate)}withConverter(e){return new Vy(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function ug(n){return Qt(n,jn)}class r1{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new r1(pi.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class lg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RU(){return new WR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lg(e)}static delete(){const e=function xU(){return new Aw("deleteField")}();return e._methodName="FieldValue.delete",new lg(e)}static arrayUnion(...e){const t=function MU(...n){return new tU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lg(t)}static arrayRemove(...e){const t=function NU(...n){return new nU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lg(t)}static increment(e){const t=function PU(n){return new rU("increment",n)}(e);return t._methodName="FieldValue.increment",new lg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BU={Firestore:$O,GeoPoint:db,Timestamp:fi,Blob:Mw,Transaction:GO,WriteBatch:WO,DocumentReference:xa,DocumentSnapshot:Nw,Query:Ls,QueryDocumentSnapshot:Pw,QuerySnapshot:n1,CollectionReference:Vy,FieldPath:r1,FieldValue:lg,setLogLevel:function UU(n){!function Xk(n){kh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function YO(n,e){return function HU(n,e=__.z){return new Xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function i1(n,e){return YO(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function vb(n,e){return i1(n,e).pipe(Pi(void 0),XT(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const _=i.find(A=>A.doc.ref.isEqual(d.ref)),I=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),u}))}function QO(n,e,t){return vb(n,t).pipe(oi((r,i)=>function $U(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function GU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return s1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return s1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return s1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),Zw(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function s1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function JO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ZU(n){(function jU(n,e){n.INTERNAL.registerComponent(new _a.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},BU)))})(n,(e,t)=>new $O(e,t,new LU)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(qw.Z);class XO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Pi(void 0),XT(),Ar(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),Mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JO(e);return QO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return i1(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Mn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Mn.iC)}add(e){return this.ref.add(e)}doc(e){return new ek(this.ref.doc(e),this.afs)}}class ek{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=rk(r,t);return new XO(i,u,this.afs)}snapshotChanges(){return function qU(n,e){return YO(n,e).pipe(Pi(void 0),XT(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Mn.iC)}}class WU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vb(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),Mn.iC):vb(this.query,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(oi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JO(e);return QO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return i1(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Mn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Mn.iC)}}const tk=new l.OlP("angularfire2.enableFirestorePersistence"),nk=new l.OlP("angularfire2.firestore.persistenceSettings"),zU=new l.OlP("angularfire2.firestore.settings"),KU=new l.OlP("angularfire2.firestore.use-emulator");function rk(n,e=(t=>t)){return{query:e(n),ref:n}}let YU=(()=>{class n{constructor(t,r,i,u,d,p,_,I,A,x,P,U,W,Ie,Ue,ot,Mt){this.schedulers=_;const Jt=(0,Vi.on)(t,p,r),Ot=A;x&&RT(Jt,p,P,W,Ie,Ue,U,ot),[this.firestore,this.persistenceEnabled$]=(0,Vi.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const Zn=p.runOutsideAngular(()=>Jt.firestore());if(u&&Zn.settings(u),Ot&&Zn.useEmulator(...Ot),i&&!Ua(d)){const bu=()=>{try{return(0,_n.D)(Zn.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(wb){return"undefined"!=typeof console&&console.warn(wb),_t(!1)}};return[Zn,p.runOutsideAngular(bu)]}return[Zn,_t(!1)]},[u,Ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=rk(i,r),p=this.schedulers.ngZone.run(()=>u);return new XO(p,d,this)}collectionGroup(t,r){const i=r||(d=>d),u=this.firestore.collectionGroup(t);return new WU(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ek(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vi.Dh),l.LFG(Vi.xv,8),l.LFG(tk,8),l.LFG(zU,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(nk,8),l.LFG(KU,8),l.LFG(MT,8),l.LFG(y0,8),l.LFG(DT,8),l.LFG($m,8),l.LFG(AT,8),l.LFG(ST,8),l.LFG(xT,8),l.LFG(Rh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QU=(()=>{class n{constructor(){bT.Z.registerVersion("angularfire",Mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tk,useValue:!0},{provide:nk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[YU]}),n})(),JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[ud]}),n.\u0275inj=l.cJS({providers:[],imports:[[Vl,BT,x0,Vi.hO.initializeApp(R0_firebase),QU]]}),n})();(0,l.G48)(),qa().bootstrapModule(JU).catch(n=>console.error(n))},5867:(at,De,k)=>{"use strict";k.d(De,{Mq:()=>l.getApp,C6:()=>l.getApps});var l=k(9681);(0,l.registerVersion)("firebase","9.6.8","app")},127:(at,De,k)=>{"use strict";k.d(De,{Z:()=>l.Z});var l=k(3942);l.Z.registerVersion("firebase","9.6.8","app-compat")},2438:(at,De,k)=>{"use strict";k.r(De);var l=k(5861),Q=k(3942),F=k(2090),se=k(9681);function ae(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(y);D<w.length;D++)f.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(y,w[D])&&(g[w[D]]=y[w[D]])}return g}var Fe=k(1877),de=k(4859);const pr=function rr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rn=function zt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Wr=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sn=new Fe.Yd("@firebase/auth");function Ei(y,...f){Sn.logLevel<=Fe.in.ERROR&&Sn.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Xt(y,...f){throw fs(y,...f)}function qt(y,...f){return fs(y,...f)}function co(y,f,g){const w=Object.assign(Object.assign({},rn()),{[f]:g});return new F.LL("auth","Firebase",w).create(f,{appName:y.name})}function zr(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Xt(y,"argument-error"),co(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fs(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return Wr.create(y,...f)}function Me(y,f,...g){if(!y)throw fs(f,...g)}function gr(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ei(f),new Error(f)}function st(y,f){y||gr(f)}const Ii=new Map;function Bt(y){st(y instanceof Function,"Expected a class definition");let f=Ii.get(y);return f?(st(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ii.set(y,f),f)}function Ir(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Tr(){return"http:"===gn()||"https:"===gn()}function gn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ft{constructor(f,g){this.shortDelay=f,this.longDelay=g,st(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function si(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tr()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ut(y,f){st(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class mt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ho={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ps=new Ft(3e4,6e4);function lt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function ln(y,f,g,w){return mr.apply(this,arguments)}function mr(){return(mr=(0,l.Z)(function*(y,f,g,w,D={}){return Ti(y,D,(0,l.Z)(function*(){let R={},j={};w&&("GET"===f?j=w:R={body:JSON.stringify(w)});const te=(0,F.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),mt.fetch()(Ee(y,y.config.apiHost,g,te),Object.assign({method:f,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ti(y,f,g){return B.apply(this,arguments)}function B(){return(B=(0,l.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},ho),f);try{const D=new ee(y),R=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const j=yield R.json();if("needConfirmation"in j)throw $e(y,"account-exists-with-different-credential",j);if(R.ok&&!("errorMessage"in j))return j;{const te=R.ok?j.errorMessage:j.error.message,[ke,Ne]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw $e(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===ke)throw $e(y,"email-already-in-use",j);const Qe=w[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ne)throw co(y,Qe,Ne);Xt(y,Qe)}}catch(D){if(D instanceof F.ZR)throw D;Xt(y,"network-request-failed")}})).apply(this,arguments)}function q(y,f,g,w){return G.apply(this,arguments)}function G(){return(G=(0,l.Z)(function*(y,f,g,w,D={}){const R=yield ln(y,f,g,w,D);return"mfaPendingCredential"in R&&Xt(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ee(y,f,g,w){const D=`${f}${g}?${w}`;return y.config.emulator?ut(y.config,D):`${y.config.apiScheme}://${D}`}class ee{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(qt(this.auth,"network-request-failed")),ps.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $e(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=qt(y,f,w);return D.customData._tokenResponse=g,D}function _e(){return(_e=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function qe(y,f){return rt.apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Tt(y,f){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function sn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function zo(){return(zo=(0,l.Z)(function*(y,f=!1){const g=(0,F.m9)(y),w=yield g.getIdToken(f),D=fo(w);Me(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const R="object"==typeof D.firebase?D.firebase:void 0,j=null==R?void 0:R.sign_in_provider;return{claims:D,token:w,authTime:sn(Du(D.auth_time)),issuedAtTime:sn(Du(D.iat)),expirationTime:sn(Du(D.exp)),signInProvider:j||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Du(y){return 1e3*Number(y)}function fo(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return Ei("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,F.tV)(g);return D?JSON.parse(D):(Ei("Failed to decode base64 JWT payload"),null)}catch(D){return Ei("Caught error parsing JWT payload as JSON",D),null}}function qn(y,f){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof F.ZR&&or(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function or({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Vs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,l.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,l.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Rl{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ci(y){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),D=yield qn(y,Tt(g,{idToken:w}));Me(null==D?void 0:D.users.length,g,"internal-error");const R=D.users[0];y._notifyReloadListener(R);const j=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Kr(R.providerUserInfo):[],te=Ra(y.providerData,j),Qe=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==te?void 0:te.length)),nt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:te,metadata:new Rl(R.createdAt,R.lastLoginAt),isAnonymous:Qe};Object.assign(y,nt)})).apply(this,arguments)}function $n(){return($n=(0,l.Z)(function*(y){const f=(0,F.m9)(y);yield Ci(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ra(y,f){return[...y.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function Kr(y){return y.map(f=>{var{providerId:g}=f,w=ae(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function St(){return(St=(0,l.Z)(function*(y,f){const g=yield Ti(y,{},(0,l.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:R}=y.config,j=Ee(y,D,"/v1/token",`key=${R}`),te=yield y._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",mt.fetch()(j,{method:"POST",headers:te,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Me(f.idToken,"internal-error"),Me(void 0!==f.idToken,"internal-error"),Me(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function sr(y){const f=fo(y);return Me(f,"internal-error"),Me(void 0!==f.exp,"internal-error"),Me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,l.Z)(function*(){return Me(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,l.Z)(function*(){const{accessToken:D,refreshToken:R,expiresIn:j}=yield function We(y,f){return St.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(D,R,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:D,expirationTime:R}=g,j=new $t;return w&&(Me("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),D&&(Me("string"==typeof D,"internal-error",{appName:f}),j.accessToken=D),R&&(Me("number"==typeof R,"internal-error",{appName:f}),j.expirationTime=R),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return gr("not implemented")}}function xn(y,f){Me("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Cr{constructor(f){var{uid:g,auth:w,stsTokenManager:D}=f,R=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Rl(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,l.Z)(function*(){const w=yield qn(g,g.stsTokenManager.getToken(g.auth,f));return Me(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function xl(y){return zo.apply(this,arguments)}(this,f)}reload(){return function go(y){return $n.apply(this,arguments)}(this)}_assign(f){this!==f&&(Me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Cr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,l.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Ci(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,l.Z)(function*(){const g=yield f.getIdToken();return yield qn(f,function Te(y,f){return _e.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,D,R,j,te,ke,Ne,Qe;const nt=null!==(w=g.displayName)&&void 0!==w?w:void 0,bt=null!==(D=g.email)&&void 0!==D?D:void 0,lr=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Ts=null!==(j=g.photoURL)&&void 0!==j?j:void 0,qd=null!==(te=g.tenantId)&&void 0!==te?te:void 0,uc=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Of=null!==(Ne=g.createdAt)&&void 0!==Ne?Ne:void 0,kf=null!==(Qe=g.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:lc,emailVerified:$d,isAnonymous:cc,providerData:el,stsTokenManager:Ff}=g;Me(lc&&Ff,f,"internal-error");const dc=$t.fromJSON(this.name,Ff);Me("string"==typeof lc,f,"internal-error"),xn(nt,f.name),xn(bt,f.name),Me("boolean"==typeof $d,f,"internal-error"),Me("boolean"==typeof cc,f,"internal-error"),xn(lr,f.name),xn(Ts,f.name),xn(qd,f.name),xn(uc,f.name),xn(Of,f.name),xn(kf,f.name);const Gd=new Cr({uid:lc,auth:f,email:bt,emailVerified:$d,displayName:nt,isAnonymous:cc,photoURL:Ts,phoneNumber:lr,tenantId:qd,stsTokenManager:dc,createdAt:Of,lastLoginAt:kf});return el&&Array.isArray(el)&&(Gd.providerData=el.map(Lf=>Object.assign({},Lf))),uc&&(Gd._redirectEventId=uc),Gd}static _fromIdTokenResponse(f,g,w=!1){return(0,l.Z)(function*(){const D=new $t;D.updateFromServerResponse(g);const R=new Cr({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Ci(R),R})()}}const Rr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,l.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,l.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,l.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Ht(y,f,g){return`firebase:${y}:${f}:${g}`}class bi{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:D,name:R}=this.auth;this.fullUserKey=Ht(this.userKey,D.apiKey,R),this.fullPersistenceKey=Ht("persistence",D.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,l.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Cr._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,l.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,l.Z)(function*(){if(!g.length)return new bi(Bt(Rr),f,w);const D=(yield Promise.all(g.map(function(){var Ne=(0,l.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return Ne.apply(this,arguments)}}()))).filter(Ne=>Ne);let R=D[0]||Bt(Rr);const j=Ht(w,f.config.apiKey,f.name);let te=null;for(const Ne of g)try{const Qe=yield Ne._get(j);if(Qe){const nt=Cr._fromJSON(f,Qe);Ne!==R&&(te=nt),R=Ne;break}}catch(Qe){}const ke=D.filter(Ne=>Ne._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],te&&(yield R._set(j,te.toJSON())),yield Promise.all(g.map(function(){var Ne=(0,l.Z)(function*(Qe){if(Qe!==R)try{yield Qe._remove(j)}catch(nt){}});return function(Qe){return Ne.apply(this,arguments)}}())),new bi(R,f,w)):new bi(R,f,w)})()}}function Rn(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ma(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ct(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Pn(f))return"Blackberry";if(Ko(f))return"Webos";if(mo(f))return"Safari";if((f.includes("chrome/")||yo(f))&&!f.includes("edge/"))return"Chrome";if(Yi(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ct(y=(0,F.z$)()){return/firefox\//i.test(y)}function mo(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function yo(y=(0,F.z$)()){return/crios\//i.test(y)}function Ma(y=(0,F.z$)()){return/iemobile/i.test(y)}function Yi(y=(0,F.z$)()){return/android/i.test(y)}function Pn(y=(0,F.z$)()){return/blackberry/i.test(y)}function Ko(y=(0,F.z$)()){return/webos/i.test(y)}function Qi(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Yo(y=(0,F.z$)()){return Qi(y)||Yi(y)||Ko(y)||Pn(y)||/windows phone/i.test(y)||Ma(y)}function Ai(y,f=[]){let g;switch(y){case"Browser":g=Rn((0,F.z$)());break;case"Worker":g=`${Rn((0,F.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class Bc{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gs(this),this.idTokenSubscription=new gs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=Bt(g)),this._initializationPromise=this.queue((0,l.Z)(function*(){var D,R;if(!w._deleted&&(w.persistenceManager=yield bi.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,l.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,l.Z)(function*(){var w;let D=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==D?void 0:D._redirectEventId,te=yield g.tryRedirectSignIn(f);(!R||R===j)&&(null==te?void 0:te.user)&&(D=te.user)}return D?D._redirectEventId?(Me(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===D._redirectEventId?g.directlySetCurrentUser(D):g.reloadAndSetCurrentUserOrClear(D)):g.reloadAndSetCurrentUserOrClear(D):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,l.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,l.Z)(function*(){try{yield Ci(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Wo(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,l.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,l.Z)(function*(){const w=f?(0,F.m9)(f):null;return w&&Me(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,l.Z)(function*(){if(!g._deleted)return f&&Me(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,l.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,l.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,l.Z)(function*(){yield g.assertedPersistence.setPersistence(Bt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,l.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,l.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&Bt(f)||g._popupRedirectResolver;Me(w,g,"argument-error"),g.redirectPersistenceManager=yield bi.create(g,[Bt(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,l.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,l.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,l.Z)(function*(){if(f===g.currentUser)return g.queue((0,l.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,D){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(j,this,"internal-error"),j.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,w,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,l.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ai(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,l.Z)(function*(){const g={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(g["X-Firebase-gmpid"]=f.app.options.appId),g})()}}function On(y){return(0,F.m9)(y)}class gs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jc(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Wh(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Na{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return gr("not implemented")}_getIdTokenResponse(f){return gr("not implemented")}_linkToIdToken(f,g){return gr("not implemented")}_getReauthenticationResolver(f){return gr("not implemented")}}function zh(y,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:resetPassword",lt(y,f))})).apply(this,arguments)}function Kh(y,f){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function dg(y,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",lt(y,f))})).apply(this,arguments)}function qc(){return(qc=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPassword",lt(y,f))})).apply(this,arguments)}function Ml(y,f){return $c.apply(this,arguments)}function $c(){return($c=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendOobCode",lt(y,f))})).apply(this,arguments)}function hg(y,f){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,l.Z)(function*(y,f){return Ml(y,f)})).apply(this,arguments)}function fg(y,f){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,l.Z)(function*(y,f){return Ml(y,f)})).apply(this,arguments)}function Oa(y,f){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,l.Z)(function*(y,f){return Ml(y,f)})).apply(this,arguments)}function Pl(y,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,l.Z)(function*(y,f){return Ml(y,f)})).apply(this,arguments)}function Au(){return(Au=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithEmailLink",lt(y,f))})).apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithEmailLink",lt(y,f))})).apply(this,arguments)}class Fa extends Na{constructor(f,g,w,D=null){super("password",w),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new Fa(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new Fa(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,l.Z)(function*(){switch(g.signInMethod){case"password":return function Qo(y,f){return qc.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function _o(y,f){return Au.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Xt(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return Kh(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function ka(y,f){return vo.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Xt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Bs(y,f){return La.apply(this,arguments)}function La(){return(La=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithIdp",lt(y,f))})).apply(this,arguments)}class br extends Na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new br(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Xt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=g,R=ae(g,["providerId","signInMethod"]);if(!w||!D)return null;const j=new br(w,D);return j.idToken=R.idToken||void 0,j.accessToken=R.accessToken||void 0,j.secret=R.secret,j.nonce=R.nonce,j.pendingToken=R.pendingToken||null,j}_getIdTokenResponse(f){return Bs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Bs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Bs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function xi(y,f){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendVerificationCode",lt(y,f))})).apply(this,arguments)}function Ua(){return(Ua=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",lt(y,f))})).apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(y,f){const g=yield q(y,"POST","/v1/accounts:signInWithPhoneNumber",lt(y,f));if(g.temporaryProof)throw $e(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Qc={USER_NOT_FOUND:"user-not-found"};function Jc(){return(Jc=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",lt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Qc)})).apply(this,arguments)}class Kt extends Na{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Kt({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Kt({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Qr(y,f){return Ua.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Yc(y,f){return Su.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function kl(y,f){return Jc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:R}=f;return w||g||D||R?new Kt({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:R}):null}}class on{constructor(f){var g,w,D,R,j,te;const ke=(0,F.zd)((0,F.pd)(f)),Ne=null!==(g=ke.apiKey)&&void 0!==g?g:null,Qe=null!==(w=ke.oobCode)&&void 0!==w?w:null,nt=function js(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=ke.mode)&&void 0!==D?D:null);Me(Ne&&Qe&&nt,"argument-error"),this.apiKey=Ne,this.operation=nt,this.code=Qe,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(j=ke.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(te=ke.tenantId)&&void 0!==te?te:null}static parseLink(f){const g=function Xc(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||f||y}(f);try{return new on(g)}catch(w){return null}}}let Jo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Fa._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=on.parseLink(w);return Me(D,"argument-error"),Fa._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wn{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class kn extends Wn{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ms extends kn{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Me("providerId"in g&&"signInMethod"in g,"argument-error"),br._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Me(f.idToken||f.accessToken,"argument-error"),br._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ms.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ms.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:R,nonce:j,providerId:te}=f;if(!w&&!D&&!g&&!R||!te)return null;try{return new ms(te)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:R})}catch(ke){return null}}}let Xo=(()=>{class y extends kn{constructor(){super("facebook.com")}static credential(g){return br._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Xi=(()=>{class y extends kn{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return br._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return y.credential(w,D)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Mr=(()=>{class y extends kn{constructor(){super("github.com")}static credential(g){return br._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class es extends Na{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Bs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Bs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Bs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:R}=g;return w&&D&&R&&w===D?new es(w,R):null}static _create(f,g){return new es(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends Wn{constructor(f){Me(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Nr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Nr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=es.fromJSON(f);return Me(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return es._create(w,g)}catch(D){return null}}}let Zs=(()=>{class y extends kn{constructor(){super("twitter.com")}static credential(g,w){return br._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return y.credential(w,D)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ea(y,f){return gt.apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signUp",lt(y,f))})).apply(this,arguments)}class ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,D=!1){return(0,l.Z)(function*(){const R=yield Cr._fromIdTokenResponse(f,w,D),j=Va(w);return new ar({user:R,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,l.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Va(w);return new ar({user:f,providerId:D,_tokenResponse:w,operationType:g})})()}}function Va(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ta(){return(ta=(0,l.Z)(function*(y){var f;const g=On(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield ea(g,{returnSecureToken:!0}),D=yield ar._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class na extends F.ZR{constructor(f,g,w,D){var R;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,na.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,D){return new na(f,g,w,D)}}function Ll(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?na._fromErrorAndOperation(y,R,f,w):R})}function xu(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Nt(){return(Nt=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y);yield wo(!0,g,f);const{providerUserInfo:w}=yield qe(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=xu(w||[]);return g.providerData=g.providerData.filter(R=>D.has(R.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ul(y,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,l.Z)(function*(y,f,g=!1){const w=yield qn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",w)})).apply(this,arguments)}function wo(y,f,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,l.Z)(function*(y,f,g){yield Ci(f);const D=!1===y?"provider-already-linked":"no-such-provider";Me(xu(f.providerData).has(g)===y,f.auth,D)})).apply(this,arguments)}function Jr(y,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,l.Z)(function*(y,f,g=!1){const{auth:w}=y,D="reauthenticate";try{const R=yield qn(y,Ll(w,D,f,y),g);Me(R.idToken,w,"internal-error");const j=fo(R.idToken);Me(j,w,"internal-error");const{sub:te}=j;return Me(y.uid===te,w,"user-mismatch"),ar._forOperation(y,D,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Xt(w,"user-mismatch"),R}})).apply(this,arguments)}function Ru(y,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,l.Z)(function*(y,f,g=!1){const w="signIn",D=yield Ll(y,w,f),R=yield ar._fromIdTokenResponse(y,w,D);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Nu(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(y,f){return Ru(On(y),f)})).apply(this,arguments)}function ja(y,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y);return yield wo(!1,g,f.providerId),Ul(g,f)})).apply(this,arguments)}function Ri(y,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,l.Z)(function*(y,f){return Jr((0,F.m9)(y),f)})).apply(this,arguments)}function _s(y,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,l.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithCustomToken",lt(y,f))})).apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(y,f){const g=On(y),w=yield _s(g,{token:f,returnSecureToken:!0}),D=yield ar._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ou{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Za._fromServerResponse(f,g):Xt(f,"internal-error")}}class Za extends Ou{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Za(g)}}function sa(y,f,g){var w;Me((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Me(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Me(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Me(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function qa(){return(qa=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D={requestType:"PASSWORD_RESET",email:f};g&&sa(w,D,g),yield fg(w,D)})).apply(this,arguments)}function Vl(){return(Vl=(0,l.Z)(function*(y,f,g){yield zh((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(y,f){yield dg((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function td(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y),w=yield zh(g,{oobCode:f}),D=w.requestType;switch(Me(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(w.mfaInfo,g,"internal-error");default:Me(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=Ou._fromServerResponse(On(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:D}})).apply(this,arguments)}function Wa(){return(Wa=(0,l.Z)(function*(y,f){const{data:g}=yield td((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function nd(){return(nd=(0,l.Z)(function*(y,f,g){const w=On(y),D=yield ea(w,{returnSecureToken:!0,email:f,password:g}),R=yield ar._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Fn(){return(Fn=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};Me(g.handleCodeInApp,w,"argument-error"),g&&sa(w,D,g),yield Oa(w,D)})).apply(this,arguments)}function za(){return(za=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D=Jo.credentialWithLink(f,g||Ir());return Me(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Nu(w,D)})).apply(this,arguments)}function rd(y,f){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:createAuthUri",lt(y,f))})).apply(this,arguments)}function Jh(){return(Jh=(0,l.Z)(function*(y,f){const w={identifier:f,continueUri:Tr()?Ir():"http://localhost"},{signinMethods:D}=yield rd((0,F.m9)(y),w);return D||[]})).apply(this,arguments)}function qs(){return(qs=(0,l.Z)(function*(y,f){const g=(0,F.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&sa(g.auth,D,f);const{email:R}=yield hg(g.auth,D);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Uu(){return(Uu=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&sa(w.auth,R,g);const{email:j}=yield Pl(w.auth,R);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xh(y,f){return sd.apply(this,arguments)}function sd(){return(sd=(0,l.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function bn(){return(bn=(0,l.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,F.m9)(y),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield qn(w,Xh(w.auth,R));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const te=w.providerData.find(({providerId:ke})=>"password"===ke);te&&(te.displayName=w.displayName,te.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function Ka(y,f,g){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,l.Z)(function*(y,f,g){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const j=yield qn(y,Kh(w,R));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Ya{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class ad extends Ya{constructor(f,g,w,D){super(f,g,w),this.username=D}}class mg extends Ya{constructor(f,g){super(f,"facebook.com",g)}}class Hl extends ad{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ud extends Ya{constructor(f,g){super(f,"google.com",g)}}class _n extends ad{constructor(f,g,w){super(f,"twitter.com",g,w)}}function Dn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function od(y){var f,g;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=fo(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Ya(R,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new mg(R,D);case"github.com":return new Hl(R,D);case"google.com":return new ud(R,D);case"twitter.com":return new _n(R,D,y.screenName||null);case"custom":case"anonymous":return new Ya(R,null);default:return new Ya(R,w,D)}}(g)}class ts{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ts("enroll",f)}static _fromMfaPendingCredential(f){return new ts("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ts._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ts._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Xa{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=On(f),D=g.customData._serverResponse,R=(D.mfaInfo||[]).map(te=>Ou._fromServerResponse(w,te));Me(D.mfaPendingCredential,w,"internal-error");const j=ts._fromMfaPendingCredential(D.mfaPendingCredential);return new Xa(j,R,function(){var te=(0,l.Z)(function*(ke){const Ne=yield ke._process(w,j);delete D.mfaInfo,delete D.mfaPendingCredential;const Qe=Object.assign(Object.assign({},D),{idToken:Ne.idToken,refreshToken:Ne.refreshToken});switch(g.operationType){case"signIn":const nt=yield ar._fromIdTokenResponse(w,g.operationType,Qe);return yield w._updateCurrentUser(nt.user),nt;case"reauthenticate":return Me(g.user,w,"internal-error"),ar._forOperation(g.user,g.operationType,Qe);default:Xt(w,"internal-error")}});return function(ke){return te.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,l.Z)(function*(){return g.signInResolver(f)})()}}function wt(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:start",lt(y,f))}class tu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Ou._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new tu(f)}getSession(){var f=this;return(0,l.Z)(function*(){return ts._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,l.Z)(function*(){const D=f,R=yield w.getSession(),j=yield qn(w.user,D._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,l.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield g.user.getIdToken(),R=yield qn(g.user,function ql(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(y,f))}(g.user.auth,{idToken:D,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const Ws=new WeakMap,aa="__sak";class $l{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const zs=(()=>{class y extends $l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ns(){const y=(0,F.z$)();return mo(y)||Qi(y)}()&&function Di(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Yo(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),R=this.localCache[w];D!==R&&g(w,R,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((te,ke,Ne)=>{this.notifyListeners(te,Ne)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(D);if(g.newValue!==te)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const R=()=>{const te=this.storage.getItem(D);!w&&this.localCache[D]===te||this.notifyListeners(D,te)},j=this.storage.getItem(D);!function Vc(){return(0,F.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const R of Array.from(D))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,R=this;return(0,l.Z)(function*(){yield D().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,l.Z)(function*(){const R=yield w().call(D,g);return D.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,D=this;return(0,l.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),Yn=(()=>{class y extends $l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let dd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,l.Z)(function*(){const D=g,{eventId:R,eventType:j,data:te}=D.data,ke=w.handlersMap[j];if(!(null==ke?void 0:ke.size))return;D.ports[0].postMessage({status:"ack",eventId:R,eventType:j});const Ne=Array.from(ke).map(function(){var nt=(0,l.Z)(function*(bt){return bt(D.origin,te)});return function(bt){return nt.apply(this,arguments)}}()),Qe=yield function la(y){return Promise.all(y.map(function(){var f=(0,l.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Ne);D.ports[0].postMessage({status:"done",eventId:R,eventType:j,response:Qe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ni(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class Eo{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var D=this;return(0,l.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let j,te;return new Promise((ke,Ne)=>{const Qe=Ni("",20);R.port1.start();const nt=setTimeout(()=>{Ne(new Error("unsupported_event"))},w);te={messageChannel:R,onMessage(bt){const lr=bt;if(lr.data.eventId===Qe)switch(lr.data.status){case"ack":clearTimeout(nt),j=setTimeout(()=>{Ne(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),ke(lr.data.response);break;default:clearTimeout(nt),clearTimeout(j),Ne(new Error("invalid_response"))}}},D.handlers.add(te),R.port1.addEventListener("message",te.onMessage),D.target.postMessage({eventType:f,eventId:Qe,data:g},[R.port2])}).finally(()=>{te&&D.removeMessageHandler(te)})})()}}function jt(){return window}function nu(){return void 0!==jt().WorkerGlobalScope&&"function"==typeof jt().importScripts}function rs(){return(rs=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const oi="firebaseLocalStorageDb",ai="firebaseLocalStorage",yr="fbase_key";class an{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ws(y,f){return y.transaction([ai],f?"readwrite":"readonly").objectStore(ai)}function fd(){const y=indexedDB.open(oi,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ai,{keyPath:yr})}catch(D){g(D)}}),y.addEventListener("success",(0,l.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ai)?f(w):(w.close(),yield function Zu(){const y=indexedDB.deleteDatabase(oi);return new an(y).toPromise()}(),f(yield fd()))}))})}function yg(y,f,g){return pd.apply(this,arguments)}function pd(){return(pd=(0,l.Z)(function*(y,f,g){const w=ws(y,!0).put({[yr]:f,value:g});return new an(w).toPromise()})).apply(this,arguments)}function Ks(){return(Ks=(0,l.Z)(function*(y,f){const g=ws(y,!1).get(f),w=yield new an(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Un(y,f){const g=ws(y,!0).delete(f);return new an(g).toPromise()}const Pr=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,l.Z)(function*(){return g.db||(g.db=yield fd()),g.db})()}_withRetries(g){var w=this;return(0,l.Z)(function*(){let D=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(D++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,l.Z)(function*(){return nu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,l.Z)(function*(){g.receiver=dd._getInstance(function hd(){return nu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(D,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(D,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(D,R){return["keyChanged"]});return function(D,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,l.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function vn(){return rs.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Eo(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=R[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Pi(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const g=yield fd();return yield yg(g,aa,"1"),yield Un(g,aa),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(R=>yg(R,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,l.Z)(function*(){const D=yield w._withRetries(R=>function By(y,f){return Ks.apply(this,arguments)}(R,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(D=>Un(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,l.Z)(function*(){const w=yield g._withRetries(j=>{const te=ws(j,!1).getAll();return new an(te).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],R=new Set;for(const{fbase_key:j,value:te}of w)R.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(te)&&(g.notifyListeners(j,te),D.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!R.has(j)&&(g.notifyListeners(j,null),D.push(j));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const R of Array.from(D))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function nf(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:start",lt(y,f))}function Oi(){return(Oi=(0,l.Z)(function*(y){return(yield ln(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ru(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=D=>{const R=qt("internal-error");R.customData=D,g(R)},w.type="text/javascript",w.charset="UTF-8",function gd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function da(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ha=1e12;class yd{constructor(f){this.auth=f,this.counter=ha,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new _d(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||ha;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ha))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,l.Z)(function*(){var w;return null===(w=g._widgets.get(f||ha))||void 0===w||w.execute(),""})()}}class _d{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;Me(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qu(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qn=da("rcb"),It=new Ft(3e4,6e4);class $u{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!jt().grecaptcha}load(f,g=""){return Me(function vd(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(jt().grecaptcha):new Promise((w,D)=>{const R=jt().setTimeout(()=>{D(qt(f,"network-request-failed"))},It.get());jt()[Qn]=()=>{jt().clearTimeout(R),delete jt()[Qn];const te=jt().grecaptcha;if(!te)return void D(qt(f,"internal-error"));const ke=te.render;te.render=(Ne,Qe)=>{const nt=ke(Ne,Qe);return this.counter++,nt},this.hostLanguage=g,w(te)},ru(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Qn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),D(qt(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!jt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wd{load(f){return(0,l.Z)(function*(){return new yd(f)})()}clearedOneInstance(){}}const Ed="recaptcha",sf={theme:"light",type:"image"};class fa{constructor(f,g=Object.assign({},sf),w){this.parameters=g,this.type=Ed,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(w),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;Me(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wd:new $u,this.validateStartingState()}verify(){var f=this;return(0,l.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const j=te=>{!te||(f.tokenChangeListeners.delete(j),R(te))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=jt()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,l.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,l.Z)(function*(){Me(Tr()&&!nu(),f.auth,"internal-error"),yield function ki(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ui(y){return Oi.apply(this,arguments)}(f.auth);Me(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class iu{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Kt._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ei(){return(ei=(0,l.Z)(function*(y,f,g){const w=On(y),D=yield ou(w,f,(0,F.m9)(g));return new iu(D,R=>Nu(w,R))})).apply(this,arguments)}function Yt(){return(Yt=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);yield wo(!1,w,"phone");const D=yield ou(w.auth,f,(0,F.m9)(g));return new iu(D,R=>ja(w,R))})).apply(this,arguments)}function su(){return(su=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y),D=yield ou(w.auth,f,(0,F.m9)(g));return new iu(D,R=>Ri(w,R))})).apply(this,arguments)}function ou(y,f,g){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,l.Z)(function*(y,f,g){var w;const D=yield g.verify();try{let R;if(Me("string"==typeof D,y,"argument-error"),Me(g.type===Ed,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const j=R.session;if("phoneNumber"in R)return Me("enroll"===j.type,y,"internal-error"),(yield wt(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Me("signin"===j.type,y,"internal-error");const te=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Me(te,y,"missing-multi-factor-info"),(yield nf(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield xi(y,{phoneNumber:R.phoneNumber,recaptchaToken:D});return j}}finally{g._reset()}})).apply(this,arguments)}function zl(){return(zl=(0,l.Z)(function*(y,f){yield Ul((0,F.m9)(y),f)})).apply(this,arguments)}let C=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=On(g)}verifyPhoneNumber(g,w){return ou(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Kt._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?Kt._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function b(y,f){return f?Bt(f):(Me(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class N extends Na{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Bs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Bs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Bs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function V(y){return Ru(y.auth,new N(y),y.bypassAuthState)}function z(y){const{auth:f,user:g}=y;return Me(g,f,"internal-error"),Jr(g,new N(y),y.bypassAuthState)}function re(y){return le.apply(this,arguments)}function le(){return(le=(0,l.Z)(function*(y){const{auth:f,user:g}=y;return Me(g,f,"internal-error"),Ul(g,new N(y),y.bypassAuthState)})).apply(this,arguments)}class Ge{constructor(f,g,w,D,R=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,l.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:R,tenantId:j,error:te,type:ke}=f;if(te)return void g.reject(te);const Ne={auth:g.auth,requestUri:w,sessionId:D,tenantId:j||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ne))}catch(Qe){g.reject(Qe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return V;case"linkViaPopup":case"linkViaRedirect":return re;case"reauthViaPopup":case"reauthViaRedirect":return z;default:Xt(this.auth,"internal-error")}}resolve(f){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ke=new Ft(2e3,1e4);function en(){return(en=(0,l.Z)(function*(y,f,g){const w=On(y);zr(y,f,Wn);const D=b(w,g);return new kr(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function Vn(){return(Vn=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);zr(w.auth,f,Wn);const D=b(w.auth,g);return new kr(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function is(){return(is=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);zr(w.auth,f,Wn);const D=b(w.auth,g);return new kr(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let kr=(()=>{class y extends Ge{constructor(g,w,D,R,j){super(g,w,R,j),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,l.Z)(function*(){const w=yield g.execute();return Me(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,l.Z)(function*(){st(1===g.filter.length,"Popup operations only handle one event");const w=Ni();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(qt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ke.get())};g()}}return y.currentPopupAction=null,y})();const Fr=new Map;class Qs extends Ge{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,l.Z)(function*(){let w=Fr.get(g.auth._key());if(!w){try{const R=(yield function Io(y,f){return au.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(R)}catch(D){w=()=>Promise.reject(D)}Fr.set(g.auth._key(),w)}return g.bypassAuthState||Fr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function au(){return(au=(0,l.Z)(function*(y,f){const g=_g(f),w=Ku(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function Td(y,f){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,l.Z)(function*(y,f){return Ku(y)._set(_g(f),"true")})).apply(this,arguments)}function Ku(y){return Bt(y._redirectPersistence)}function _g(y){return Ht("pendingRedirect",y.config.apiKey,y.name)}function af(){return(af=(0,l.Z)(function*(y,f,g){const w=On(y);zr(y,f,Wn);const D=b(w,g);return yield Td(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function uf(){return(uf=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);zr(w.auth,f,Wn);const D=b(w.auth,g);yield Td(D,w.auth);const R=yield Yl(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function uu(){return(uu=(0,l.Z)(function*(y,f,g){const w=(0,F.m9)(y);zr(w.auth,f,Wn);const D=b(w.auth,g);yield wo(!1,w,f.providerId),yield Td(D,w.auth);const R=yield Yl(w);return D._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function ga(){return(ga=(0,l.Z)(function*(y,f){return yield On(y)._initializationPromise,Kl(y,f,!1)})).apply(this,arguments)}function Kl(y,f){return lf.apply(this,arguments)}function lf(){return(lf=(0,l.Z)(function*(y,f,g=!1){const w=On(y),D=b(w,f),j=yield new Qs(w,D,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function Yl(y){return Js.apply(this,arguments)}function Js(){return(Js=(0,l.Z)(function*(y){const f=Ni(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class df{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function hf(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!bd(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(qt(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qu(f))}saveEventToCache(f){this.cachedEventUids.add(Qu(f)),this.lastProcessedEventTime=Date.now()}}function Qu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function bd({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function ff(y){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,l.Z)(function*(y,f={}){return ln(y,"GET","/v1/projects",f)})).apply(this,arguments)}const pf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hy=/^https?/;function lu(){return(lu=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ff(y);for(const g of f)try{if(qy(g))return}catch(w){}Xt(y,"unauthorized-domain")})).apply(this,arguments)}function qy(y){const f=Ir(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!Hy.test(g))return!1;if(pf.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const kw=new Ft(3e4,6e4);function Dd(){const y=jt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Jl=null;function $y(y){return Jl=Jl||function Ad(y){return new Promise((f,g)=>{var w,D,R;function j(){Dd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Dd(),g(qt(y,"network-request-failed"))},timeout:kw.get()})}if(null===(D=null===(w=jt().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=jt().gapi)||void 0===R?void 0:R.load)){const te=da("iframefcb");return jt()[te]=()=>{gapi.load?j():g(qt(y,"network-request-failed"))},ru(`https://apis.google.com/js/api.js?onload=${te}`).catch(ke=>g(ke))}j()}}).catch(f=>{throw Jl=null,f})}(y),Jl}const gf=new Ft(5e3,15e3),Wy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fw(y){const f=y.config;Me(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?ut(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},D=zy.get(y.config.apiHost);D&&(w.eid=D);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function To(){return To=(0,l.Z)(function*(y){const f=yield $y(y),g=jt().gapi;return Me(g,y,"internal-error"),f.open({where:document.body,url:Fw(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wy,dontclear:!0},w=>new Promise(function(){var D=(0,l.Z)(function*(R,j){yield w.restyle({setHideOnLeave:!1});const te=qt(y,"network-request-failed"),ke=jt().setTimeout(()=>{j(te)},gf.get());function Ne(){jt().clearTimeout(ke),R(w)}w.ping(Ne).then(Ne,()=>{j(te)})});return function(R,j){return D.apply(this,arguments)}}()))}),To.apply(this,arguments)}const Ig={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ec(y,f,g,w,D,R){Me(y.config.authDomain,y,"auth-domain-config-required"),Me(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:D};if(f instanceof Wn){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ke,Ne]of Object.entries(R||{}))j[ke]=Ne}if(f instanceof kn){const ke=f.getScopes().filter(Ne=>""!==Ne);ke.length>0&&(j.scopes=ke.join(","))}y.tenantId&&(j.tid=y.tenantId);const te=j;for(const ke of Object.keys(te))void 0===te[ke]&&delete te[ke];return`${function Co({config:y}){return y.emulator?ut(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(te).slice(1)}`}const Cg="webStorageSupport";class cu extends class Ky{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return gr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new cu(f)}_finalizeEnroll(f,g,w){return function eu(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:finalize",lt(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function rf(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:finalize",lt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tc=(()=>{class y{constructor(){}static assertion(g){return cu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var bg="@firebase/auth";class nc{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,l.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mn(){return window}function Lr(){return(Lr=(0,l.Z)(function*(y,f,g){var w;const{BuildInfo:D}=mn();st(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Bw(f.sessionId),j={};return Qi()?j.ibi=D.packageName:Yi()?j.apn=D.packageName:Xt(y,"operation-not-supported-in-this-environment"),D.displayName&&(j.appDisplayName=D.displayName),j.sessionId=R,ec(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function xd(){return(xd=(0,l.Z)(function*(y){const{BuildInfo:f}=mn(),g={};Qi()?g.iosBundleId=f.packageName:Yi()?g.androidPackageName=f.packageName:Xt(y,"operation-not-supported-in-this-environment"),yield ff(y,g)})).apply(this,arguments)}function Tf(){return(Tf=(0,l.Z)(function*(y,f,g){const{cordova:w}=mn();let D=()=>{};try{yield new Promise((R,j)=>{let te=null;function ke(){var nt;R();const bt=null===(nt=w.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof bt&&bt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ne(){te||(te=window.setTimeout(()=>{j(qt(y,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===(null==document?void 0:document.visibilityState)&&Ne()}f.addPassiveListener(ke),document.addEventListener("resume",Ne,!1),Yi()&&document.addEventListener("visibilitychange",Qe,!1),D=()=>{f.removePassiveListener(ke),document.removeEventListener("resume",Ne,!1),document.removeEventListener("visibilitychange",Qe,!1),te&&window.clearTimeout(te)}})}finally{D()}})).apply(this,arguments)}function Bw(y){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,l.Z)(function*(y){const f=ma(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ma(y){if(st(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function Sd(y){(0,se._registerComponent)(new de.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),{apiKey:D,authDomain:R}=w.options;return(j=>{Me(D&&!D.includes(":"),"invalid-api-key",{appName:j.name}),Me(!(null==R?void 0:R.includes(":")),"argument-error",{appName:j.name});const te={apiKey:D,authDomain:R,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ai(y)},ke=new Bc(j,te);return function Us(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Bt);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(ke,g),ke})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new de.wA("auth-internal",f=>{const g=On(f.getProvider("auth").getImmediate());return new nc(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(bg,"0.19.9",function Yy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(bg,"0.19.9","esm2017")}("Browser");class Nd extends df{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,l.Z)(function*(){yield f.initPromise})()}}function Jn(y){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(y){const f=yield Df()._get(Pd(y));return f&&(yield Df()._remove(Pd(y))),f})).apply(this,arguments)}function e_(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Df(){return Bt(zs)}function Pd(y){return Ht("authEvent",y.config.apiKey,y.name)}function kd(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Ld(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qt("no-auth-event")}}function Vd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ag(y=(0,F.z$)()){return!("file:"!==Vd()&&"ionic:"!==Vd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sf(){try{const y=self.localStorage,f=Ni();if(y)return y.setItem(f,"1"),y.removeItem(f),!function u_(y=(0,F.z$)()){return function o_(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function a_(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return xf()&&(0,F.hl)()}return!1}function xf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rf(){return(function bo(){return"http:"===Vd()||"https:"===Vd()}()||(0,F.ru)()||Ag())&&!function s_(){return(0,F.b$)()||(0,F.UG)()}()&&Sf()&&!xf()}function Sg(){return Ag()&&"undefined"!=typeof document}function Bd(){return(Bd=(0,l.Z)(function*(){return!!Sg()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},rc=Me,fu="persistence";function c_(y){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,l.Z)(function*(y){yield y._initializationPromise;const f=Rg(),g=Ht(fu,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Rg(){var y;try{return(null===(y=function l_(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Is=Me;class eo{constructor(){this.browserResolver=Bt(class Vw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yn,this._completeRedirectFn=Kl}_openPopup(f,g,w,D){var R=this;return(0,l.Z)(function*(){var j;st(null===(j=R.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const te=ec(f,g,w,Ir(),D);return function Lw(y,f,g,w=500,D=600){const R=Math.max((window.screen.availHeight-D)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let te="";const ke=Object.assign(Object.assign({},Ig),{width:w.toString(),height:D.toString(),top:R,left:j}),Ne=(0,F.z$)().toLowerCase();g&&(te=yo(Ne)?"_blank":g),Ct(Ne)&&(f=f||"http://localhost",ke.scrollbars="yes");const Qe=Object.entries(ke).reduce((bt,[lr,Ts])=>`${bt}${lr}=${Ts},`,"");if(function cn(y=(0,F.z$)()){var f;return Qi(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ne)&&"_self"!==te)return function Uw(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",te),new vf(null);const nt=window.open(f||"",te,Qe);Me(nt,y,"popup-blocked");try{nt.focus()}catch(bt){}return new vf(nt)}(f,te,Ni())})()}_openRedirect(f,g,w,D){var R=this;return(0,l.Z)(function*(){return yield R._originValidation(f),function ca(y){jt().location.href=y}(ec(f,g,w,Ir(),D)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:R}=this.eventManagers[g];return D?Promise.resolve(D):(st(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,l.Z)(function*(){const w=yield function Eg(y){return To.apply(this,arguments)}(f),D=new df(f);return w.register("authEvent",R=>(Me(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:D.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Cg,{type:Cg},D=>{var R;const j=null===(R=null==D?void 0:D[0])||void 0===R?void 0:R[Cg];void 0!==j&&g(!!j),Xt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ss(y){return lu.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Yo()||mo()||Qi()}}),this.cordovaResolver=Bt(class Fd{constructor(){this._redirectPersistence=Yn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Kl}_initialize(f){var g=this;return(0,l.Z)(function*(){const w=f._key();let D=g.eventManagers.get(w);return D||(D=new Nd(f),g.eventManagers.set(w,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){Xt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,D){var R=this;return(0,l.Z)(function*(){!function Xy(y){var f,g,w,D,R,j,te,ke,Ne,Qe;const nt=mn();Me("function"==typeof(null===(f=null==nt?void 0:nt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Me(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Me("function"==typeof(null===(R=null===(D=null===(w=null==nt?void 0:nt.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(ke=null===(te=null===(j=null==nt?void 0:nt.cordova)||void 0===j?void 0:j.plugins)||void 0===te?void 0:te.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Qe=null===(Ne=null==nt?void 0:nt.cordova)||void 0===Ne?void 0:Ne.InAppBrowser)||void 0===Qe?void 0:Qe.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield R._initialize(f);yield j.initialized(),j.resetRedirect(),function zu(){Fr.clear()}(),yield R._originValidation(f);const te=function Ju(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:e_(),postBody:null,tenantId:y.tenantId,error:qt(y,"no-auth-event")}}(f,w,D);yield function Cf(y,f){return Df()._set(Pd(y),f)}(f,te);const ke=yield function Ef(y,f,g){return Lr.apply(this,arguments)}(f,te,g),Ne=yield function Rd(y){const{cordova:f}=mn();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function Yr(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(ke);return function Md(y,f,g){return Tf.apply(this,arguments)}(f,j,Ne)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function If(y){return xd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:R}=mn(),j=setTimeout((0,l.Z)(function*(){yield Jn(f),g.onEvent(Ld())}),500),te=function(){var Qe=(0,l.Z)(function*(nt){clearTimeout(j);const bt=yield Jn(f);let lr=null;bt&&(null==nt?void 0:nt.url)&&(lr=function bf(y,f){var g,w;const D=function Od(y){const f=kd(y),g=f.link?decodeURIComponent(f.link):void 0,w=kd(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return kd(D).link||D||w||g||y}(f);if(D.includes("/__/auth/callback")){const R=kd(D),j=R.firebaseError?function t_(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,te=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],ke=te?qt(te):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(bt,nt.url)),g.onEvent(lr||Ld())});return function(bt){return Qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,te);const ke=D,Ne=`${R.packageName.toLowerCase()}://`;mn().handleOpenURL=function(){var Qe=(0,l.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ne)&&te({url:nt}),"function"==typeof ke)try{ke(nt)}catch(bt){console.error(bt)}});return function(nt){return Qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yn,this._completeRedirectFn=Kl}_initialize(f){var g=this;return(0,l.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,D){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,w,D)})()}_openRedirect(f,g,w,D){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,w,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Sg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Is(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,l.Z)(function*(){if(f.underlyingResolver)return;const g=yield function xg(){return Bd.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function jd(y){return y.unwrap()}function Mg(y){return sc(y)}function sc(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return C.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Xi;break;case"facebook.com":w=Xo;break;case"github.com":w=Mr;break;case"twitter.com":w=Zs;break;default:const{oauthIdToken:D,oauthAccessToken:R,oauthTokenSecret:j,pendingToken:te,nonce:ke}=f;return R||j||D||te?te?g.startsWith("saml.")?es._create(g,te):br._fromParams({providerId:g,signInMethod:g,pendingToken:te,idToken:D,accessToken:R}):new ms(g).credential({idToken:D,accessToken:R,rawNonce:ke}):null}return y instanceof F.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function ti(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function ic(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Zd(y,function Gs(y,f){var g;const w=(0,F.m9)(y),D=f;return Me(f.customData.operationType,w,"argument-error"),Me(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Xa._fromError(w,D)}(y,f));else if(w){const D=sc(f),R=f;D&&(R.credential=D,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:Mg(g),additionalUserInfo:Dn(g),user:Do.getOrCreate(D)}})}function oc(y,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,l.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>ti(y,g.confirm(w))}})).apply(this,arguments)}class Zd{constructor(f,g){this.resolver=g,this.auth=function d_(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ti(jd(this.auth),this.resolver.resolveSignIn(f))}}class Do{constructor(f){this._delegate=f,this.multiFactor=function Ln(y){const f=(0,F.m9)(y);return Ws.has(f)||Ws.set(f,tu._fromUser(f)),Ws.get(f)}(f)}static getOrCreate(f){return Do.USER_MAP.has(f)||Do.USER_MAP.set(f,new Do(f)),Do.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,l.Z)(function*(){return ti(g.auth,ja(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,l.Z)(function*(){return oc(w.auth,function jy(y,f,g){return Yt.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,l.Z)(function*(){return ti(g.auth,function wn(y,f,g){return is.apply(this,arguments)}(g._delegate,f,eo))})()}linkWithRedirect(f){var g=this;return(0,l.Z)(function*(){return yield c_(On(g.auth)),function wg(y,f,g){return function Yu(y,f,g){return uu.apply(this,arguments)}(y,f,g)}(g._delegate,f,eo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,l.Z)(function*(){return ti(g.auth,Ri(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return oc(this.auth,function Fi(y,f,g){return su.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ti(this.auth,function Or(y,f,g){return Vn.apply(this,arguments)}(this._delegate,f,eo))}reauthenticateWithRedirect(f){var g=this;return(0,l.Z)(function*(){return yield c_(On(g.auth)),function Ow(y,f,g){return function Zy(y,f,g){return uf.apply(this,arguments)}(y,f,g)}(g._delegate,f,eo)})()}sendEmailVerification(f){return function Zl(y,f){return qs.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,l.Z)(function*(){return yield function Re(y,f){return Nt.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ef(y,f){return Ka((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function gg(y,f){return Ka((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Id(y,f){return zl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function vs(y,f){return bn.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Lu(y,f,g){return Uu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Do.USER_MAP=new WeakMap;const to=Me;let Hd=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;to(D,"invalid-api-key",{appName:g.name}),to(D,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?eo:void 0;this._delegate=w.initialize({options:{persistence:h_(D,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(pr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Do.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Ji(y,f,g){const w=On(y);Me(w._canInitEmulator,w,"emulator-config-failed"),Me(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),R=jc(f),{host:j,port:te}=function cg(y){const f=jc(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const R=D[1];return{host:R,port:Wh(w.substr(R.length+1))}}{const[R,j]=w.split(":");return{host:R,port:Wh(j)}}}(f);w.config.emulator={url:`${R}//${j}${null===te?"":`:${te}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:te,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Si(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Bl(y,f){return oa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return td(this._delegate,g)}confirmPasswordReset(g,w){return function $a(y,f,g){return Vl.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,l.Z)(function*(){return ti(D._delegate,function ku(y,f,g){return nd.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function id(y,f){return Jh.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Cn(y,f){const g=on.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,l.Z)(function*(){to(Rf(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function li(y,f){return ga.apply(this,arguments)}(g._delegate,eo);return w?ti(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ud(y,f){On(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:R,error:j,complete:te}=Pf(g,w,D);return this._delegate.onAuthStateChanged(R,j,te)}onIdTokenChanged(g,w,D){const{next:R,error:j,complete:te}=Pf(g,w,D);return this._delegate.onIdTokenChanged(R,j,te)}sendSignInLinkToEmail(g,w){return function ur(y,f,g){return Fn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Ha(y,f,g){return qa.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,l.Z)(function*(){let D;switch(function Es(y,f){rc(Object.values(Li).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?rc(f!==Li.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?rc(f===Li.NONE,y,"unsupported-persistence-type"):xf()?rc(f===Li.NONE||f===Li.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):rc(f===Li.NONE||Sf(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Li.SESSION:D=Yn;break;case Li.LOCAL:D=(yield Bt(Pr)._isAvailable())?Pr:zs;break;case Li.NONE:D=Rr;break;default:return Xt("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ti(this._delegate,function Ba(y){return ta.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ti(this._delegate,Nu(this._delegate,g))}signInWithCustomToken(g){return ti(this._delegate,function ed(y,f){return ia.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return ti(this._delegate,function pg(y,f,g){return Nu((0,F.m9)(y),Jo.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return ti(this._delegate,function Fu(y,f,g){return za.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return oc(this._delegate,function Gu(y,f,g){return ei.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,l.Z)(function*(){return to(Rf(),w._delegate,"operation-not-supported-in-this-environment"),ti(w._delegate,function Pt(y,f,g){return en.apply(this,arguments)}(w._delegate,g,eo))})()}signInWithRedirect(g){var w=this;return(0,l.Z)(function*(){return to(Rf(),w._delegate,"operation-not-supported-in-this-environment"),yield c_(w._delegate),function of(y,f,g){return function vg(y,f,g){return af.apply(this,arguments)}(y,f,g)}(w._delegate,g,eo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function jl(y,f){return Wa.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Li,y})();function Pf(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const D=w;return{next:j=>D(j&&Do.getOrCreate(j)),error:f,complete:g}}function h_(y,f){const g=function Nf(y,f){const g=Rg();if(!g)return[];const w=Ht(fu,y,f);switch(g.getItem(w)){case Li.NONE:return[Rr];case Li.LOCAL:return[Pr,Yn];case Li.SESSION:return[Yn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Pr)&&g.push(Pr),"undefined"!=typeof window)for(const w of[zs,Yn])g.includes(w)||g.push(w);return g.includes(Rr)||g.push(Rr),g}class Xu{constructor(){this.providerId="phone",this._delegate=new C(jd(Q.Z.auth()))}static credential(f,g){return C.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Xu.PHONE_SIGN_IN_METHOD=C.PHONE_SIGN_IN_METHOD,Xu.PROVIDER_ID=C.PROVIDER_ID;const f_=Me;class p_{constructor(f,g,w=Q.Z.app()){var D;f_(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new fa(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function g_(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Hd(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Jo,FacebookAuthProvider:Xo,GithubAuthProvider:Mr,GoogleAuthProvider:Xi,OAuthProvider:ms,SAMLAuthProvider:Nr,PhoneAuthProvider:Xu,PhoneMultiFactorGenerator:tc,RecaptchaVerifier:p_,TwitterAuthProvider:Zs,Auth:Hd,AuthCredential:Na,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.9")}(Q.Z)},2940:function(at,De){!function(k){"use strict";function l(K){return Array.prototype.slice.call(K)}function Q(K){return new Promise(function(ne,pe){K.onsuccess=function(){ne(K.result)},K.onerror=function(){pe(K.error)}})}function F(K,ne,pe){var Se,ye=new Promise(function(He,xe){Q(Se=K[ne].apply(K,pe)).then(He,xe)});return ye.request=Se,ye}function se(K,ne,pe){var Se=F(K,ne,pe);return Se.then(function(ye){if(ye)return new Z(ye,Se.request)})}function ie(K,ne,pe){pe.forEach(function(Se){Object.defineProperty(K.prototype,Se,{get:function(){return this[ne][Se]},set:function(ye){this[ne][Se]=ye}})})}function he(K,ne,pe,Se){Se.forEach(function(ye){ye in pe.prototype&&(K.prototype[ye]=function(){return F(this[ne],ye,arguments)})})}function oe(K,ne,pe,Se){Se.forEach(function(ye){ye in pe.prototype&&(K.prototype[ye]=function(){return this[ne][ye].apply(this[ne],arguments)})})}function ae(K,ne,pe,Se){Se.forEach(function(ye){ye in pe.prototype&&(K.prototype[ye]=function(){return se(this[ne],ye,arguments)})})}function ue(K){this._index=K}function Z(K,ne){this._cursor=K,this._request=ne}function H(K){this._store=K}function X(K){this._tx=K,this.complete=new Promise(function(ne,pe){K.oncomplete=function(){ne()},K.onerror=function(){pe(K.error)},K.onabort=function(){pe(K.error)}})}function je(K,ne,pe){this._db=K,this.oldVersion=ne,this.transaction=new X(pe)}function Ae(K){this._db=K}ie(ue,"_index",["name","keyPath","multiEntry","unique"]),he(ue,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ae(ue,"_index",IDBIndex,["openCursor","openKeyCursor"]),ie(Z,"_cursor",["direction","key","primaryKey","value"]),he(Z,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(Z.prototype[K]=function(){var ne=this,pe=arguments;return Promise.resolve().then(function(){return ne._cursor[K].apply(ne._cursor,pe),Q(ne._request).then(function(Se){if(Se)return new Z(Se,ne._request)})})})}),H.prototype.createIndex=function(){return new ue(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new ue(this._store.index.apply(this._store,arguments))},ie(H,"_store",["name","keyPath","indexNames","autoIncrement"]),he(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ae(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe(H,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},ie(X,"_tx",["objectStoreNames","mode"]),oe(X,"_tx",IDBTransaction,["abort"]),je.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},ie(je,"_db",["name","version","objectStoreNames"]),oe(je,"_db",IDBDatabase,["deleteObjectStore","close"]),Ae.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},ie(Ae,"_db",["name","version","objectStoreNames"]),oe(Ae,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[H,ue].forEach(function(ne){K in ne.prototype&&(ne.prototype[K.replace("open","iterate")]=function(){var pe=l(arguments),Se=pe[pe.length-1],ye=this._store||this._index,He=ye[K].apply(ye,pe.slice(0,-1));He.onsuccess=function(){Se(He.result)}})})}),[ue,H].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(ne,pe){var Se=this,ye=[];return new Promise(function(He){Se.iterateCursor(ne,function(xe){xe?(ye.push(xe.value),void 0===pe||ye.length!=pe?xe.continue():He(ye)):He(ye)})})})}),k.openDb=function Oe(K,ne,pe){var Se=F(indexedDB,"open",[K,ne]),ye=Se.request;return ye&&(ye.onupgradeneeded=function(He){pe&&pe(new je(ye.result,He.oldVersion,ye.transaction))}),Se.then(function(He){return new Ae(He)})},k.deleteDb=function Be(K){return F(indexedDB,"deleteDatabase",[K])},Object.defineProperty(k,"__esModule",{value:!0})}(De)},8306:(at,De,k)=>{"use strict";k.d(De,{y:()=>Z});var l=k(930),Q=k(727),F=k(8822),se=k(4671);var oe=k(2416),ae=k(576),ue=k(2806);let Z=(()=>{class Ae{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const K=new Ae;return K.source=this,K.operator=Be,K}subscribe(Be,K,ne){const pe=function je(Ae){return Ae&&Ae instanceof l.Lv||function X(Ae){return Ae&&(0,ae.m)(Ae.next)&&(0,ae.m)(Ae.error)&&(0,ae.m)(Ae.complete)}(Ae)&&(0,Q.Nn)(Ae)}(Be)?Be:new l.Hp(Be,K,ne);return(0,ue.x)(()=>{const{operator:Se,source:ye}=this;pe.add(Se?Se.call(pe,ye):ye?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(K){Be.error(K)}}forEach(Be,K){return new(K=H(K))((ne,pe)=>{let Se;Se=this.subscribe(ye=>{try{Be(ye)}catch(He){pe(He),null==Se||Se.unsubscribe()}},pe,ne)})}_subscribe(Be){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(Be)}[F.L](){return this}pipe(...Be){return function he(Ae){return 0===Ae.length?se.y:1===Ae.length?Ae[0]:function(Be){return Ae.reduce((K,ne)=>ne(K),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((K,ne)=>{let pe;this.subscribe(Se=>pe=Se,Se=>ne(Se),()=>K(pe))})}}return Ae.create=Oe=>new Ae(Oe),Ae})();function H(Ae){var Oe;return null!==(Oe=null!=Ae?Ae:oe.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(at,De,k)=>{"use strict";k.d(De,{x:()=>oe});var l=k(8306),Q=k(727);const se=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=k(8737),he=k(2806);let oe=(()=>{class ue extends l.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const X=new ae(this,this);return X.operator=H,X}_throwIfClosed(){if(this.closed)throw new se}next(H){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const je of X)je.next(H)}})}error(H){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:X}=this;for(;X.length;)X.shift().error(H)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:X,isStopped:je,observers:Ae}=this;return X||je?Q.Lc:(Ae.push(H),new Q.w0(()=>(0,ie.P)(Ae,H)))}_checkFinalizedStatuses(H){const{hasError:X,thrownError:je,isStopped:Ae}=this;X?H.error(je):Ae&&H.complete()}asObservable(){const H=new l.y;return H.source=this,H}}return ue.create=(Z,H)=>new ae(Z,H),ue})();class ae extends oe{constructor(Z,H){super(),this.destination=Z,this.source=H}next(Z){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===X||X.call(H,Z)}error(Z){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===X||X.call(H,Z)}complete(){var Z,H;null===(H=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===H||H.call(Z)}_subscribe(Z){var H,X;return null!==(X=null===(H=this.source)||void 0===H?void 0:H.subscribe(Z))&&void 0!==X?X:Q.Lc}}},930:(at,De,k)=>{"use strict";k.d(De,{Hp:()=>je,Lv:()=>X});var l=k(576),Q=k(727),F=k(2416),se=k(7849),ie=k(5032);const he=ue("C",void 0,void 0);function ue(ne,pe,Se){return{kind:ne,value:pe,error:Se}}var Z=k(3410),H=k(2806);class X extends Q.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,Q.Nn)(pe)&&pe.add(this)):this.destination=K}static create(pe,Se,ye){return new je(pe,Se,ye)}next(pe){this.isStopped?Be(function ae(ne){return ue("N",ne,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?Be(function oe(ne){return ue("E",void 0,ne)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?Be(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class je extends X{constructor(pe,Se,ye){let He;if(super(),(0,l.m)(pe))He=pe;else if(pe){let xe;({next:He,error:Se,complete:ye}=pe),this&&F.v.useDeprecatedNextContext?(xe=Object.create(pe),xe.unsubscribe=()=>this.unsubscribe()):xe=pe,He=null==He?void 0:He.bind(xe),Se=null==Se?void 0:Se.bind(xe),ye=null==ye?void 0:ye.bind(xe)}this.destination={next:He?Ae(He):ie.Z,error:Ae(null!=Se?Se:Oe),complete:ye?Ae(ye):ie.Z}}}function Ae(ne,pe){return(...Se)=>{try{ne(...Se)}catch(ye){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(ye):(0,se.h)(ye)}}}function Oe(ne){throw ne}function Be(ne,pe){const{onStoppedNotification:Se}=F.v;Se&&Z.z.setTimeout(()=>Se(ne,pe))}const K={closed:!0,next:ie.Z,error:Oe,complete:ie.Z}},727:(at,De,k)=>{"use strict";k.d(De,{Lc:()=>he,w0:()=>ie,Nn:()=>oe});var l=k(576);const F=(0,k(3888).d)(ue=>function(H){ue(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((X,je)=>`${je+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var se=k(8737);class ie{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ae of H)Ae.remove(this);else H.remove(this);const{initialTeardown:X}=this;if((0,l.m)(X))try{X()}catch(Ae){Z=Ae instanceof F?Ae.errors:[Ae]}const{_teardowns:je}=this;if(je){this._teardowns=null;for(const Ae of je)try{ae(Ae)}catch(Oe){Z=null!=Z?Z:[],Oe instanceof F?Z=[...Z,...Oe.errors]:Z.push(Oe)}}if(Z)throw new F(Z)}}add(Z){var H;if(Z&&Z!==this)if(this.closed)ae(Z);else{if(Z instanceof ie){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push(Z)}}_hasParent(Z){const{_parentage:H}=this;return H===Z||Array.isArray(H)&&H.includes(Z)}_addParent(Z){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(Z),H):H?[H,Z]:Z}_removeParent(Z){const{_parentage:H}=this;H===Z?this._parentage=null:Array.isArray(H)&&(0,se.P)(H,Z)}remove(Z){const{_teardowns:H}=this;H&&(0,se.P)(H,Z),Z instanceof ie&&Z._removeParent(this)}}ie.EMPTY=(()=>{const ue=new ie;return ue.closed=!0,ue})();const he=ie.EMPTY;function oe(ue){return ue instanceof ie||ue&&"closed"in ue&&(0,l.m)(ue.remove)&&(0,l.m)(ue.add)&&(0,l.m)(ue.unsubscribe)}function ae(ue){(0,l.m)(ue)?ue():ue.unsubscribe()}},2416:(at,De,k)=>{"use strict";k.d(De,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,k)=>{"use strict";k.d(De,{E:()=>Q});const Q=new(k(8306).y)(ie=>ie.complete())},8996:(at,De,k)=>{"use strict";k.d(De,{D:()=>He});var l=k(8421),Q=k(5363),F=k(9468),he=k(8306),ae=k(2202),ue=k(576),Z=k(9672);function X(xe,tt){if(!xe)throw new Error("Iterable cannot be null");return new he.y(Ye=>{(0,Z.f)(Ye,tt,()=>{const ft=xe[Symbol.asyncIterator]();(0,Z.f)(Ye,tt,()=>{ft.next().then(J=>{J.done?Ye.complete():Ye.next(J.value)})},0,!0)})})}var je=k(3670),Ae=k(8239),Oe=k(1144),Be=k(6495),K=k(2206),ne=k(4532),pe=k(3260);function He(xe,tt){return tt?function ye(xe,tt){if(null!=xe){if((0,je.c)(xe))return function se(xe,tt){return(0,l.Xf)(xe).pipe((0,F.R)(tt),(0,Q.Q)(tt))}(xe,tt);if((0,Oe.z)(xe))return function oe(xe,tt){return new he.y(Ye=>{let ft=0;return tt.schedule(function(){ft===xe.length?Ye.complete():(Ye.next(xe[ft++]),Ye.closed||this.schedule())})})}(xe,tt);if((0,Ae.t)(xe))return function ie(xe,tt){return(0,l.Xf)(xe).pipe((0,F.R)(tt),(0,Q.Q)(tt))}(xe,tt);if((0,K.D)(xe))return X(xe,tt);if((0,Be.T)(xe))return function H(xe,tt){return new he.y(Ye=>{let ft;return(0,Z.f)(Ye,tt,()=>{ft=xe[ae.h](),(0,Z.f)(Ye,tt,()=>{let J,fe;try{({value:J,done:fe}=ft.next())}catch(we){return void Ye.error(we)}fe?Ye.complete():Ye.next(J)},0,!0)}),()=>(0,ue.m)(null==ft?void 0:ft.return)&&ft.return()})}(xe,tt);if((0,pe.L)(xe))return function Se(xe,tt){return X((0,pe.Q)(xe),tt)}(xe,tt)}throw(0,ne.z)(xe)}(xe,tt):(0,l.Xf)(xe)}},8421:(at,De,k)=>{"use strict";k.d(De,{Xf:()=>je});var l=k(5987),Q=k(1144),F=k(8239),se=k(8306),ie=k(3670),he=k(2206),oe=k(4532),ae=k(6495),ue=k(3260),Z=k(576),H=k(7849),X=k(8822);function je(ye){if(ye instanceof se.y)return ye;if(null!=ye){if((0,ie.c)(ye))return function Ae(ye){return new se.y(He=>{const xe=ye[X.L]();if((0,Z.m)(xe.subscribe))return xe.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ye);if((0,Q.z)(ye))return function Oe(ye){return new se.y(He=>{for(let xe=0;xe<ye.length&&!He.closed;xe++)He.next(ye[xe]);He.complete()})}(ye);if((0,F.t)(ye))return function Be(ye){return new se.y(He=>{ye.then(xe=>{He.closed||(He.next(xe),He.complete())},xe=>He.error(xe)).then(null,H.h)})}(ye);if((0,he.D)(ye))return ne(ye);if((0,ae.T)(ye))return function K(ye){return new se.y(He=>{for(const xe of ye)if(He.next(xe),He.closed)return;He.complete()})}(ye);if((0,ue.L)(ye))return function pe(ye){return ne((0,ue.Q)(ye))}(ye)}throw(0,oe.z)(ye)}function ne(ye){return new se.y(He=>{(function Se(ye,He){var xe,tt,Ye,ft;return(0,l.mG)(this,void 0,void 0,function*(){try{for(xe=(0,l.KL)(ye);!(tt=yield xe.next()).done;)if(He.next(tt.value),He.closed)return}catch(J){Ye={error:J}}finally{try{tt&&!tt.done&&(ft=xe.return)&&(yield ft.call(xe))}finally{if(Ye)throw Ye.error}}He.complete()})})(ye,He).catch(xe=>He.error(xe))})}},6451:(at,De,k)=>{"use strict";k.d(De,{T:()=>he});var l=k(8189),Q=k(8421),F=k(515),se=k(7669),ie=k(8996);function he(...oe){const ae=(0,se.yG)(oe),ue=(0,se._6)(oe,1/0),Z=oe;return Z.length?1===Z.length?(0,Q.Xf)(Z[0]):(0,l.J)(ue)((0,ie.D)(Z,ae)):F.E}},5403:(at,De,k)=>{"use strict";k.d(De,{Q:()=>Q});var l=k(930);class Q extends l.Lv{constructor(se,ie,he,oe,ae){super(se),this.onFinalize=ae,this._next=ie?function(ue){try{ie(ue)}catch(Z){se.error(Z)}}:super._next,this._error=oe?function(ue){try{oe(ue)}catch(Z){se.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(ue){se.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(at,De,k)=>{"use strict";k.d(De,{U:()=>F});var l=k(4482),Q=k(5403);function F(se,ie){return(0,l.e)((he,oe)=>{let ae=0;he.subscribe(new Q.Q(oe,ue=>{oe.next(se.call(ie,ue,ae++))}))})}},8189:(at,De,k)=>{"use strict";k.d(De,{J:()=>F});var l=k(5577),Q=k(4671);function F(se=1/0){return(0,l.z)(Q.y,se)}},5577:(at,De,k)=>{"use strict";k.d(De,{z:()=>ae});var l=k(4004),Q=k(8421),F=k(4482),se=k(9672),ie=k(5403),oe=k(576);function ae(ue,Z,H=1/0){return(0,oe.m)(Z)?ae((X,je)=>(0,l.U)((Ae,Oe)=>Z(X,Ae,je,Oe))((0,Q.Xf)(ue(X,je))),H):("number"==typeof Z&&(H=Z),(0,F.e)((X,je)=>function he(ue,Z,H,X,je,Ae,Oe,Be){const K=[];let ne=0,pe=0,Se=!1;const ye=()=>{Se&&!K.length&&!ne&&Z.complete()},He=tt=>ne<X?xe(tt):K.push(tt),xe=tt=>{Ae&&Z.next(tt),ne++;let Ye=!1;(0,Q.Xf)(H(tt,pe++)).subscribe(new ie.Q(Z,ft=>{null==je||je(ft),Ae?He(ft):Z.next(ft)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(ne--;K.length&&ne<X;){const ft=K.shift();Oe?(0,se.f)(Z,Oe,()=>xe(ft)):xe(ft)}ye()}catch(ft){Z.error(ft)}}))};return ue.subscribe(new ie.Q(Z,He,()=>{Se=!0,ye()})),()=>{null==Be||Be()}}(X,je,ue,H)))}},5363:(at,De,k)=>{"use strict";k.d(De,{Q:()=>se});var l=k(9672),Q=k(4482),F=k(5403);function se(ie,he=0){return(0,Q.e)((oe,ae)=>{oe.subscribe(new F.Q(ae,ue=>(0,l.f)(ae,ie,()=>ae.next(ue),he),()=>(0,l.f)(ae,ie,()=>ae.complete(),he),ue=>(0,l.f)(ae,ie,()=>ae.error(ue),he)))})}},3099:(at,De,k)=>{"use strict";k.d(De,{B:()=>he});var l=k(8996),Q=k(5698),F=k(7579),se=k(930),ie=k(4482);function he(ae={}){const{connector:ue=(()=>new F.x),resetOnError:Z=!0,resetOnComplete:H=!0,resetOnRefCountZero:X=!0}=ae;return je=>{let Ae=null,Oe=null,Be=null,K=0,ne=!1,pe=!1;const Se=()=>{null==Oe||Oe.unsubscribe(),Oe=null},ye=()=>{Se(),Ae=Be=null,ne=pe=!1},He=()=>{const xe=Ae;ye(),null==xe||xe.unsubscribe()};return(0,ie.e)((xe,tt)=>{K++,!pe&&!ne&&Se();const Ye=Be=null!=Be?Be:ue();tt.add(()=>{K--,0===K&&!pe&&!ne&&(Oe=oe(He,X))}),Ye.subscribe(tt),Ae||(Ae=new se.Hp({next:ft=>Ye.next(ft),error:ft=>{pe=!0,Se(),Oe=oe(ye,Z,ft),Ye.error(ft)},complete:()=>{ne=!0,Se(),Oe=oe(ye,H),Ye.complete()}}),(0,l.D)(xe).subscribe(Ae))})(je)}}function oe(ae,ue,...Z){return!0===ue?(ae(),null):!1===ue?null:ue(...Z).pipe((0,Q.q)(1)).subscribe(()=>ae())}},9468:(at,De,k)=>{"use strict";k.d(De,{R:()=>Q});var l=k(4482);function Q(F,se=0){return(0,l.e)((ie,he)=>{he.add(F.schedule(()=>ie.subscribe(he),se))})}},5698:(at,De,k)=>{"use strict";k.d(De,{q:()=>se});var l=k(515),Q=k(4482),F=k(5403);function se(ie){return ie<=0?()=>l.E:(0,Q.e)((he,oe)=>{let ae=0;he.subscribe(new F.Q(oe,ue=>{++ae<=ie&&(oe.next(ue),ie<=ae&&oe.complete())}))})}},8505:(at,De,k)=>{"use strict";k.d(De,{b:()=>ie});var l=k(576),Q=k(4482),F=k(5403),se=k(4671);function ie(he,oe,ae){const ue=(0,l.m)(he)||oe||ae?{next:he,error:oe,complete:ae}:he;return ue?(0,Q.e)((Z,H)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let je=!0;Z.subscribe(new F.Q(H,Ae=>{var Oe;null===(Oe=ue.next)||void 0===Oe||Oe.call(ue,Ae),H.next(Ae)},()=>{var Ae;je=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),H.complete()},Ae=>{var Oe;je=!1,null===(Oe=ue.error)||void 0===Oe||Oe.call(ue,Ae),H.error(Ae)},()=>{var Ae,Oe;je&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Oe=ue.finalize)||void 0===Oe||Oe.call(ue)}))}):se.y}},4408:(at,De,k)=>{"use strict";k.d(De,{o:()=>ie});var l=k(727);class Q extends l.w0{constructor(oe,ae){super()}schedule(oe,ae=0){return this}}const F={setInterval(...he){const{delegate:oe}=F;return((null==oe?void 0:oe.setInterval)||setInterval)(...he)},clearInterval(he){const{delegate:oe}=F;return((null==oe?void 0:oe.clearInterval)||clearInterval)(he)},delegate:void 0};var se=k(8737);class ie extends Q{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae,this.pending=!1}schedule(oe,ae=0){if(this.closed)return this;this.state=oe;const ue=this.id,Z=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(Z,ue,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(Z,this.id,ae),this}requestAsyncId(oe,ae,ue=0){return F.setInterval(oe.flush.bind(oe,this),ue)}recycleAsyncId(oe,ae,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ae;F.clearInterval(ae)}execute(oe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(oe,ae);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ae){let Z,ue=!1;try{this.work(oe)}catch(H){ue=!0,Z=H||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ae}=this,{actions:ue}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ue,this),null!=oe&&(this.id=this.recycleAsyncId(ae,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,k)=>{"use strict";k.d(De,{v:()=>F});var l=k(6063);class Q{constructor(ie,he=Q.now){this.schedulerActionCtor=ie,this.now=he}schedule(ie,he=0,oe){return new this.schedulerActionCtor(this,ie).schedule(oe,he)}}Q.now=l.l.now;class F extends Q{constructor(ie,he=Q.now){super(ie,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:he}=this;if(this._active)return void he.push(ie);let oe;this._active=!0;do{if(oe=ie.execute(ie.state,ie.delay))break}while(ie=he.shift());if(this._active=!1,oe){for(;ie=he.shift();)ie.unsubscribe();throw oe}}}},4986:(at,De,k)=>{"use strict";k.d(De,{z:()=>F});var l=k(4408);const F=new(k(7565).v)(l.o)},6063:(at,De,k)=>{"use strict";k.d(De,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(at,De,k)=>{"use strict";k.d(De,{z:()=>l});const l={setTimeout(...Q){const{delegate:F}=l;return((null==F?void 0:F.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:F}=l;return((null==F?void 0:F.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(at,De,k)=>{"use strict";k.d(De,{h:()=>Q});const Q=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,k)=>{"use strict";k.d(De,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,De,k)=>{"use strict";k.d(De,{_6:()=>he,jO:()=>se,yG:()=>ie});var l=k(576);function F(oe){return oe[oe.length-1]}function se(oe){return(0,l.m)(F(oe))?oe.pop():void 0}function ie(oe){return function Q(oe){return oe&&(0,l.m)(oe.schedule)}(F(oe))?oe.pop():void 0}function he(oe,ae){return"number"==typeof F(oe)?oe.pop():ae}},8737:(at,De,k)=>{"use strict";function l(Q,F){if(Q){const se=Q.indexOf(F);0<=se&&Q.splice(se,1)}}k.d(De,{P:()=>l})},3888:(at,De,k)=>{"use strict";function l(Q){const se=Q(ie=>{Error.call(ie),ie.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(De,{d:()=>l})},2806:(at,De,k)=>{"use strict";k.d(De,{x:()=>F,O:()=>se});var l=k(2416);let Q=null;function F(ie){if(l.v.useDeprecatedSynchronousErrorHandling){const he=!Q;if(he&&(Q={errorThrown:!1,error:null}),ie(),he){const{errorThrown:oe,error:ae}=Q;if(Q=null,oe)throw ae}}else ie()}function se(ie){l.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ie)}},9672:(at,De,k)=>{"use strict";function l(Q,F,se,ie=0,he=!1){const oe=F.schedule(function(){se(),he?Q.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(Q.add(oe),!he)return oe}k.d(De,{f:()=>l})},4671:(at,De,k)=>{"use strict";function l(Q){return Q}k.d(De,{y:()=>l})},1144:(at,De,k)=>{"use strict";k.d(De,{z:()=>l});const l=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(at,De,k)=>{"use strict";k.d(De,{D:()=>Q});var l=k(576);function Q(F){return Symbol.asyncIterator&&(0,l.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(at,De,k)=>{"use strict";function l(Q){return"function"==typeof Q}k.d(De,{m:()=>l})},3670:(at,De,k)=>{"use strict";k.d(De,{c:()=>F});var l=k(8822),Q=k(576);function F(se){return(0,Q.m)(se[l.L])}},6495:(at,De,k)=>{"use strict";k.d(De,{T:()=>F});var l=k(2202),Q=k(576);function F(se){return(0,Q.m)(null==se?void 0:se[l.h])}},8239:(at,De,k)=>{"use strict";k.d(De,{t:()=>Q});var l=k(576);function Q(F){return(0,l.m)(null==F?void 0:F.then)}},3260:(at,De,k)=>{"use strict";k.d(De,{Q:()=>F,L:()=>se});var l=k(5987),Q=k(576);function F(ie){return(0,l.FC)(this,arguments,function*(){const oe=ie.getReader();try{for(;;){const{value:ae,done:ue}=yield(0,l.qq)(oe.read());if(ue)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ae)}}finally{oe.releaseLock()}})}function se(ie){return(0,Q.m)(null==ie?void 0:ie.getReader)}},4482:(at,De,k)=>{"use strict";k.d(De,{A:()=>Q,e:()=>F});var l=k(576);function Q(se){return(0,l.m)(null==se?void 0:se.lift)}function F(se){return ie=>{if(Q(ie))return ie.lift(function(he){try{return se(he,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,De,k)=>{"use strict";function l(){}k.d(De,{Z:()=>l})},7849:(at,De,k)=>{"use strict";k.d(De,{h:()=>F});var l=k(2416),Q=k(3410);function F(se){Q.z.setTimeout(()=>{const{onUnhandledError:ie}=l.v;if(!ie)throw se;ie(se)})}},4532:(at,De,k)=>{"use strict";function l(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(De,{z:()=>l})},5987:(at,De,k)=>{"use strict";function ae(J,fe,we,Ce){return new(we||(we=Promise))(function(de,At){function Zt(pt){try{it(Ce.next(pt))}catch(rr){At(rr)}}function Er(pt){try{it(Ce.throw(pt))}catch(rr){At(rr)}}function it(pt){pt.done?de(pt.value):function Fe(de){return de instanceof we?de:new we(function(At){At(de)})}(pt.value).then(Zt,Er)}it((Ce=Ce.apply(J,fe||[])).next())})}function K(J){return this instanceof K?(this.v=J,this):new K(J)}function ne(J,fe,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ce=we.apply(J,fe||[]),de=[];return Fe={},At("next"),At("throw"),At("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function At(zt){Ce[zt]&&(Fe[zt]=function(pr){return new Promise(function(rn,Wr){de.push([zt,pr,rn,Wr])>1||Zt(zt,pr)})})}function Zt(zt,pr){try{!function Er(zt){zt.value instanceof K?Promise.resolve(zt.value.v).then(it,pt):rr(de[0][2],zt)}(Ce[zt](pr))}catch(rn){rr(de[0][3],rn)}}function it(zt){Zt("next",zt)}function pt(zt){Zt("throw",zt)}function rr(zt,pr){zt(pr),de.shift(),de.length&&Zt(de[0][0],de[0][1])}}function Se(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,fe=J[Symbol.asyncIterator];return fe?fe.call(J):(J=function X(J){var fe="function"==typeof Symbol&&Symbol.iterator,we=fe&&J[fe],Ce=0;if(we)return we.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ce>=J.length&&(J=void 0),{value:J&&J[Ce++],done:!J}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),we={},Ce("next"),Ce("throw"),Ce("return"),we[Symbol.asyncIterator]=function(){return this},we);function Ce(de){we[de]=J[de]&&function(At){return new Promise(function(Zt,Er){!function Fe(de,At,Zt,Er){Promise.resolve(Er).then(function(it){de({value:it,done:Zt})},At)}(Zt,Er,(At=J[de](At)).done,At.value)})}}}k.d(De,{mG:()=>ae,qq:()=>K,FC:()=>ne,KL:()=>Se})},5e3:(at,De,k)=>{"use strict";k.d(De,{deG:()=>ws,tb:()=>w0,AFp:()=>Mh,ip1:()=>Gm,CZH:()=>Mc,hGG:()=>aC,z2F:()=>Nn,sBO:()=>G1,Sil:()=>E0,_Vd:()=>hp,EJc:()=>kT,SBq:()=>hr,qLn:()=>bo,vpe:()=>Ns,tBr:()=>Vn,XFs:()=>st,OlP:()=>an,zs3:()=>bs,ZZ4:()=>Xm,aQg:()=>Rp,soG:()=>Wm,YKP:()=>yA,h0i:()=>gp,PXZ:()=>HT,R0b:()=>Ps,FiY:()=>wn,Lbi:()=>v0,g9A:()=>PT,Qsj:()=>hA,FYo:()=>QI,JOm:()=>Is,tp0:()=>kr,Rgc:()=>Ep,dDg:()=>VT,q4F:()=>XI,GfV:()=>JI,s_b:()=>Ip,ifc:()=>Ft,eFA:()=>uS,G48:()=>$T,X6Q:()=>dS,_c5:()=>Hi,VLi:()=>ZT,c2e:()=>OT,zSh:()=>Z_,wAp:()=>vt,vHH:()=>Oe,cg1:()=>Ih,kL8:()=>Em,dqk:()=>lt,sIi:()=>ll,CqO:()=>ZE,QGY:()=>cv,F4k:()=>jE,RDi:()=>Qc,AaK:()=>ae,TTD:()=>ka,xp6:()=>E_,uIk:()=>J_,Suo:()=>dT,Xpm:()=>qe,lG2:()=>Du,Yz7:()=>rn,cJS:()=>wi,oAB:()=>ir,Yjl:()=>fo,Y36:()=>Ic,_UZ:()=>am,qZA:()=>mh,TgZ:()=>om,LFG:()=>z,$8M:()=>nu,$Z:()=>BE,NdJ:()=>dv,CRH:()=>hT,kcU:()=>rd,O4$:()=>Fu,Q6J:()=>av,s9C:()=>fv,iGM:()=>h0,LSH:()=>Lr,YNc:()=>fh,_uU:()=>mm,Oqu:()=>vh,hij:()=>Ta});var l=k(7579),Q=k(727),F=k(8306),se=k(6451),ie=k(3099);function he(s){for(let o in s)if(s[o]===he)return o;throw Error("Could not find renamed property on target object.")}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Z=he({__forward_ref__:he});function H(s){return s.__forward_ref__=H,s.toString=function(){return ae(this())},s}function X(s){return function je(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===H}(s)?s():s}class Oe extends Error{constructor(o,a){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function K(s){return"string"==typeof s?s:null==s?"":String(s)}function ne(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():K(s)}function He(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${ne(s)} found${a}`)}function it(s,o){null==s&&function pt(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function wi(s){return{providers:s.providers||[],imports:s.imports||[]}}function Sn(s){return Ei(s,zr)||Ei(s,Me)}function Ei(s,o){return s.hasOwnProperty(o)?s[o]:null}function co(s){return s&&(s.hasOwnProperty(fs)||s.hasOwnProperty(gr))?s[fs]:null}const zr=he({\u0275prov:he}),fs=he({\u0275inj:he}),Me=he({ngInjectableDef:he}),gr=he({ngInjectorDef:he});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Ii;function Hn(s){const o=Ii;return Ii=s,o}function Us(s,o,a){const c=Sn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&st.Optional?null:void 0!==o?o:void He(ae(s),"Injector")}function Tr(s){return{toString:s}.toString()}var gn=(()=>((gn=gn||{})[gn.OnPush=0]="OnPush",gn[gn.Default=1]="Default",gn))(),Ft=(()=>{return(s=Ft||(Ft={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ft;var s})();const ut="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,ho="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,lt=ut||"undefined"!=typeof global&&global||mt||ho,Ti={},B=[],q=he({\u0275cmp:he}),G=he({\u0275dir:he}),Ee=he({\u0275pipe:he}),ee=he({\u0275mod:he}),$e=he({\u0275fac:he}),Te=he({__NG_ELEMENT_ID__:he});let _e=0;function qe(s){return Tr(()=>{const a={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ft.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return c.id+=_e++,c.inputs=zo(s.inputs,a),c.outputs=zo(s.outputs),m&&m.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Tt):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(ht):null,c})}function Tt(s){return sr(s)||function qn(s){return s[G]||null}(s)}function ht(s){return function Ki(s){return s[Ee]||null}(s)}const sn={};function ir(s){return Tr(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(sn[s.id]=s.type),o})}function zo(s,o){if(null==s)return Ti;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),a[h]=c,o&&(o[h]=m)}return a}const Du=qe;function fo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function sr(s){return s[q]||null}function or(s,o){const a=s[ee]||null;if(!a&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return a}function Di(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ai(s){return Array.isArray(s)&&!0===s[1]}function Bc(s){return 0!=(8&s.flags)}function On(s){return 2==(2&s.flags)}function gs(s){return 1==(1&s.flags)}function Ji(s){return null!==s.template}function jc(s){return 0!=(512&s[2])}function _o(s,o){return s.hasOwnProperty($e)?s[$e]:null}class Au{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ka(){return vo}function vo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bs),Fa}function Fa(){const s=Kc(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Ti)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Bs(s,o,a,c){const h=Kc(s)||function br(s,o){return s[La]=o}(s,{previous:Ti,current:null}),m=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[a],T=v[E];m[E]=new Au(T&&T.currentValue,o,v===Ti),s[c]=o}ka.ngInherit=!0;const La="__ngSimpleChanges__";function Kc(s){return s[La]||null}const Ua="http://www.w3.org/2000/svg";let Su;function Qc(s){Su=s}function Kt(s){return!!s.listen}const js={createRenderer:(s,o)=>function kl(){return void 0!==Su?Su:"undefined"!=typeof document?document:void 0}()};function on(s){for(;Array.isArray(s);)s=s[0];return s}function kn(s,o){return on(o[s.index])}function Xo(s,o){return s.data[o]}function Mr(s,o){const a=o[s];return Di(a)?a:a[0]}function zn(s){return 4==(4&s[2])}function es(s){return 128==(128&s[2])}function Nr(s,o){return null==o?null:s[o]}function Zs(s){s[18]=0}function ea(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const gt={lFrame:Ga(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function na(){return gt.bindingsEnabled}function Re(){return gt.lFrame.lView}function Nt(){return gt.lFrame.tView}function dn(){let s=wo();for(;null!==s&&64===s.type;)s=s.parent;return s}function wo(){return gt.lFrame.currentTNode}function Jr(s,o){const a=gt.lFrame;a.currentTNode=s,a.isParent=o}function ys(){return gt.lFrame.isParent}function ra(){return gt.isInCheckNoChangesMode}function ja(s){gt.isInCheckNoChangesMode=s}function _s(){return gt.lFrame.bindingIndex++}function Ou(s,o){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=s,sa(o)}function sa(s){gt.lFrame.currentDirectiveIndex=s}function qa(){return gt.lFrame.currentQueryIndex}function $a(s){gt.lFrame.currentQueryIndex=s}function Vl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Bl(s,o,a){if(a&st.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||a&st.Host||(h=Vl(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=gt.lFrame=td();return c.currentTNode=o,c.lView=s,!0}function oa(s){const o=td(),a=s[1];gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function td(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?Ga(s):o}function Ga(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function jl(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Wa=jl;function ku(){const s=jl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ur(){return gt.lFrame.selectedIndex}function Fn(s){gt.lFrame.selectedIndex=s}function Cn(){const s=gt.lFrame;return Xo(s.tView,s.selectedIndex)}function Fu(){gt.lFrame.currentNamespace=Ua}function rd(){!function Qh(){gt.lFrame.currentNamespace=null}()}function Zl(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const m=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:M}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),T&&(s.viewHooks||(s.viewHooks=[])).push(-a,T),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(a,M)}}function qs(s,o,a){Xh(s,o,3,a)}function Lu(s,o,a,c){(3&s[2])===a&&Xh(s,o,a,c)}function Uu(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Xh(s,o,a,c){const m=null!=c?c:-1,v=o.length-1;let E=0;for(let T=void 0!==c?65535&s[18]:0;T<v;T++)if("number"==typeof o[T+1]){if(E=o[T],null!=c&&E>=c)break}else o[T]<0&&(s[18]+=65536),(E<m||-1==m)&&(sd(s,a,o,T),s[18]=(4294901760&s[18])+T+2),T++}function sd(s,o,a,c){const h=a[c]<0,m=a[c+1],E=s[h?-a[c]:a[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class bn{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Hl(s,o,a){const c=Kt(s);let h=0;for(;h<a.length;){const m=a[h];if("number"==typeof m){if(0!==m)break;h++;const v=a[h++],E=a[h++],T=a[h++];c?s.setAttribute(o,E,T,v):o.setAttributeNS(v,E,T)}else{const v=m,E=a[++h];_n(v)?c&&s.setProperty(o,v,E):c?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function ud(s){return 3===s||4===s||6===s}function _n(s){return 64===s.charCodeAt(0)}function Dn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||_t(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function _t(s,o,a,c,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,a),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function $s(s){return-1!==s}function Dr(s){return 32767&s}function Qa(s,o){let a=function Xr(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let ld=!0;function Ja(s){const o=ld;return ld=s,o}let Gs=0;function eu(s,o){const a=tu(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ql(c.data,s),ql(o,null),ql(c.blueprint,null));const h=Ws(s,o),m=s.injectorIndex;if($s(h)){const v=Dr(h),E=Qa(h,o),T=E[1].data;for(let S=0;S<8;S++)o[m+S]=E[v+S]|T[v+S]}return o[m+8]=h,m}function ql(s,o){s.push(0,0,0,0,0,0,0,0,o)}function tu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ws(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(c=2===v?m.declTNode:1===v?h[6]:null,null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ln(s,o,a){!function wt(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Te)&&(c=a[Te]),null==c&&(c=a[Te]=Gs++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function $l(s,o,a){if(a&st.Optional)return s;He(o,"NodeInjector")}function ns(s,o,a,c){if(a&st.Optional&&void 0===c&&(c=null),0==(a&(st.Self|st.Host))){const h=s[9],m=Hn(void 0);try{return h?h.get(o,c,a&st.Optional):Us(o,c,a&st.Optional)}finally{Hn(m)}}return $l(c,o,a)}function Bu(s,o,a,c=st.Default,h){if(null!==s){const m=function la(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Te)?s[Te]:void 0;return"number"==typeof o?o>=0?255&o:ua:o}(a);if("function"==typeof m){if(!Bl(o,s,c))return c&st.Host?$l(h,a,c):ns(o,a,c,h);try{const v=m(c);if(null!=v||c&st.Optional)return v;He(a)}finally{Wa()}}else if("number"==typeof m){let v=null,E=tu(s,o),T=-1,S=c&st.Host?o[16][6]:null;for((-1===E||c&st.SkipSelf)&&(T=-1===E?Ws(s,o):o[E+8],-1!==T&&Ni(c,!1)?(v=o[1],E=Dr(T),o=Qa(T,o)):E=-1);-1!==E;){const M=o[1];if(dd(m,E,M.data)){const L=zs(E,o,a,v,c,S);if(L!==Gl)return L}T=o[E+8],-1!==T&&Ni(c,o[1].data[E+8]===S)&&dd(m,E,o)?(v=M,E=Dr(T),o=Qa(T,o)):E=-1}}}return ns(o,a,c,h)}const Gl={};function ua(){return new Eo(dn(),Re())}function zs(s,o,a,c,h,m){const v=o[1],E=v.data[s+8],M=ju(E,v,a,null==c?On(E)&&ld:c!=v&&0!=(3&E.type),h&st.Host&&m===E);return null!==M?Yn(o,v,M,E):Gl}function ju(s,o,a,c,h){const m=s.providerIndexes,v=o.data,E=1048575&m,T=s.directiveStart,M=m>>20,$=h?E+M:s.directiveEnd;for(let Y=c?E:E+M;Y<$;Y++){const me=v[Y];if(Y<T&&a===me||Y>=T&&me.type===a)return Y}if(h){const Y=v[T];if(Y&&Ji(Y)&&Y.type===a)return T}return null}function Yn(s,o,a,c){let h=s[a];const m=o.data;if(function ef(s){return s instanceof bn}(h)){const v=h;v.resolving&&function pe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(ne(m[a]));const E=Ja(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?Hn(v.injectImpl):null;Bl(s,c,st.Default);try{h=s[a]=v.factory(void 0,m,s,c),o.firstCreatePass&&a>=c.directiveStart&&function Jh(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const v=vo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),m&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,m))}(a,m[a],o)}finally{null!==T&&Hn(T),Ja(E),v.resolving=!1,Wa()}}return h}function dd(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ni(s,o){return!(s&st.Self||s&st.Host&&o)}class Eo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Bu(this._tNode,this._lView,o,c,a)}}function nu(s){return function aa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const m=a[h];if(ud(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(m===o)return a[h+1];h+=2}}}return null}(dn(),s)}const rs="__parameters__";function Ar(s,o,a){return Tr(()=>{const c=function oi(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const v=new h(...m);return E.annotation=v,E;function E(T,S,M){const L=T.hasOwnProperty(rs)?T[rs]:Object.defineProperty(T,rs,{value:[]})[rs];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),T}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class an{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ws=new an("AnalyzeForEntryComponents");function ui(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),ui(c,o)):o!==s&&o.push(c)}return o}function Oi(s,o){s.forEach(a=>Array.isArray(a)?Oi(a,o):o(a))}function gd(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ru(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Yt={},Fi="__NG_DI_FLAG__",su="ngTempTokenPath",Wu=/\n/gm,zl="__source",C=he({provide:String,useValue:he});let b;function N(s){const o=b;return b=s,o}function V(s,o=st.Default){if(void 0===b)throw new Oe(203,"");return null===b?Us(s,void 0,o):b.get(s,o&st.Optional?null:void 0,o)}function z(s,o=st.Default){return(function Bt(){return Ii}()||V)(X(s),o)}function Ge(s){const o=[];for(let a=0;a<s.length;a++){const c=X(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let h,m=st.Default;for(let v=0;v<c.length;v++){const E=c[v],T=Pt(E);"number"==typeof T?-1===T?h=E.token:m|=T:h=E}o.push(z(h,m))}else o.push(z(c))}return o}function Ke(s,o){return s[Fi]=o,s.prototype[Fi]=o,s}function Pt(s){return s[Fi]}const Vn=Ke(Ar("Inject",s=>({token:s})),-1),wn=Ke(Ar("Optional"),8),kr=Ke(Ar("SkipSelf"),4);class bd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const zy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Eg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var mn=(()=>((mn=mn||{})[mn.NONE=0]="NONE",mn[mn.HTML=1]="HTML",mn[mn.STYLE=2]="STYLE",mn[mn.SCRIPT=3]="SCRIPT",mn[mn.URL=4]="URL",mn[mn.RESOURCE_URL=5]="RESOURCE_URL",mn))();function Lr(s){const o=function ma(){const s=Re();return s&&s[12]}();return o?o.sanitize(mn.URL,s)||"":function lu(s,o){const a=function qy(s){return s instanceof bd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?function ss(s){return s instanceof bd?s.changingThisBreaksApplicationSecurity:s}(s):function To(s){return(s=String(s)).match(zy)||s.match(Eg)?s:"unsafe:"+s}(K(s))}const Cf="__ngContext__";function Jn(s,o){s[Cf]=o}function bf(s){const o=function ya(s){return s[Cf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function hu(s){return s.ngOriginalError}function Vd(s,...o){s.error(...o)}class bo{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),c=function i_(s){return s&&s.ngErrorLogger||Vd}(o);c(this._console,"ERROR",o),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&hu(o);for(;a&&hu(a);)a=hu(a);return a||null}}const Bd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(lt))();function Es(s){return s instanceof Function?s():s}var Is=(()=>((Is=Is||{})[Is.Important=1]="Important",Is[Is.DashCase=2]="DashCase",Is))();function jd(s,o){return undefined(s,o)}function ic(s){const o=s[3];return Ai(o)?o[3]:o}function oc(s){return Zd(s[13])}function ac(s){return Zd(s[4])}function Zd(s){for(;null!==s&&!Ai(s);)s=s[4];return s}function to(s,o,a,c,h){if(null!=c){let m,v=!1;Ai(c)?m=c:Di(c)&&(v=!0,c=c[0]);const E=on(c);0===s&&null!==a?null==h?nt(o,a,E):Qe(o,a,E,h||null,!0):1===s&&null!==a?Qe(o,a,E,h||null,!0):2===s?function Gd(s,o,a){const c=Ts(s,o);c&&function lr(s,o,a,c){Kt(s)?s.removeChild(o,a,c):o.removeChild(a)}(s,c,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function Tb(s,o,a,c,h){const m=a[7];m!==on(a)&&to(o,s,c,m,h);for(let E=10;E<a.length;E++){const T=a[E];Wd(T[1],T,s,o,c,m)}}(o,s,m,a,h)}}function Xu(s,o,a){return Kt(s)?s.createElement(o,a):null===a?s.createElement(o):s.createElementNS(a,o)}function g(s,o){const a=s[9],c=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,ea(h,-1)),a.splice(c,1)}function w(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const h=c[17];null!==h&&h!==s&&g(h,c),o>0&&(s[a-1][4]=c[4]);const m=ru(s,10+o);!function f_(s,o){Wd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=m[19];null!==v&&v.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function D(s,o){if(!(256&o[2])){const a=o[11];Kt(a)&&a.destroyNode&&Wd(s,o,a,3,null,null),function g_(s){let o=s[13];if(!o)return R(s[1],s);for(;o;){let a=null;if(Di(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)Di(o)&&R(o[1],o),o=o[3];null===o&&(o=s),Di(o)&&R(o[1],o),a=o&&o[4]}o=a}}(o)}}function R(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function te(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof bn)){const m=a[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=h[m[v]],T=m[v+1];try{T.call(E)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function j(s,o){const a=s.cleanup,c=o[7];let h=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const v=a[m+1],E="function"==typeof v?v(o):on(o[v]),T=c[h=a[m+2]],S=a[m+3];"boolean"==typeof S?E.removeEventListener(a[m],T,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),m+=2}else{const v=c[h=a[m+1]];a[m].call(v)}if(null!==c){for(let m=h+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&Kt(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Ai(o[3])){a!==o[3]&&g(a,o);const c=o[19];null!==c&&c.detachView(s)}}}function ke(s,o,a){return function Ne(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Ft.None||h===Ft.Emulated)return null}return kn(c,a)}(s,o.parent,a)}function Qe(s,o,a,c,h){Kt(s)?s.insertBefore(o,a,c,h):o.insertBefore(a,c,h)}function nt(s,o,a){Kt(s)?s.appendChild(o,a):o.appendChild(a)}function bt(s,o,a,c,h){null!==c?Qe(s,o,a,c,h):nt(s,o,a)}function Ts(s,o){return Kt(s)?s.parentNode(o):o.parentNode}let kf=function Of(s,o,a){return 40&s.type?kn(s,a):null};function cc(s,o,a,c){const h=ke(s,c,o),m=o[11],E=function uc(s,o,a){return kf(s,o,a)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(a))for(let T=0;T<a.length;T++)bt(m,h,a[T],E,!1);else bt(m,h,a,E,!1)}function el(s,o){if(null!==o){const a=o.type;if(3&a)return kn(o,s);if(4&a)return dc(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return el(s,c);{const h=s[o.index];return Ai(h)?dc(-1,h):on(h)}}if(32&a)return jd(o,s)()||on(s[o.index]);{const c=Ff(s,o);return null!==c?Array.isArray(c)?c[0]:el(ic(s[16]),c):el(s,o.next)}}return null}function Ff(s,o){return null!==o?s[16][6].projection[o.projection]:null}function dc(s,o){const a=10+s+1;if(a<o.length){const c=o[a],h=c[1].firstChild;if(null!==h)return el(c,h)}return o[7]}function Lf(s,o,a,c,h,m,v){for(;null!=a;){const E=c[a.index],T=a.type;if(v&&0===o&&(E&&Jn(on(E),c),a.flags|=4),64!=(64&a.flags))if(8&T)Lf(s,o,a.child,c,h,m,!1),to(o,s,h,E,m);else if(32&T){const S=jd(a,c);let M;for(;M=S();)to(o,s,h,M,m);to(o,s,h,E,m)}else 16&T?Ib(s,o,c,a,h,m):to(o,s,h,E,m);a=v?a.projectionNext:a.next}}function Wd(s,o,a,c,h,m){Lf(a,c,s.firstChild,o,h,m,!1)}function Ib(s,o,a,c,h,m){const v=a[16],T=v[6].projection[c.projection];if(Array.isArray(T))for(let S=0;S<T.length;S++)to(o,s,h,T[S],m);else Lf(s,o,T,v[3],h,m,!0)}function jw(s,o,a){Kt(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function m_(s,o,a){Kt(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function y_(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}a=h+1}}const __="ng-template";function v_(s,o,a){let c=0;for(;c<s.length;){let h=s[c++];if(a&&"class"===h){if(h=s[c],-1!==y_(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function w_(s){return 4===s.type&&s.value!==__}function Zw(s,o,a){return o===(4!==s.type||a?s.value:__)}function bb(s,o,a){let c=4;const h=s.attrs||[],m=function Vi(s){for(let o=0;o<s.length;o++)if(ud(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const T=o[E];if("number"!=typeof T){if(!v)if(4&c){if(c=2|1&c,""!==T&&!Zw(s,T,a)||""===T&&1===o.length){if(Ao(c))return!1;v=!0}}else{const S=8&c?T:o[++E];if(8&c&&null!==s.attrs){if(!v_(s.attrs,S,a)){if(Ao(c))return!1;v=!0}continue}const L=Db(8&c?"class":T,h,w_(s),a);if(-1===L){if(Ao(c))return!1;v=!0;continue}if(""!==S){let $;$=L>m?"":h[L+1].toLowerCase();const Y=8&c?$:null;if(Y&&-1!==y_(Y,S,0)||2&c&&S!==$){if(Ao(c))return!1;v=!0}}}}else{if(!v&&!Ao(c)&&!Ao(T))return!1;if(v&&Ao(T))continue;v=!1,c=T|1&c}}return Ao(c)||v}function Ao(s){return 0==(1&s)}function Db(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function a1(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Hw(s,o,a=!1){for(let c=0;c<o.length;c++)if(bb(s,o[c],a))return!0;return!1}function _a(s,o){return s?":not("+o.trim()+")":o}function ve(s){let o=s[0],a=1,c=2,h="",m=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&c){const E=s[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Ao(v)&&(o+=_a(m,h),h=""),c=v,m=m||!Ao(c);a++}return""!==h&&(o+=_a(m,h)),o}const yt={};function E_(s){I_(Nt(),Re(),ur()+s,ra())}function I_(s,o,a,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&qs(o,m,a)}else{const m=s.preOrderHooks;null!==m&&Lu(o,m,0,a)}Fn(a)}function x_(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],m=a[c+1];if(-1!==m){const v=s.data[m];$a(h),v.contentQueries(2,o[m],m)}}}function Kd(s,o,a,c,h,m,v,E,T,S){const M=o.blueprint.slice();return M[0]=h,M[2]=140|c,Zs(M),M[3]=M[15]=s,M[8]=a,M[10]=v||s&&s[10],M[11]=E||s&&s[11],M[12]=T||s&&s[12]||null,M[9]=S||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function Yd(s,o,a,c,h){let m=s.data[o];if(null===m)m=function $f(s,o,a,c,h){const m=wo(),v=ys(),T=s.data[o]=function kb(s,o,a,c,h,m){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=T),null!==m&&(v?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(s,o,a,c,h),function ed(){return gt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=a,m.value=c,m.attrs=h;const v=function Hs(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Jr(m,!0),m}function il(s,o,a,c){if(0===a)return-1;const h=o.length;for(let m=0;m<a;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function fc(s,o,a){oa(o);try{const c=s.viewQuery;null!==c&&V_(1,c,a);const h=s.template;null!==h&&M_(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&x_(s,o),s.staticViewQueries&&V_(2,s.viewQuery,a);const m=s.components;null!==m&&function Pb(s,o){for(let a=0;a<o.length;a++)Lt(s,o[a])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ku()}}function Qd(s,o,a,c){const h=o[2];if(256==(256&h))return;oa(o);const m=ra();try{Zs(o),function Pu(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&M_(s,o,a,2,c);const v=3==(3&h);if(!m)if(v){const S=s.preOrderCheckHooks;null!==S&&qs(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Lu(o,S,0,null),Uu(o,0)}if(function hE(s){for(let o=oc(s);null!==o;o=ac(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const h=a[c],m=h[3];0==(1024&h[2])&&ea(m,1),h[2]|=1024}}}(o),function dE(s){for(let o=oc(s);null!==o;o=ac(o))for(let a=10;a<o.length;a++){const c=o[a],h=c[1];es(c)&&Qd(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&x_(s,o),!m)if(v){const S=s.contentCheckHooks;null!==S&&qs(o,S)}else{const S=s.contentHooks;null!==S&&Lu(o,S,1),Uu(o,1)}!function Kw(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)Fn(~h);else{const m=h,v=a[++c],E=a[++c];Ou(v,m),E(2,o[m])}}}finally{Fn(-1)}}(s,o);const E=s.components;null!==E&&function R_(s,o){for(let a=0;a<o.length;a++)hn(s,o[a])}(o,E);const T=s.viewQuery;if(null!==T&&V_(2,T,c),!m)if(v){const S=s.viewCheckHooks;null!==S&&qs(o,S)}else{const S=s.viewHooks;null!==S&&Lu(o,S,2),Uu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ea(o[3],-1))}finally{ku()}}function Ob(s,o,a,c){const h=o[10],m=!ra(),v=zn(o);try{m&&!v&&h.begin&&h.begin(),v&&fc(s,o,c),Qd(s,o,a,c)}finally{m&&!v&&h.end&&h.end()}}function M_(s,o,a,c,h){const m=ur(),v=2&c;try{Fn(-1),v&&o.length>20&&I_(s,o,20,ra()),a(c,h)}finally{Fn(m)}}function N_(s,o,a){!na()||(function Vb(s,o,a,c){const h=a.directiveStart,m=a.directiveEnd;s.firstCreatePass||eu(a,o),Jn(c,o);const v=a.initialInputs;for(let E=h;E<m;E++){const T=s.data[E],S=Ji(T);S&&uE(o,a,T);const M=Yn(o,s,E,a);Jn(M,o),null!==v&&lE(0,E-h,M,T,0,v),S&&(Mr(a.index,o)[8]=M)}}(s,o,a,kn(a,o)),128==(128&a.flags)&&function Bb(s,o,a){const c=a.directiveStart,h=a.directiveEnd,v=a.index,E=function Za(){return gt.lFrame.currentDirectiveIndex}();try{Fn(v);for(let T=c;T<h;T++){const S=s.data[T],M=o[T];sa(T),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Hg(S,M)}}finally{Fn(-1),sa(E)}}(s,o,a))}function P_(s,o,a=kn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],E=-1===v?a(o,s):s[v];s[h++]=E}}}function O_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Gf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Gf(s,o,a,c,h,m,v,E,T,S){const M=20+c,L=M+h,$=function Qw(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:yt);return a}(M,L),Y="function"==typeof S?S():S;return $[1]={type:s,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:Y,incompleteFirstPass:!1}}function eE(s,o,a,c){const h=pE(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&gE(s).push(c,h.length-1))}function k_(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,h):a[c]=[o,h]}return a}function Cs(s,o,a,c,h,m,v,E){const T=kn(o,a);let M,S=o.inputs;!E&&null!=S&&(M=S[c])?(ol(s,a,M,c,h),On(o)&&function Lb(s,o){const a=Mr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(c=function Fb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,Kt(m)?m.setProperty(T,c,h):_n(c)||(T.setProperty?T.setProperty(c,h):T[c]=h))}function zf(s,o,a,c){let h=!1;if(na()){const m=function sE(s,o,a){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];Hw(a,v.selectors,!1)&&(h||(h=[]),Ln(eu(a,o),s,v.type),Ji(v)?(oE(s,a),h.unshift(v)):h.push(v))}return h}(s,o,a),v=null===c?null:{"":-1};if(null!==m){h=!0,F_(a,s.data.length,m.length);for(let M=0;M<m.length;M++){const L=m[M];L.providersResolver&&L.providersResolver(L)}let E=!1,T=!1,S=il(s,o,m.length,null);for(let M=0;M<m.length;M++){const L=m[M];a.mergedAttrs=Dn(a.mergedAttrs,L.hostAttrs),L_(s,a,o,S,L),jb(S,L,v),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const $=L.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!T&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),T=!0),S++}!function tE(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,v=[];let E=null,T=null;for(let S=o.directiveStart;S<c;S++){const M=h[S],L=M.inputs,$=null===m||w_(o)?null:cE(L,m);v.push($),E=k_(L,S,E),T=k_(M.outputs,S,T)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=T}(s,a)}v&&function aE(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=a[o[h+1]];if(null==m)throw new Oe(-301,`Export of name '${o[h+1]}' not found!`);c.push(o[h],m)}}}(a,c,v)}return a.mergedAttrs=Dn(a.mergedAttrs,a.attrs),h}function iE(s,o,a,c,h,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const T=~o.index;(function Ub(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=T&&E.push(T),E.push(c,h,v)}}function Hg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function oE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function jb(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Ji(o)&&(a[""]=s)}}function F_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function L_(s,o,a,c,h){s.data[c]=h;const m=h.factory||(h.factory=_o(h.type)),v=new bn(m,Ji(h),null);s.blueprint[c]=v,a[c]=v,iE(s,o,0,c,il(s,a,h.hostVars,yt),h)}function uE(s,o,a){const c=kn(o,s),h=O_(a),m=s[10],v=fn(s,Kd(s,h,null,a.onPush?64:16,c,o,m,m.createRenderer(c,a),null,null));s[o.index]=v}function No(s,o,a,c,h,m){const v=kn(s,o);!function U_(s,o,a,c,h,m,v){if(null==m)Kt(s)?s.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==v?K(m):v(m,c||"",h);Kt(s)?s.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],v,m,s.value,a,c,h)}function lE(s,o,a,c,h,m){const v=m[o];if(null!==v){const E=c.setInput;for(let T=0;T<v.length;){const S=v[T++],M=v[T++],L=v[T++];null!==E?c.setInput(a,L,S,M):a[M]=L}}}function cE(s,o){let a=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return a}function Kf(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function hn(s,o){const a=Mr(o,s);if(es(a)){const c=a[1];80&a[2]?Qd(c,a,c.template,a[8]):a[5]>0&&Gt(a)}}function Gt(s){for(let c=oc(s);null!==c;c=ac(c))for(let h=10;h<c.length;h++){const m=c[h];if(1024&m[2]){const v=m[1];Qd(v,m,v.template,m[8])}else m[5]>0&&Gt(m)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=Mr(a[c],s);es(h)&&h[5]>0&&Gt(h)}}function Lt(s,o){const a=Mr(o,s),c=a[1];(function sl(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),fc(c,a,a[8])}function fn(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Yf(s){for(;s;){s[2]|=64;const o=ic(s);if(jc(s)&&!o)return s;s=o}return null}function qg(s,o,a){const c=o[10];c.begin&&c.begin();try{Qd(s,o,s.template,a)}catch(h){throw B_(o,h),h}finally{c.end&&c.end()}}function An(s){!function pc(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],c=bf(a),h=c[1];Ob(h,c,h.template,a)}}(s[8])}function V_(s,o,a){$a(0),o(s,a)}const ro=(()=>Promise.resolve(null))();function pE(s){return s[7]||(s[7]=[])}function gE(s){return s.cleanup||(s.cleanup=[])}function B_(s,o){const a=s[9],c=a?a.get(bo,null):null;c&&c.handleError(o)}function ol(s,o,a,c,h){for(let m=0;m<a.length;){const v=a[m++],E=a[m++],T=o[v],S=s.data[v];null!==S.setInput?S.setInput(T,h,c,E):T[E]=h}}function Po(s,o,a){const c=function Wn(s,o){return on(o[s])}(o,s);!function Pf(s,o,a){Kt(s)?s.setValue(o,a):o.textContent=a}(s[11],c,a)}function al(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?h=ue(h,E):2==m&&(c=ue(c,E+": "+o[++v]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}const j_=new an("INJECTOR",-1);class yE{get(o,a=Yt){if(a===Yt){const c=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw c.name="NullInjectorError",c}return a}}const Z_=new an("Set Injector scope."),Xd={},gc={};let kt;function Qf(){return void 0===kt&&(kt=new yE),kt}function Jf(s,o=null,a=null,c){const h=H_(s,o,a,c);return h._resolveInjectorDefTypes(),h}function H_(s,o=null,a=null,c){return new va(s,a,o||Qf(),c)}class va{constructor(o,a,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];a&&Oi(a,E=>this.processProvider(E,o,a)),Oi([o],E=>this.processInjectorType(E,[],m)),this.records.set(j_,th(void 0,this));const v=this.records.get(Z_);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Yt,c=st.Default){this.assertNotDestroyed();const h=N(this),m=Hn(void 0);try{if(!(c&st.SkipSelf)){let E=this.records.get(o);if(void 0===E){const T=function wE(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(o)&&Sn(o);E=T&&this.injectableDefInScope(T)?th(eh(o),Xd):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&st.Self?Qf():this.parent).get(o,a=c&st.Optional&&a===Yt?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[su]=v[su]||[]).unshift(ae(o)),h)throw v;return function en(s,o,a,c){const h=s[su];throw o[zl]&&h.unshift(o[zl]),s.message=function Or(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ae(o);if(Array.isArray(o))h=o.map(ae).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}h=`{${m.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(Wu,"\n  ")}`}("\n"+s.message,h,a,c),s.ngTokenPath=h,s[su]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Hn(m),N(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ae(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,"")}processInjectorType(o,a,c){if(!(o=X(o)))return!1;let h=co(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,E=-1!==c.indexOf(v);if(void 0!==m&&(h=co(m)),null==h)return!1;if(null!=h.imports&&!E){let M;c.push(v);try{Oi(h.imports,L=>{this.processInjectorType(L,a,c)&&(void 0===M&&(M=[]),M.push(L))})}finally{}if(void 0!==M)for(let L=0;L<M.length;L++){const{ngModule:$,providers:Y}=M[L];Oi(Y,me=>this.processProvider(me,$,Y||B))}}this.injectorDefTypes.add(v);const T=_o(v)||(()=>new v);this.records.set(v,th(T,Xd));const S=h.providers;if(null!=S&&!E){const M=o;Oi(S,L=>this.processProvider(L,M,S))}return void 0!==m&&void 0!==o.providers}processProvider(o,a,c){let h=mc(o=X(o))?o:X(o&&o.provide);const m=function Wb(s,o,a){return $g(s)?th(void 0,s.useValue):th(function ji(s,o,a){let c;if(mc(s)){const h=X(s);return _o(h)||eh(h)}if($g(s))c=()=>X(s.useValue);else if(function zb(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ge(s.deps||[]));else if(function q_(s){return!(!s||!s.useExisting)}(s))c=()=>z(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function vE(s){return!!s.deps}(s))return _o(h)||eh(h);c=()=>new h(...Ge(s.deps))}return c}(s),Xd)}(o);if(mc(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=th(void 0,Xd,!0),v.factory=()=>Ge(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,a){return a.value===Xd&&(a.value=gc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nh(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=X(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function eh(s){const o=Sn(s),a=null!==o?o.factory:_o(s);if(null!==a)return a;if(s instanceof an)throw new Oe(204,"");if(s instanceof Function)return function Oo(s){const o=s.length;if(o>0)throw function da(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new Oe(204,"");const a=function Xt(s){const o=s&&(s[zr]||s[Me]);if(o){const a=function qt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,"")}function th(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function $g(s){return null!==s&&"object"==typeof s&&C in s}function mc(s){return"function"==typeof s}let bs=(()=>{class s{static create(a,c){var h;if(Array.isArray(a))return Jf({name:""},c,a,"");{const m=null!==(h=a.name)&&void 0!==h?h:"";return Jf({name:m},a.parent,a.providers,m)}}}return s.THROW_IF_NOT_FOUND=Yt,s.NULL=new yE,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>z(j_)}),s.__NG_ELEMENT_ID__=-1,s})();function ih(s,o){Zl(bf(s)[1],dn())}let Qg=null;function ul(){if(!Qg){const s=lt.Symbol;if(s&&s.iterator)Qg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Qg=c)}}}return Qg}function ll(s){return!!oh(s)&&(Array.isArray(s)||!(s instanceof Map)&&ul()in s)}function oh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function dr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function J_(s,o,a,c){const h=Re();return dr(h,_s(),o)&&(Nt(),No(Cn(),h,s,o,a,c)),J_}function uh(s,o,a,c){return dr(s,_s(),a)?o+K(a)+c:yt}function fh(s,o,a,c,h,m,v,E){const T=Re(),S=Nt(),M=s+20,L=S.firstCreatePass?function Jg(s,o,a,c,h,m,v,E,T){const S=o.consts,M=Yd(o,s,4,v||null,Nr(S,E));zf(o,a,M,Nr(S,T)),Zl(o,M);const L=M.tViews=Gf(2,M,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,S,T,o,a,c,h,m,v):S.data[M];Jr(L,!1);const $=T[11].createComment("");cc(S,T,$,L),Jn($,T),fn(T,T[M]=Kf($,T,$,L)),gs(L)&&N_(S,T,L),null!=v&&P_(T,L,E)}function Ic(s,o=st.Default){const a=Re();return null===a?z(s,o):Bu(dn(),a,X(s),o)}function BE(){throw new Error("invalid")}function av(s,o,a){const c=Re();return dr(c,_s(),o)&&Cs(Nt(),Cn(),c,s,o,c[11],a,!1),av}function uv(s,o,a,c,h){const v=h?"class":"style";ol(s,a,o.inputs[v],v,c)}function om(s,o,a,c){const h=Re(),m=Nt(),v=20+s,E=h[11],T=h[v]=Xu(E,o,function id(){return gt.lFrame.currentNamespace}()),S=m.firstCreatePass?function mD(s,o,a,c,h,m,v){const E=o.consts,S=Yd(o,s,2,h,Nr(E,m));return zf(o,a,S,Nr(E,v)),null!==S.attrs&&al(S,S.attrs,!1),null!==S.mergedAttrs&&al(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,m,h,0,o,a,c):m.data[v];Jr(S,!0);const M=S.mergedAttrs;null!==M&&Hl(E,T,M);const L=S.classes;null!==L&&m_(E,T,L);const $=S.styles;null!==$&&jw(E,T,$),64!=(64&S.flags)&&cc(m,h,T,S),0===function Va(){return gt.lFrame.elementDepthCount}()&&Jn(T,h),function Ba(){gt.lFrame.elementDepthCount++}(),gs(S)&&(N_(m,h,S),function Yw(s,o,a){if(Bc(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,a[m],m)}}}(m,S,h)),null!==c&&P_(h,S)}function mh(){let s=dn();ys()?function Ru(){gt.lFrame.isParent=!1}():(s=s.parent,Jr(s,!1));const o=s;!function ta(){gt.lFrame.elementDepthCount--}();const a=Nt();a.firstCreatePass&&(Zl(a,s),Bc(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function od(s){return 0!=(16&s.flags)}(o)&&uv(a,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ya(s){return 0!=(32&s.flags)}(o)&&uv(a,o,Re(),o.stylesWithoutHost,!1)}function am(s,o,a,c){om(s,o,a,c),mh()}function cv(s){return!!s&&"function"==typeof s.then}function jE(s){return!!s&&"function"==typeof s.subscribe}const ZE=jE;function dv(s,o,a,c){const h=Re(),m=Nt(),v=dn();return function $E(s,o,a,c,h,m,v,E){const T=gs(c),M=s.firstCreatePass&&gE(s),L=o[8],$=pE(o);let Y=!0;if(3&c.type||E){const Ze=kn(c,o),Je=E?E(Ze):Ze,be=$.length,dt=E?Vt=>E(on(Vt[c.index])):c.index;if(Kt(a)){let Vt=null;if(!E&&T&&(Vt=function qE(s,o,a,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===a&&h[m+1]===c){const E=o[7],T=h[m+2];return E.length>T?E[T]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=m,Vt.__ngLastListenerFn__=m,Y=!1;else{m=lm(c,o,L,m,!1);const tn=a.listen(Je,h,m);$.push(m,tn),M&&M.push(h,dt,be,be+1)}}else m=lm(c,o,L,m,!0),Je.addEventListener(h,m,v),$.push(m),M&&M.push(h,dt,be,v)}else m=lm(c,o,L,m,!1);const me=c.outputs;let Le;if(Y&&null!==me&&(Le=me[h])){const Ze=Le.length;if(Ze)for(let Je=0;Je<Ze;Je+=2){const ls=o[Le[Je]][Le[Je+1]].subscribe(m),Tl=$.length;$.push(m,ls),M&&M.push(h,c.index,Tl,-(Tl+1))}}}(m,h,h[11],v,s,o,!!a,c),dv}function hv(s,o,a,c){try{return!1!==a(c)}catch(h){return B_(s,h),!1}}function lm(s,o,a,c,h){return function m(v){if(v===Function)return c;const E=2&s.flags?Mr(s.index,o):o;0==(32&o[2])&&Yf(E);let T=hv(o,0,c,v),S=m.__ngNextListenerFn__;for(;S;)T=hv(o,0,S,v)&&T,S=S.__ngNextListenerFn__;return h&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function fv(s,o,a){return pv(s,"",o,"",a),fv}function pv(s,o,a,c,h){const m=Re(),v=uh(m,o,a,c);return v!==yt&&Cs(Nt(),Cn(),m,s,v,m[11],h,!1),pv}function mm(s,o=""){const a=Re(),c=Nt(),h=s+20,m=c.firstCreatePass?Yd(c,h,1,o,null):c.data[h],v=a[h]=function Hd(s,o){return Kt(s)?s.createText(o):s.createTextNode(o)}(a[11],o);cc(c,a,v,m),Jr(m,!1)}function vh(s){return Ta("",s,""),vh}function Ta(s,o,a){const c=Re(),h=uh(c,s,o,a);return h!==yt&&Po(c,ur(),h),Ta}const Lo=void 0;var wI=["en",[["a","p"],["AM","PM"],Lo],[["AM","PM"],Lo,Lo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lo,"{1} 'at' {0}",Lo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vI(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Eh={};function Ih(s){const o=function TI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=II(o);if(a)return a;const c=o.split("-")[0];if(a=II(c),a)return a;if("en"===c)return wI;throw new Error(`Missing locale data for the locale "${s}".`)}function Em(s){return Ih(s)[vt.PluralCase]}function II(s){return s in Eh||(Eh[s]=lt.ng&&lt.ng.common&&lt.ng.common.locales&&lt.ng.common.locales[s]),Eh[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Im="en-US";let CI=Im;class YI{}class cA{resolveComponentFactory(o){throw function lA(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let hp=(()=>{class s{}return s.NULL=new cA,s})();function dA(){return Rs(dn(),Re())}function Rs(s,o){return new hr(kn(s,o))}let hr=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=dA,s})();function Ms(s){return s instanceof hr?s.nativeElement:s}class QI{}let hA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function pA(){const s=Re(),a=Mr(dn().index,s);return function fA(s){return s[11]}(Di(a)?a:s)}(),s})(),Nm=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class JI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const XI=new JI("13.1.3"),Pm={};function fp(s,o,a,c,h=!1){for(;null!==a;){const m=o[a.index];if(null!==m&&c.push(on(m)),Ai(m))for(let E=10;E<m.length;E++){const T=m[E],S=T[1].firstChild;null!==S&&fp(T[1],T,S,c)}const v=a.type;if(8&v)fp(s,o,a.child,c);else if(32&v){const E=jd(a,o);let T;for(;T=E();)c.push(T)}else if(16&v){const E=Ff(o,a);if(Array.isArray(E))c.push(...E);else{const T=ic(o[16]);fp(T[1],T,E,c,!0)}}a=h?a.projectionNext:a.next}return c}class xc{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return fp(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ai(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(w(o,c),ru(a,c))}this._attachedToViewContainer=!1}D(this._lView[1],this._lView)}onDestroy(o){eE(this._lView[1],this._lView,null,o)}markForCheck(){Yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ut(s,o,a){ja(!0);try{qg(s,o,a)}finally{ja(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ui(s,o){Wd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class eT extends xc{constructor(o){super(o),this._view=o}detectChanges(){An(this._view)}checkNoChanges(){!function Bi(s){ja(!0);try{An(s)}finally{ja(!1)}}(this._view)}get context(){return null}}class pp extends hp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=sr(o);return new nT(a,this.ngModule)}}function tT(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}const gA=new an("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bd});class nT extends YI{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function So(s){return s.map(ve).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return tT(this.componentDef.inputs)}get outputs(){return tT(this.componentDef.outputs)}create(o,a,c,h){const m=(h=h||this.ngModule)?function zv(s,o){return{get:(a,c,h)=>{const m=s.get(a,Pm,h);return m!==Pm||c===Pm?m:o.get(a,c,h)}}}(o,h.injector):o,v=m.get(QI,js),E=m.get(Nm,null),T=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=c?function Xw(s,o,a){if(Kt(s))return s.selectRootElement(o,a===Ft.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(T,c,this.componentDef.encapsulation):Xu(v.createRenderer(null,this.componentDef),S,function A1(s){const o=s.toLowerCase();return"svg"===o?Ua:"math"===o?"http://www.w3.org/1998/MathML/":null}(S)),L=this.componentDef.onPush?576:528,$=function K_(s,o){return{components:[],scheduler:s||Bd,clean:ro,playerHandler:o||null,flags:0}}(),Y=Gf(0,null,null,1,0,null,null,null,null,null),me=Kd(null,Y,$,L,null,null,v,T,E,m);let Le,Ze;oa(me);try{const Je=function W_(s,o,a,c,h,m){const v=a[1];a[20]=s;const T=Yd(v,20,2,"#host",null),S=T.mergedAttrs=o.hostAttrs;null!==S&&(al(T,S,!0),null!==s&&(Hl(h,s,S),null!==T.classes&&m_(h,s,T.classes),null!==T.styles&&jw(h,s,T.styles)));const M=c.createRenderer(s,o),L=Kd(a,O_(o),null,o.onPush?64:16,a[20],T,c,M,m||null,null);return v.firstCreatePass&&(Ln(eu(T,a),v,o.type),oE(v,T),F_(T,a.length,1)),fn(a,L),a[20]=L}(M,this.componentDef,me,v,T);if(M)if(c)Hl(T,M,["ng-version",XI.full]);else{const{attrs:be,classes:dt}=function O(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&a.push(m);else{if(!Ao(h))break;h=m}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);be&&Hl(T,M,be),dt&&dt.length>0&&m_(T,M,dt.join(" "))}if(Ze=Xo(Y,20),void 0!==a){const be=Ze.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Vt=a[dt];be.push(null!=Vt?Array.from(Vt):null)}}Le=function z_(s,o,a,c,h){const m=a[1],v=function Wf(s,o,a){const c=dn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),L_(s,c,o,il(s,o,1,null),a));const h=Yn(o,s,c.directiveStart,c);Jn(h,o);const m=kn(c,o);return m&&Jn(m,o),h}(m,a,o);if(c.components.push(v),s[8]=v,h&&h.forEach(T=>T(v,o)),o.contentQueries){const T=dn();o.contentQueries(1,v,T.directiveStart)}const E=dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Fn(E.index),iE(a[1],E,0,E.directiveStart,E.directiveEnd,o),Hg(o,v)),v}(Je,this.componentDef,me,$,[ih]),fc(Y,me,null)}finally{ku()}return new mA(this.componentType,Le,Rs(Ze,me),me,Ze)}}class mA extends class uA{}{constructor(o,a,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new eT(h),this.componentType=o}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class gp{}class yA{}const mp=new Map;class rT extends gp{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pp(this);const c=or(o);this._bootstrapComponents=Es(c.bootstrap),this._r3Injector=H_(o,a,[{provide:gp,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=bs.THROW_IF_NOT_FOUND,c=st.Default){return o===bs||o===gp||o===j_?this:this._r3Injector.get(o,a,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _r extends yA{constructor(o){super(),this.moduleType=o,null!==or(o)&&function M1(s){const o=new Set;!function a(c){const h=or(c,!0),m=h.id;null!==m&&(function _A(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(m,mp.get(m),c),mp.set(m,c));const v=Es(h.imports);for(const E of v)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new rT(this.moduleType,o)}}function Lm(s){return o=>{setTimeout(s,void 0,o)}}const Ns=class wp extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){var h,m,v;let E=o,T=a||(()=>null),S=c;if(o&&"object"==typeof o){const L=o;E=null===(h=L.next)||void 0===h?void 0:h.bind(L),T=null===(m=L.error)||void 0===m?void 0:m.bind(L),S=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(T=Lm(T),E&&(E=Lm(E)),S&&(S=Lm(S)));const M=super.subscribe({next:E,error:T,complete:S});return o instanceof Q.w0&&o.add(M),M}};function oT(){return this._results[ul()]()}class e0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ul(),c=e0.prototype;c[a]||(c[a]=oT)}get changes(){return this._changes||(this._changes=new Ns)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=ui(o);(this._changesDetected=!function rf(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(a&&(h=a(h),m=a(m)),m!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ep=(()=>{class s{}return s.__NG_ELEMENT_ID__=aT,s})();const xA=Ep,RA=class extends xA{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o){const a=this._declarationTContainer.tViews,c=Kd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(a)),fc(a,c,o),new xc(c)}};function aT(){return Ah(dn(),Re())}function Ah(s,o){return 4&s.type?new RA(o,s,Rs(s,o)):null}let Ip=(()=>{class s{}return s.__NG_ELEMENT_ID__=t0,s})();function t0(){return n0(dn(),Re())}const uT=Ip,Sh=class extends uT{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Rs(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ws(this._hostTNode,this._hostLView);if($s(o)){const a=Qa(o,this._hostLView),c=Dr(o);return new Eo(a[1].data[c+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=lT(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){const h=o.createEmbeddedView(a||{});return this.insert(h,c),h}createComponent(o,a,c,h,m){const v=o&&!function Pr(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const L=a||{};E=L.index,c=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const T=v?o:new nT(sr(o)),S=c||this.parentInjector;if(!m&&null==T.ngModule&&S){const L=S.get(gp,null);L&&(m=L)}const M=T.create(S,h,void 0,m);return this.insert(M.hostView,E),M}insert(o,a){const c=o._lView,h=c[1];if(function Fl(s){return Ai(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],$=new Sh(L,L[6],L[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(a),v=this._lContainer;!function y(s,o,a,c){const h=10+c,m=a.length;c>0&&(a[h-1][4]=o),c<m-10?(o[4]=a[h],gd(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function f(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,c,v,m);const E=dc(m,v),T=c[11],S=Ts(T,v[7]);return null!==S&&function p_(s,o,a,c,h,m){c[0]=h,c[6]=o,Wd(s,c,a,1,h,m)}(h,v[6],T,c,S,E),o.attachToViewContainerRef(),gd(Tp(v),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=lT(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=w(this._lContainer,a);c&&(ru(Tp(this._lContainer),a),D(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=w(this._lContainer,a);return c&&null!=ru(Tp(this._lContainer),a)?new xc(c):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function lT(s){return s[8]}function Tp(s){return s[8]||(s[8]=[])}function n0(s,o){let a;const c=o[s.index];if(Ai(c))a=c;else{let h;if(8&s.type)h=on(c);else{const m=o[11];h=m.createComment("");const v=kn(s,o);Qe(m,Ts(m,v),h,function qd(s,o){return Kt(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=a=Kf(c,o,h,s),fn(o,a)}return new Sh(a,s,o)}class Um{constructor(o){this.queryList=o,this.matches=null}clone(){return new Um(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let m=0;m<c;m++){const v=a.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new Cp(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gT(o,a).matches&&this.queries[a].setDirty()}}class cT{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class s0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==a?a.push(m):a=[m])}return null!==a?new s0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class o0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new o0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,a,Vm(a,m)),this.matchTNodeWithReadOption(o,a,ju(a,o,m,!1,!1))}else c===Ep?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ju(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===hr||h===Ip||h===Ep&&4&a.type)this.addMatch(a.index,-2);else{const m=ju(a,o,h,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Vm(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function u0(s,o,a,c){return-1===a?function a0(s,o){return 11&s.type?Rs(s,o):4&s.type?Ah(s,o):null}(o,s):-2===a?function l0(s,o,a){return a===hr?Rs(o,s):a===Ep?Ah(o,s):a===Ip?n0(o,s):void 0}(s,o,c):Yn(s,s[1],a,o)}function c0(s,o,a,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,v=a.matches,E=[];for(let T=0;T<v.length;T+=2){const S=v[T];E.push(S<0?null:u0(o,m[S],v[T+1],a.metadata.read))}h.matches=E}return h.matches}function d0(s,o,a,c){const h=s.queries.getByIndex(a),m=h.matches;if(null!==m){const v=c0(s,o,h,a);for(let E=0;E<m.length;E+=2){const T=m[E];if(T>0)c.push(v[E/2]);else{const S=m[E+1],M=o[-T];for(let L=10;L<M.length;L++){const $=M[L];$[17]===$[3]&&d0($[1],$,S,c)}if(null!==M[9]){const L=M[9];for(let $=0;$<L.length;$++){const Y=L[$];d0(Y[1],Y,S,c)}}}}}return c}function h0(s){const o=Re(),a=Nt(),c=qa();$a(c+1);const h=gT(a,c);if(s.dirty&&zn(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?d0(a,o,c,[]):c0(a,o,h,c);s.reset(m,Ms),s.notifyOnChanges()}return!0}return!1}function dT(s,o,a,c){const h=Nt();if(h.firstCreatePass){const m=dn();(function pT(s,o,a){null===s.queries&&(s.queries=new s0),s.queries.track(new o0(o,a))})(h,new cT(o,a,c),m.index),function OA(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function fT(s,o,a){const c=new e0(4==(4&a));eE(s,o,c,c.destroy),null===o[19]&&(o[19]=new Cp),o[19].queries.push(new Um(c))}(h,Re(),a)}function hT(){return function PA(s,o){return s[19].queries[o].queryList}(Re(),qa())}function gT(s,o){return s.queries.getByIndex(o)}function Ap(...s){}const Gm=new an("Application Initializer");let Mc=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Ap,this.reject=Ap,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(cv(m))a.push(m);else if(ZE(m)){const v=new Promise((E,T)=>{m.subscribe({complete:E,error:T})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(z(Gm,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const Mh=new an("AppId"),NT={provide:Mh,useFactory:function YA(){return`${_0()}${_0()}${_0()}`},deps:[]};function _0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PT=new an("Platform Initializer"),v0=new an("Platform ID"),w0=new an("appBootstrapListener");let OT=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const Wm=new an("LocaleId"),kT=new an("DefaultCurrencyCode");class FT{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let E0=(()=>{class s{compileModuleSync(a){return new _r(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),m=Es(or(a).declarations).reduce((v,E)=>{const T=sr(E);return T&&v.push(new nT(T)),v},[]);return new FT(c,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const eS=(()=>Promise.resolve(0))();function LT(s){"undefined"==typeof Zone?eS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ps{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ns(!1),this.onMicrotaskEmpty=new Ns(!1),this.onStable=new Ns(!1),this.onError=new Ns(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function tS(){let s=lt.requestAnimationFrame,o=lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function iS(s){const o=()=>{!function rS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(lt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,T0(s),s.isCheckStableRunning=!0,I0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),T0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,m,v,E)=>{try{return UT(s),a.invokeTask(h,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),sS(s)}},onInvoke:(a,c,h,m,v,E,T)=>{try{return UT(s),a.invoke(h,m,v,E,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),sS(s)}},onHasTask:(a,c,h,m)=>{a.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,T0(s),I0(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,c,h,m)=>(a.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,nS,Ap,Ap);try{return m.runTask(v,a,c)}finally{m.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const nS={};function I0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function T0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function UT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function sS(s){s._nesting--,I0(s)}class Z1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ns,this.onMicrotaskEmpty=new Ns,this.onStable=new Ns,this.onError=new Ns}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}let VT=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),LT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())LT(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(z(Ps))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),BT=(()=>{class s{constructor(){this._applications=new Map,Bo.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Bo.findTestabilityInTree(this,a,c)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();class jT{addToWindow(o){}findTestabilityInTree(o,a,c){return null}}function ZT(s){Bo=s}let jo,Bo=new jT;const C0=new an("AllowMultipleToken");class HT{constructor(o,a){this.name=o,this.token=a}}function uS(s,o,a=[]){const c=`Platform: ${o}`,h=new an(c);return(m=[])=>{let v=b0();if(!v||v.injector.get(C0,!1))if(s)s(a.concat(m).concat({provide:h,useValue:!0}));else{const E=a.concat(m).concat({provide:h,useValue:!0},{provide:Z_,useValue:"platform"});!function El(s){if(jo&&!jo.destroyed&&!jo.injector.get(C0,!1))throw new Oe(400,"");jo=s.get(D0);const o=s.get(PT,null);o&&o.forEach(a=>a())}(bs.create({providers:E,name:c}))}return function lS(s){const o=b0();if(!o)throw new Oe(401,"");return o}()}}function b0(){return jo&&!jo.destroyed?jo:null}let D0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const E=function qT(s,o){let a;return a="noop"===s?new Z1:("zone.js"===s?void 0:s)||new Ps({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),T=[{provide:Ps,useValue:E}];return E.run(()=>{const S=bs.create({providers:T,parent:this.injector,name:a.moduleType.name}),M=a.create(S),L=M.injector.get(bo,null);if(!L)throw new Oe(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:Y=>{L.handleError(Y)}});M.onDestroy(()=>{Sp(this._modules,M),$.unsubscribe()})}),function cS(s,o,a){try{const c=a();return cv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,E,()=>{const $=M.injector.get(Mc);return $.runInitializers(),$.donePromise.then(()=>(function Pv(s){it(s,"Expected localeId to be defined"),"string"==typeof s&&(CI=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Wm,Im)||Im),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,c=[]){const h=Nh({},c);return function oS(s,o,a){const c=new _r(a);return Promise.resolve(c)}(0,0,a).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(a){const c=a.injector.get(Nn);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(z(bs))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function Nh(s,o){return Array.isArray(o)?o.reduce(Nh,s):Object.assign(Object.assign({},s),o)}let Nn=(()=>{class s{constructor(a,c,h,m,v){this._zone=a,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new F.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),T=new F.y(S=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),LT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{M.unsubscribe(),L.unsubscribe()}});this.isStable=(0,se.T)(E,T.pipe((0,ie.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Oe(405,"");let h;h=a instanceof YI?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const m=function aS(s){return s.isBoundToModule}(h)?void 0:this._injector.get(gp),E=h.create(bs.NULL,[],c||h.selector,m),T=E.location.nativeElement,S=E.injector.get(VT,null),M=S&&E.injector.get(BT);return S&&M&&M.registerApplication(T,S),E.onDestroy(()=>{this.detachView(E.hostView),Sp(this.components,E),M&&M.unregisterApplication(T)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Sp(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(w0,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(z(Ps),z(bs),z(bo),z(hp),z(Mc))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function Sp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let A0=!0,Ym=!1;function dS(){return Ym=!0,A0}function $T(){if(Ym)throw new Error("Cannot enable prod mode after platform setup.");A0=!1}let G1=(()=>{class s{}return s.__NG_ELEMENT_ID__=W1,s})();function W1(s){return function z1(s,o,a){if(On(s)&&!a){const c=Mr(s.index,o);return new xc(c,c)}return 47&s.type?new xc(o[16],o):null}(dn(),Re(),16==(16&s))}class Qm{constructor(){}supports(o){return ll(o)}create(o){return new mS(o)}}const xp=(s,o)=>o;class mS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xp}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,m=null;for(;a||c;){const v=!c||a&&a.currentIndex<nC(c,h,m)?a:c,E=nC(v,h,m),T=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{m||(m=[]);const S=E-h,M=T-h;if(S!=M){for(let $=0;$<S;$++){const Y=$<m.length?m[$]:m[$]=0,me=Y+$;M<=me&&me<S&&(m[$]=Y+1)}m[v.previousIndex]=M-S}}E!==T&&o(v,E,T)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!ll(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,m,v,E)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,v,E),c=!0),a=a._next}else h=0,function AE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[ul()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,m,h)):o=this._addAfter(new N0(a,c),m,h),o}_verifyReinsertion(o,a,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new tC),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class N0{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class tC{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new yS,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nC(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class jr{constructor(){}supports(o){return o instanceof Map||oh(o)}create(){return new Jm}}class Jm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||oh(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const c=new ri(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class ri{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Iu(){return new Xm([new Qm])}let Xm=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Iu()),deps:[[s,new kr,new wn]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Oe(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Iu}),s})();function P0(){return new Rp([new jr])}let Rp=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||P0()),deps:[[s,new kr,new wn]]}}find(a){const c=this.factories.find(m=>m.supports(a));if(c)return c;throw new Oe(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:P0}),s})();const _S=[new jr],O0=new Xm([new Qm]),ey=new Rp(_S),Hi=uS(null,"core",[{provide:v0,useValue:"unknown"},{provide:D0,deps:[bs]},{provide:BT,deps:[]},{provide:OT,deps:[]}]),F0=[{provide:Nn,useClass:Nn,deps:[Ps,bs,bo,hp,Mc]},{provide:gA,deps:[Ps],useFactory:function oC(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(a){o.push(a)}}},{provide:Mc,useClass:Mc,deps:[[new wn,Gm]]},{provide:E0,useClass:E0,deps:[]},NT,{provide:Xm,useFactory:function k0(){return O0},deps:[]},{provide:Rp,useFactory:function qi(){return ey},deps:[]},{provide:Wm,useFactory:function iC(s){return s||function sC(){return"undefined"!=typeof $localize&&$localize.locale||Im}()},deps:[[new Vn(Wm),new wn,new kr]]},{provide:kT,useValue:"USD"}];let aC=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(z(Nn))},s.\u0275mod=ir({type:s}),s.\u0275inj=wi({providers:F0}),s})()},3942:(at,De,k)=>{"use strict";k.d(De,{Z:()=>Oe});var l=k(2090),Q=k(4859),F=k(9681),se=k(1877);class ie{constructor(K,ne){this._delegate=K,this.firebase=ne,(0,F._addComponent)(K,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(K,ne=F._DEFAULT_ENTRY_NAME){var pe;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(K);return!Se.isInitialized()&&"EXPLICIT"===(null===(pe=Se.getComponent())||void 0===pe?void 0:pe.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:ne})}_removeServiceInstance(K,ne=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(ne)}_addComponent(K){(0,F._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,F._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ue(){const Be=function ae(Be){const K={},ne={__esModule:!0,initializeApp:function ye(Ye,ft={}){const J=F.initializeApp(Ye,ft);if((0,l.r3)(K,J.name))return K[J.name];const fe=new Be(J,ne);return K[J.name]=fe,fe},app:Se,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function xe(Ye){const ft=Ye.name,J=ft.replace("-compat","");if(F._registerComponent(Ye)&&"PUBLIC"===Ye.type){const fe=(we=Se())=>{if("function"!=typeof we[J])throw oe.create("invalid-app-argument",{appName:ft});return we[J]()};void 0!==Ye.serviceProps&&(0,l.ZB)(fe,Ye.serviceProps),ne[J]=fe,Be.prototype[J]=function(...we){return this._getService.bind(this,ft).apply(this,Ye.multipleInstances?we:[])}}return"PUBLIC"===Ye.type?ne[J]:null},removeApp:function pe(Ye){delete K[Ye]},useAsService:function tt(Ye,ft){return"serverAuth"===ft?null:ft},modularAPIs:F}};function Se(Ye){if(!(0,l.r3)(K,Ye=Ye||F._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Ye});return K[Ye]}return ne.default=ne,Object.defineProperty(ne,"apps",{get:function He(){return Object.keys(K).map(Ye=>K[Ye])}}),Se.App=Be,ne}(ie);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function K(ne){(0,l.ZB)(Be,ne)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Be}(),H=new se.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=Z;!function Ae(Be){(0,F.registerVersion)("@firebase/app-compat","0.1.19",Be)}()},9681:(at,De,k)=>{"use strict";k.r(De),k.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>zr,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>pr,_addOrOverwriteComponent:()=>rn,_apps:()=>rr,_clearComponents:()=>Ei,_components:()=>zt,_getProvider:()=>wi,_registerComponent:()=>Wr,_removeServiceInstance:()=>Sn,deleteApp:()=>st,getApp:()=>Me,getApps:()=>gr,initializeApp:()=>fs,onLog:()=>Hn,registerVersion:()=>Bt,setLogLevel:()=>Us});var l=k(5861),Q=k(4859),F=k(1877),se=k(2090),ie=k(2940);class he{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function oe(Te){const _e=Te.getComponent();return"VERSION"===(null==_e?void 0:_e.type)}(qe)){const rt=qe.getImmediate();return`${rt.library}/${rt.version}`}return null}).filter(qe=>qe).join(" ")}}const ae="@firebase/app",Z=new F.Yd("@firebase/app"),it="[DEFAULT]",pt={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rr=new Map,zt=new Map;function pr(Te,_e){try{Te.container.addComponent(_e)}catch(qe){Z.debug(`Component ${_e.name} failed to register with FirebaseApp ${Te.name}`,qe)}}function rn(Te,_e){Te.container.addOrOverwriteComponent(_e)}function Wr(Te){const _e=Te.name;if(zt.has(_e))return Z.debug(`There were multiple attempts to register component ${_e}.`),!1;zt.set(_e,Te);for(const qe of rr.values())pr(qe,Te);return!0}function wi(Te,_e){const qe=Te.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),Te.container.getProvider(_e)}function Sn(Te,_e,qe=it){wi(Te,_e).clearInstance(qe)}function Ei(){zt.clear()}const qt=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class co{constructor(_e,qe,rt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}const zr="9.6.8";function fs(Te,_e={}){"object"!=typeof _e&&(_e={name:_e});const qe=Object.assign({name:it,automaticDataCollectionEnabled:!1},_e),rt=qe.name;if("string"!=typeof rt||!rt)throw qt.create("bad-app-name",{appName:String(rt)});const Tt=rr.get(rt);if(Tt){if((0,se.vZ)(Te,Tt.options)&&(0,se.vZ)(qe,Tt.config))return Tt;throw qt.create("duplicate-app",{appName:rt})}const ht=new Q.H0(rt);for(const ir of zt.values())ht.addComponent(ir);const sn=new co(Te,qe,ht);return rr.set(rt,sn),sn}function Me(Te=it){const _e=rr.get(Te);if(!_e)throw qt.create("no-app",{appName:Te});return _e}function gr(){return Array.from(rr.values())}function st(Te){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(Te){const _e=Te.name;rr.has(_e)&&(rr.delete(_e),yield Promise.all(Te.container.getProviders().map(qe=>qe.delete())),Te.isDeleted=!0)})).apply(this,arguments)}function Bt(Te,_e,qe){var rt;let Tt=null!==(rt=pt[Te])&&void 0!==rt?rt:Te;qe&&(Tt+=`-${qe}`);const ht=Tt.match(/\s|\//),sn=_e.match(/\s|\//);if(ht||sn){const ir=[`Unable to register library "${Tt}" with version "${_e}":`];return ht&&ir.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),ht&&sn&&ir.push("and"),sn&&ir.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void Z.warn(ir.join(" "))}Wr(new Q.wA(`${Tt}-version`,()=>({library:Tt,version:_e}),"VERSION"))}function Hn(Te,_e){if(null!==Te&&"function"!=typeof Te)throw qt.create("invalid-log-argument");(0,F.Am)(Te,_e)}function Us(Te){(0,F.Ub)(Te)}const gn="firebase-heartbeat-store";let si=null;function Wo(){return si||(si=(0,ie.openDb)("firebase-heartbeat-database",1,Te=>{0===Te.oldVersion&&Te.createObjectStore(gn)}).catch(Te=>{throw qt.create("storage-open",{originalErrorMessage:Te.message})})),si}function ut(){return(ut=(0,l.Z)(function*(Te){try{return(yield Wo()).transaction(gn).objectStore(gn).get(ln(Te))}catch(_e){throw qt.create("storage-get",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function mt(Te,_e){return ho.apply(this,arguments)}function ho(){return(ho=(0,l.Z)(function*(Te,_e){try{const rt=(yield Wo()).transaction(gn,"readwrite");return yield rt.objectStore(gn).put(_e,ln(Te)),rt.complete}catch(qe){throw qt.create("storage-set",{originalErrorMessage:qe.message})}})).apply(this,arguments)}function lt(){return(lt=(0,l.Z)(function*(Te){try{const qe=(yield Wo()).transaction(gn,"readwrite");return yield qe.objectStore(gn).delete(ln(Te)),qe.complete}catch(_e){throw qt.create("storage-delete",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function ln(Te){return`${Te.name}!${Te.options.appId}`}class B{constructor(_e){this.container=_e,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new Ee(qe),this._heartbeatsCachePromise=this._storage.read().then(rt=>(this._heartbeatsCache=rt,rt))}triggerHeartbeat(){var _e=this;return(0,l.Z)(function*(){const rt=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=function q(){return(new Date).toISOString().substring(0,10)}();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),!_e._heartbeatsCache.some(ht=>ht.date===Tt))return _e._heartbeatsCache.push({date:Tt,userAgent:rt}),_e._heartbeatsCache=_e._heartbeatsCache.filter(ht=>{const sn=new Date(ht.date).valueOf();return Date.now()-sn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,l.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache)return"";const{heartbeatsToSend:qe,unsentEntries:rt}=function G(Te,_e=1024){const qe=[];let rt=Te.slice();for(const Tt of Te){const ht=qe.find(sn=>sn.userAgent===Tt.userAgent);if(ht){if(ht.dates.push(Tt.date),ee(qe)>_e){ht.dates.pop();break}}else if(qe.push({userAgent:Tt.userAgent,dates:[Tt.date]}),ee(qe)>_e){qe.pop();break}rt=rt.slice(1)}return{heartbeatsToSend:qe,unsentEntries:rt}}(_e._heartbeatsCache),Tt=(0,se.h$)(JSON.stringify({version:2,heartbeats:qe}));return rt.length>0?(_e._heartbeatsCache=rt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache=null,_e._storage.deleteAll()),Tt})()}}class Ee{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,l.Z)(function*(){if(yield _e._canUseIndexedDBPromise){const rt=yield function Ft(Te){return ut.apply(this,arguments)}(_e.app);return(null==rt?void 0:rt.heartbeats)||[]}return[]})()}overwrite(_e){var qe=this;return(0,l.Z)(function*(){if(yield qe._canUseIndexedDBPromise)return mt(qe.app,{heartbeats:_e})})()}add(_e){var qe=this;return(0,l.Z)(function*(){if(yield qe._canUseIndexedDBPromise){const Tt=yield qe.read();return mt(qe.app,{heartbeats:[...Tt,..._e]})}})()}delete(_e){var qe=this;return(0,l.Z)(function*(){if(yield qe._canUseIndexedDBPromise){const Tt=yield qe.read();return mt(qe.app,{heartbeats:Tt.filter(ht=>!_e.includes(ht))})}})()}deleteAll(){var _e=this;return(0,l.Z)(function*(){if(yield _e._canUseIndexedDBPromise)return function ps(Te){return lt.apply(this,arguments)}(_e.app)})()}}function ee(Te){return(0,se.h$)(JSON.stringify({version:2,heartbeats:Te})).length}!function $e(Te){Wr(new Q.wA("platform-logger",_e=>new he(_e),"PRIVATE")),Wr(new Q.wA("heartbeat",_e=>new B(_e),"PRIVATE")),Bt(ae,"0.7.18",Te),Bt(ae,"0.7.18","esm2017"),Bt("fire-js","")}("")},4859:(at,De,k)=>{"use strict";k.d(De,{wA:()=>F,H0:()=>ae,zt:()=>ie});var l=k(5861),Q=k(2090);class F{constructor(Z,H,X){this.name=Z,this.instanceFactory=H,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const se="[DEFAULT]";class ie{constructor(Z,H){this.name=Z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const H=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(H)){const X=new Q.BH;if(this.instancesDeferred.set(H,X),this.isInitialized(H)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:H});je&&X.resolve(je)}catch(je){}}return this.instancesDeferred.get(H).promise}getImmediate(Z){var H;const X=this.normalizeInstanceIdentifier(null==Z?void 0:Z.identifier),je=null!==(H=null==Z?void 0:Z.optional)&&void 0!==H&&H;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(je)return null;throw Ae}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function oe(ue){return"EAGER"===ue.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:se})}catch(H){}for(const[H,X]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(H);try{const Ae=this.getOrInitializeService({instanceIdentifier:je});X.resolve(Ae)}catch(Ae){}}}}clearInstance(Z=se){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,l.Z)(function*(){const H=Array.from(Z.instances.values());yield Promise.all([...H.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...H.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=se){return this.instances.has(Z)}getOptions(Z=se){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:H={}}=Z,X=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:X,options:H});for(const[Ae,Oe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Oe.resolve(je);return je}onInit(Z,H){var X;const je=this.normalizeInstanceIdentifier(H),Ae=null!==(X=this.onInitCallbacks.get(je))&&void 0!==X?X:new Set;Ae.add(Z),this.onInitCallbacks.set(je,Ae);const Oe=this.instances.get(je);return Oe&&Z(Oe,je),()=>{Ae.delete(Z)}}invokeOnInitCallbacks(Z,H){const X=this.onInitCallbacks.get(H);if(X)for(const je of X)try{je(Z,H)}catch(Ae){}}getOrInitializeService({instanceIdentifier:Z,options:H={}}){let X=this.instances.get(Z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=Z,ue===se?void 0:ue),options:H}),this.instances.set(Z,X),this.instancesOptions.set(Z,H),this.invokeOnInitCallbacks(X,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,X)}catch(je){}var ue;return X||null}normalizeInstanceIdentifier(Z=se){return this.component?this.component.multipleInstances?Z:se:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const H=this.getProvider(Z.name);if(H.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);H.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const H=new ie(Z,this);return this.providers.set(Z,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,k)=>{"use strict";k.d(De,{in:()=>Q,Yd:()=>oe,Ub:()=>ae,Am:()=>ue});const l=[];var Q=(()=>{return(Z=Q||(Q={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Q;var Z})();const F={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,ie={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},he=(Z,H,...X)=>{if(H<Z.logLevel)return;const je=(new Date).toISOString(),Ae=ie[H];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ae](`[${je}]  ${Z.name}:`,...X)};class oe{constructor(H){this.name=H,this._logLevel=se,this._logHandler=he,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function ae(Z){l.forEach(H=>{H.setLogLevel(Z)})}function ue(Z,H){for(const X of l){let je=null;H&&H.level&&(je=F[H.level]),X.userLogHandler=null===Z?null:(Ae,Oe,...Be)=>{const K=Be.map(ne=>{if(null==ne)return null;if("string"==typeof ne)return ne;if("number"==typeof ne||"boolean"==typeof ne)return ne.toString();if(ne instanceof Error)return ne.message;try{return JSON.stringify(ne)}catch(pe){return null}}).filter(ne=>ne).join(" ");Oe>=(null!=je?je:Ae.logLevel)&&Z({level:Q[Oe].toLowerCase(),message:K,args:Be,type:Ae.name})}}}},5861:(at,De,k)=>{"use strict";function l(F,se,ie,he,oe,ae,ue){try{var Z=F[ae](ue),H=Z.value}catch(X){return void ie(X)}Z.done?se(H):Promise.resolve(H).then(he,oe)}function Q(F){return function(){var se=this,ie=arguments;return new Promise(function(he,oe){var ae=F.apply(se,ie);function ue(H){l(ae,he,oe,ue,Z,"next",H)}function Z(H){l(ae,he,oe,ue,Z,"throw",H)}ue(void 0)})}}k.d(De,{Z:()=>Q})}},at=>{at(at.s=5338)}]);